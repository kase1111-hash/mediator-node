FAIL test/unit/mapping/VectorDatabase.test.ts (7.394 s)
  VectorDatabase
    Constructor
      ✓ should create instance with config (30 ms)
      ✓ should create HNSW index with correct dimensions (1 ms)
      ✓ should accept custom vector dimensions (1 ms)
    Initialization - New Index
      ✓ should initialize new index when no existing index found (2 ms)
      ✓ should use default maxElements if not provided (1 ms)
      ✓ should accept custom maxElements
      ✓ should create directory if it does not exist (1 ms)
      ✓ should mark as initialized after successful init (1 ms)
    Initialization - Load Existing Index
      ✓ should load existing index when available (1 ms)
      ✓ should restore intent map from saved data (1 ms)
      ✓ should set nextId based on loaded intents (1 ms)
      ✓ should handle empty intent map (1 ms)
      ✓ should load index even if map file missing (1 ms)
    Initialization - Error Handling
      ✓ should throw error if index creation fails (37 ms)
      ✓ should throw error if index loading fails (1 ms)
      ✕ should handle corrupted intent map file (2 ms)
    Adding Intents
      ✓ should add intent with embedding (1 ms)
      ✓ should increment ID for each intent (1 ms)
      ✓ should track intents in map (1 ms)
      ✓ should handle multiple intents (1 ms)
      ✓ should throw error if not initialized (2 ms)
      ✓ should handle embedding with different dimensions gracefully (1 ms)
    Finding Similar Intents
      ✓ should find similar intents (2 ms)
      ✓ should convert distance to similarity score (2 ms)
      ✓ should filter out low similarity results (2 ms)
      ✓ should exclude specified hash (1 ms)
      ✓ should respect k parameter (2 ms)
      ✓ should calculate priority based on similarity and fee (2 ms)
      ✓ should handle empty search results (2 ms)
      ✓ should handle search errors gracefully (2 ms)
      ✓ should throw error if not initialized (3 ms)
    Finding Top Alignment Candidates
      ✓ should find alignment candidates for multiple intents (3 ms)
      ✓ should sort candidates by priority (2 ms)
      ✓ should respect topK parameter (3 ms)
      ✓ should calculate combined estimated value (2 ms)
      ✓ should skip intents without embeddings (2 ms)
      ✓ should handle empty intent list (1 ms)
      ✓ should handle empty embeddings map (1 ms)
    Removing Intents
      ✓ should remove intent from map (1 ms)
      ✓ should handle non-existent hash gracefully (1 ms)
      ✓ should remove correct intent when multiple exist (1 ms)
    Persistence - Save
      ✓ should save index to disk (2 ms)
      ✓ should save intent map to JSON (2 ms)
      ✓ should create directory if it does not exist (1 ms)
      ✓ should throw error if save fails (2 ms)
      ✓ should save valid JSON format (5 ms)
    Statistics
      ✓ should return correct total intents (2 ms)
      ✓ should return correct nextId (1 ms)
      ✓ should update stats after adding intents (1 ms)
      ✓ should update stats after removing intents (1 ms)
      ✓ should return stats for empty database (1 ms)
    Edge Cases
      ✓ should handle zero-vector embedding (1 ms)
      ✓ should handle negative values in embedding
      ✓ should handle very large embeddings (2 ms)
      ✓ should handle many intents efficiently (23 ms)
      ✓ should handle search with no intents added (1 ms)
      ✓ should handle intent with undefined offeredFee (1 ms)

  ● VectorDatabase › Initialization - Error Handling › should handle corrupted intent map file

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      247 |       mockedFs.readFileSync.mockReturnValue('invalid json {]');
      248 |
    > 249 |       await expect(vectorDb.initialize()).rejects.toThrow();
          |             ^
      250 |     });
      251 |   });
      252 |

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/mapping/VectorDatabase.test.ts:249:13)

FAIL test/unit/consensus/AuthorityManager.test.ts (7.594 s)
  AuthorityManager
    constructor
      ✓ should initialize with empty authority set (25 ms)
      ✓ should initialize as not authorized (1 ms)
    loadAuthoritySet
      ✕ should load authority set from chain successfully (4 ms)
      ✓ should set isAuthorized to true when mediator is in authority set (1 ms)
      ✓ should set isAuthorized to false when mediator is not in authority set (1 ms)
      ✓ should handle empty authority set (1 ms)
      ✓ should handle missing authorities data
      ✓ should handle network errors gracefully
      ✓ should handle 404 errors gracefully (1 ms)
      ✓ should deduplicate authorities in the set
    checkAuthorization
      ✓ should return false for PoA mode when not authorized (1 ms)
      ✓ should return true for PoA mode when authorized (1 ms)
      ✓ should return false for Hybrid mode when not authorized
      ✓ should return true for Hybrid mode when authorized
      ✓ should return true for Permissionless mode regardless of authority set
      ✓ should return true for DPoS mode regardless of authority set
      ✓ should return false before loading authority set in PoA mode (1 ms)
    isAuthority
      ✓ should return true for public keys in authority set
      ✓ should return false for public keys not in authority set (1 ms)
      ✓ should return false when authority set is empty
      ✓ should handle case sensitivity correctly (1 ms)
    getAuthorities
      ✓ should return array of all authorities (1 ms)
      ✓ should return empty array when no authorities loaded
      ✓ should return a new array each time (1 ms)
    requestAuthorization
      ✕ should submit authorization request successfully (2 ms)
      ✓ should return true on 201 response (1 ms)
      ✓ should return false on non-200/201 response
      ✓ should handle network errors gracefully
      ✓ should include correct proposal type
      ✓ should include mediator public key in parameters (1 ms)
      ✓ should handle 500 server errors
    edge cases
      ✓ should handle authority set updates
      ✓ should handle authority removal
      ✓ should handle large authority sets
      ✓ should maintain authorization status across multiple checks (1 ms)
      ✓ should handle concurrent load attempts
      ✓ should handle empty string in authority set (1 ms)
      ✓ should preserve consensus mode behavior

  ● AuthorityManager › loadAuthoritySet › should load authority set from chain successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/consensus/authorities"
    Received: "https://chain.example.com/api/v1/consensus/authorities", {"timeout": 10000}

    Number of calls: 1

      78 |       await authorityManager.loadAuthoritySet();
      79 |
    > 80 |       expect(mockAxios.get).toHaveBeenCalledWith(
         |                             ^
      81 |         `${config.chainEndpoint}/api/v1/consensus/authorities`
      82 |       );
      83 |

      at Object.<anonymous> (test/unit/consensus/AuthorityManager.test.ts:80:29)

  ● AuthorityManager › requestAuthorization › should submit authorization request successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/governance/proposals", ObjectContaining {"description": Any<String>, "parameters": {"publicKey": "mediator_pub_key_123"}, "proposerId": "mediator_pub_key_123", "timestamp": Any<Number>, "title": StringContaining "mediator_pub_key_123", "type": "authority_add"}
    Received: "https://chain.example.com/api/v1/governance/proposals", {"description": "Request to join the mediator authority set", "parameters": {"publicKey": "mediator_pub_key_123"}, "proposerId": "mediator_pub_key_123", "timestamp": 1770744152470, "title": "Add mediator_pub_key_123 to Authority Set", "type": "authority_add"}, {"timeout": 15000}

    Number of calls: 1

      347 |
      348 |       expect(result).toBe(true);
    > 349 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      350 |         `${config.chainEndpoint}/api/v1/governance/proposals`,
      351 |         expect.objectContaining({
      352 |           type: 'authority_add',

      at Object.<anonymous> (test/unit/consensus/AuthorityManager.test.ts:349:30)

FAIL test/unit/consensus/StakeManager.test.ts (7.621 s)
  StakeManager
    constructor
      ✓ should initialize with default stake values (25 ms)
      ✓ should handle missing bondedStakeAmount in config (1 ms)
      ✓ should use mediator public key from config (1 ms)
    bondStake
      ✕ should bond stake successfully (3 ms)
      ✓ should update stake amount after bonding (1 ms)
      ✓ should update effective stake after bonding
      ✓ should handle bonding with delegations already present (1 ms)
      ✓ should return false on non-200 response
      ✓ should handle network errors gracefully
      ✓ should handle 500 server errors (1 ms)
    unbondStake
      ✕ should initiate unbonding successfully (1 ms)
      ✓ should set status to unbonding (1 ms)
      ✓ should return false on non-200 response
      ✓ should handle network errors gracefully (1 ms)
    loadDelegations
      ✕ should load delegations from chain successfully (1 ms)
      ✓ should update effective stake with delegations
      ✓ should filter out non-active delegations
      ✓ should handle missing delegations data (1 ms)
      ✓ should handle network errors gracefully (1 ms)
      ✓ should handle empty delegations array
    meetsMinimumStake
      ✓ should return true when effective stake meets minimum (1 ms)
      ✓ should return false when effective stake is below minimum (1 ms)
      ✓ should return true when effective stake exactly equals minimum (1 ms)
      ✓ should consider delegations in minimum stake calculation
      ✓ should return true when minEffectiveStake is not set
      ✓ should return true when minEffectiveStake is 0 (1 ms)
    getStake
      ✓ should return a copy of stake
      ✓ should return current stake state
    getEffectiveStake
      ✓ should return current effective stake (1 ms)
      ✓ should return updated effective stake after bonding
      ✓ should include delegations in effective stake (1 ms)
    handleSlashing
      ✓ should reduce stake amount by slashing amount
      ✓ should update effective stake after slashing (1 ms)
      ✓ should not reduce stake below zero
      ✕ should notify chain of slashing event (3 ms)
      ✓ should handle slashing notification errors gracefully
      ✓ should preserve delegations during slashing (1 ms)
    edge cases
      ✓ should handle multiple bond operations
      ✓ should handle bond after unbond (1 ms)
      ✓ should handle delegations loading multiple times
      ✓ should handle slashing entire stake (1 ms)
      ✓ should preserve state across multiple operations (1 ms)

  ● StakeManager › bondStake › should bond stake successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "https://chain.example.com/api/v1/stake/bond",
      {"amount": 5000, "mediatorId": "mediator_pub_key_123", "timestamp": 1770744152397},
    + {"timeout": 15000},

    Number of calls: 1

      88 |
      89 |       expect(result).toBe(true);
    > 90 |       expect(mockAxios.post).toHaveBeenCalledWith(
         |                              ^
      91 |         `${config.chainEndpoint}/api/v1/stake/bond`,
      92 |         {
      93 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:90:30)

  ● StakeManager › unbondStake › should initiate unbonding successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "https://chain.example.com/api/v1/stake/unbond",
      {"mediatorId": "mediator_pub_key_123", "timestamp": 1770744152469},
    + {"timeout": 15000},

    Number of calls: 1

      177 |
      178 |       expect(result).toBe(true);
    > 179 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      180 |         `${config.chainEndpoint}/api/v1/stake/unbond`,
      181 |         {
      182 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:179:30)

  ● StakeManager › loadDelegations › should load delegations from chain successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/delegations/mediator_pub_key_123"
    Received: "https://chain.example.com/api/v1/delegations/mediator_pub_key_123", {"timeout": 10000}

    Number of calls: 1

      237 |       await stakeManager.loadDelegations();
      238 |
    > 239 |       expect(mockAxios.get).toHaveBeenCalledWith(
          |                             ^
      240 |         `${config.chainEndpoint}/api/v1/delegations/${config.mediatorPublicKey}`
      241 |       );
      242 |

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:239:29)

  ● StakeManager › handleSlashing › should notify chain of slashing event

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/stake/slash", {"amount": 1000, "mediatorId": "mediator_pub_key_123", "reason": "Upheld challenge", "timestamp": Any<Number>}
    Received
           1
              "https://chain.example.com/api/v1/stake/bond",
              Object {
            -   "amount": 1000,
            +   "amount": 5000,
                "mediatorId": "mediator_pub_key_123",
            -   "reason": "Upheld challenge",
            -   "timestamp": Any<Number>,
            +   "timestamp": 1770744152483,
              },
            + {"timeout": 15000},
           2
              "https://chain.example.com/api/v1/stake/slash",
              {"amount": 1000, "mediatorId": "mediator_pub_key_123", "reason": "Upheld challenge", "timestamp": 1770744152483},
            + {"timeout": 10000},

    Number of calls: 2

      496 |
      497 |       // First call is bondStake, second is slashing notification
    > 498 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      499 |         `${config.chainEndpoint}/api/v1/stake/slash`,
      500 |         {
      501 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:498:30)

FAIL test/unit/burn/BurnManager.test.ts (7.663 s)
  BurnManager
    Constructor and Initialization
      ✓ should create burn data directory if it does not exist (28 ms)
      ✓ should load existing submission data if available (1 ms)
    calculateFilingBurn
      ✓ should return zero for first daily submission (free allowance) (3 ms)
      ✓ should calculate base burn for second submission (1 ms)
      ✓ should apply exponential escalation for multiple submissions (1 ms)
      ✓ should apply load multiplier when enabled (1 ms)
      ✓ should handle custom escalation parameters (1 ms)
    executeFilingBurn
      ✓ should not execute burn for free submission (1 ms)
      ✕ should execute burn transaction for paid submission (2 ms)
      ✓ should update user submission record (1 ms)
      ✕ should handle burn transaction failure (1 ms)
      ✓ should track different users independently
    executeSuccessBurn
      ✕ should execute success burn on settlement closure (3 ms)
      ✓ should skip negligible success burns
      ✓ should handle custom success burn percentage (1 ms)
    Load Multiplier Management
      ✓ should update load multiplier within bounds
      ✓ should clamp load multiplier to maximum
      ✓ should clamp load multiplier to minimum of 1.0 (1 ms)
    Burn Statistics
      ✓ should provide accurate burn statistics (1 ms)
      ✓ should track burns by type (2 ms)
    Data Persistence
      ✓ should persist submission data to disk (1 ms)
    Edge Cases
      ✓ should handle zero base burn amount
      ✓ should handle multiple free submissions if configured
      ✓ should reset submission count on new day (1 ms)

  ● BurnManager › executeFilingBurn › should execute burn transaction for paid submission

    expect(received).toBe(expected) // Object.is equality

    Expected: "tx_abc123"
    Received: undefined

      226 |       expect(result?.intentHash).toBe('intent2');
      227 |       expect(result?.amount).toBe(20); // 10 × 2
    > 228 |       expect(result?.transactionHash).toBe('tx_abc123');
          |                                       ^
      229 |
      230 |       expect(mockAxios.post).toHaveBeenCalledWith(
      231 |         'http://test-chain:8080/api/v1/burns',

      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:228:39)

  ● BurnManager › executeFilingBurn › should handle burn transaction failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"amount": 20, "author": "user1", "id": "burn_1770744152511_fbe625ce23553a2e", "intentHash": "intent2", "multiplier": 2, "timestamp": 1770744152511, "transactionHash": undefined, "type": "base_filing"}

      258 |
      259 |       // Second submission should throw
    > 260 |       await expect(burnManager.executeFilingBurn('user1', 'intent2')).rejects.toThrow(
          |             ^
      261 |         'Network error'
      262 |       );
      263 |     });

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:260:13)

  ● BurnManager › executeSuccessBurn › should execute success burn on settlement closure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://test-chain:8080/api/v1/burns", ObjectContaining {"settlementId": "settlement_123", "type": "success"}

    Number of calls: 0

      303 |       expect(result?.author).toBe('mediator_1');
      304 |
    > 305 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      306 |         'http://test-chain:8080/api/v1/burns',
      307 |         expect.objectContaining({
      308 |           type: 'success',

      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:305:30)

FAIL test/unit/ingestion/IntentIngester.test.ts (7.745 s)
  IntentIngester
    Constructor
      ✓ should initialize with empty cache (25 ms)
      ✓ should accept config (1 ms)
    Intent Validation - isValidIntent
      ✕ should accept valid intent with all required fields (3 ms)
      ✓ should reject intent without hash (1 ms)
      ✓ should reject intent without author
      ✓ should reject intent without prose (1 ms)
      ✓ should reject intent with prose shorter than 10 characters
      ✓ should reject intent with prohibited coercive words
      ✓ should reject intent with illegal content (1 ms)
      ✓ should detect word "coerce" in intent prose (1 ms)
      ✓ should detect word "force" in intent prose
      ✓ should detect word "manipulate" in intent prose
      ✓ should detect word "illegal" in intent prose (1 ms)
    Unalignable Detection - isUnalignable
      ✓ should mark intent as unalignable if flagCount >= 5
      ✓ should mark intent as unalignable if flagCount > 5
      ✓ should not mark intent as unalignable if flagCount < 5
      ✓ should mark intent as unalignable if prose is too short (<50 chars)
      ✓ should mark intent as unalignable if prose has no spaces
      ✓ should accept intent with flagCount undefined
      ✓ should reject vague intent (1 ms)
    Desire Extraction - extractDesires
      ✓ should extract desires from "I want" pattern (1 ms)
      ✓ should extract desires from "I need" pattern
      ✓ should extract desires from "looking for" pattern
      ✓ should extract desires from "seeking" pattern (1 ms)
      ✓ should extract multiple desires from prose
      ✓ should return default desire if no patterns match
      ✓ should handle empty prose gracefully (1 ms)
    Constraint Extraction - extractConstraints
      ✓ should extract constraints from "must be" pattern (1 ms)
      ✓ should extract constraints from "must have" pattern
      ✓ should extract constraints from "cannot" pattern (1 ms)
      ✓ should extract constraints from "requires" pattern
      ✓ should extract multiple constraints from prose (25 ms)
      ✓ should return empty array if no constraints found (1 ms)
      ✓ should handle empty prose gracefully
    Cache Management
      ✕ should cache valid intent (1 ms)
      ✕ should not cache duplicate intent (1 ms)
      ✕ should cache multiple different intents
      ✓ should enforce max cache size
      ✕ should remove oldest intents when cache is full (1 ms)
      ✕ should get intent by hash (1 ms)
      ✓ should return undefined for non-existent hash (1 ms)
      ✕ should remove intent from cache
      ✕ should parse desires if not provided (1 ms)
      ✕ should parse constraints if not provided
    Prioritization
      ✕ should prioritize intents by fee (descending) (1 ms)
      ✕ should handle intents without offeredFee
      ✓ should return empty array if no intents cached (1 ms)
    Polling Behavior
      ✓ should start polling
      ✓ should stop polling (1 ms)
      ✕ should call API with correct parameters (1 ms)
      ✓ should update lastPollTime after polling
      ✓ should handle API errors gracefully (1 ms)
      ✓ should handle empty response
      ✓ should handle malformed response
    Edge Cases
      ✕ should handle intent with very long prose (1 ms)
      ✕ should handle intent with special characters in prose (1 ms)
      ✕ should handle intent with unicode characters
      ✕ should handle concurrent polling calls
    Burn Integration
      previewIntentBurn
        ✓ should return null when BurnManager is not configured (1 ms)
        ✓ should return burn preview when BurnManager is configured (3 ms)
        ✓ should calculate non-free burn for second submission (5 ms)
      submitIntent
        ✓ should throw error when BurnManager is not configured (11 ms)
        ✓ should throw error for invalid intent data
        ✕ should submit free intent successfully (1 ms)
        ✕ should execute burn and submit paid intent (2 ms)
        ✓ should cache submitted intent locally (1 ms)
        ✓ should extract desires and constraints if not provided (1 ms)
        ✕ should handle burn execution failure (1 ms)
        ✕ should handle chain submission failure (1 ms)

  ● IntentIngester › Intent Validation - isValidIntent › should accept valid intent with all required fields

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      129 |
      130 |       const cached = ingester.getCachedIntents();
    > 131 |       expect(cached).toHaveLength(1);
          |                      ^
      132 |       expect(cached[0].hash).toBe(VALID_INTENT_1.hash);
      133 |     });
      134 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:131:22)

  ● IntentIngester › Cache Management › should cache valid intent

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      367 |
      368 |       const cached = ingester.getCachedIntents();
    > 369 |       expect(cached).toHaveLength(1);
          |                      ^
      370 |       expect(cached[0].hash).toBe(VALID_INTENT_1.hash);
      371 |     });
      372 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:369:22)

  ● IntentIngester › Cache Management › should not cache duplicate intent

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      379 |
      380 |       const cached = ingester.getCachedIntents();
    > 381 |       expect(cached).toHaveLength(1);
          |                      ^
      382 |     });
      383 |
      384 |     it('should cache multiple different intents', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:381:22)

  ● IntentIngester › Cache Management › should cache multiple different intents

    expect(received).toHaveLength(expected)

    Expected length: 4
    Received length: 0
    Received array:  []

      390 |
      391 |       const cached = ingester.getCachedIntents();
    > 392 |       expect(cached).toHaveLength(ALL_VALID_INTENTS.length);
          |                      ^
      393 |     });
      394 |
      395 |     it('should enforce max cache size', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:392:22)

  ● IntentIngester › Cache Management › should remove oldest intents when cache is full

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      422 |
      423 |       const cached = smallIngester.getCachedIntents();
    > 424 |       expect(cached).toHaveLength(2);
          |                      ^
      425 |       expect(cached.find(i => i.hash === oldIntent.hash)).toBeUndefined();
      426 |     });
      427 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:424:22)

  ● IntentIngester › Cache Management › should get intent by hash

    expect(received).toBeDefined()

    Received: undefined

      434 |
      435 |       const intent = ingester.getIntent(VALID_INTENT_1.hash);
    > 436 |       expect(intent).toBeDefined();
          |                      ^
      437 |       expect(intent?.hash).toBe(VALID_INTENT_1.hash);
      438 |     });
      439 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:436:22)

  ● IntentIngester › Cache Management › should remove intent from cache

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      449 |
      450 |       await (ingester as any).pollForIntents();
    > 451 |       expect(ingester.getCachedIntents()).toHaveLength(1);
          |                                           ^
      452 |
      453 |       ingester.removeIntent(VALID_INTENT_1.hash);
      454 |       expect(ingester.getCachedIntents()).toHaveLength(0);

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:451:43)

  ● IntentIngester › Cache Management › should parse desires if not provided

    TypeError: Cannot read properties of undefined (reading 'desires')

      464 |
      465 |       const cached = ingester.getCachedIntents();
    > 466 |       expect(cached[0].desires.length).toBeGreaterThan(0);
          |                        ^
      467 |     });
      468 |
      469 |     it('should parse constraints if not provided', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:466:24)

  ● IntentIngester › Cache Management › should parse constraints if not provided

    TypeError: Cannot read properties of undefined (reading 'constraints')

      477 |       const cached = ingester.getCachedIntents();
      478 |       // Constraints may be empty if prose doesn't match patterns, so just check it exists
    > 479 |       expect(cached[0].constraints).toBeDefined();
          |                        ^
      480 |     });
      481 |   });
      482 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:479:24)

  ● IntentIngester › Prioritization › should prioritize intents by fee (descending)

    TypeError: Cannot read properties of undefined (reading 'hash')

      491 |
      492 |       const prioritized = ingester.getPrioritizedIntents();
    > 493 |       expect(prioritized[0].hash).toBe(HIGH_FEE_INTENT.hash);
          |                             ^
      494 |       expect(prioritized[prioritized.length - 1].hash).toBe(LOW_FEE_INTENT.hash);
      495 |     });
      496 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:493:29)

  ● IntentIngester › Prioritization › should handle intents without offeredFee

    TypeError: Cannot read properties of undefined (reading 'hash')

      506 |
      507 |       const prioritized = ingester.getPrioritizedIntents();
    > 508 |       expect(prioritized[0].hash).toBe(HIGH_FEE_INTENT.hash);
          |                             ^
      509 |     });
      510 |
      511 |     it('should return empty array if no intents cached', () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:508:29)

  ● IntentIngester › Polling Behavior › should call API with correct parameters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/intents", ObjectContaining {"params": ObjectContaining {"limit": 100, "status": "pending"}}

    Number of calls: 0

      536 |       await (ingester as any).pollForIntents();
      537 |
    > 538 |       expect(mockedAxios.get).toHaveBeenCalledWith(
          |                               ^
      539 |         `${config.chainEndpoint}/api/v1/intents`,
      540 |         expect.objectContaining({
      541 |           params: expect.objectContaining({

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:538:31)

  ● IntentIngester › Edge Cases › should handle intent with very long prose

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      597 |
      598 |       const cached = ingester.getCachedIntents();
    > 599 |       expect(cached).toHaveLength(1);
          |                      ^
      600 |     });
      601 |
      602 |     it('should handle intent with special characters in prose', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:599:22)

  ● IntentIngester › Edge Cases › should handle intent with special characters in prose

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      612 |
      613 |       const cached = ingester.getCachedIntents();
    > 614 |       expect(cached).toHaveLength(1);
          |                      ^
      615 |     });
      616 |
      617 |     it('should handle intent with unicode characters', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:614:22)

  ● IntentIngester › Edge Cases › should handle intent with unicode characters

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      627 |
      628 |       const cached = ingester.getCachedIntents();
    > 629 |       expect(cached).toHaveLength(1);
          |                      ^
      630 |     });
      631 |
      632 |     it('should handle concurrent polling calls', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:629:22)

  ● IntentIngester › Edge Cases › should handle concurrent polling calls

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      642 |       // Should still only have one cached instance
      643 |       const cached = ingester.getCachedIntents();
    > 644 |       expect(cached).toHaveLength(1);
          |                      ^
      645 |     });
      646 |   });
      647 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:644:22)

  ● IntentIngester › Burn Integration › submitIntent › should submit free intent successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/intents", ObjectContaining {"burnTransaction": null, "intent": ObjectContaining {"author": "user1"}}

    Number of calls: 0

      719 |
      720 |         // Verify intent was submitted to chain (not burn since it's free)
    > 721 |         expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                  ^
      722 |           'http://localhost:3000/api/v1/intents',
      723 |           expect.objectContaining({
      724 |             intent: expect.objectContaining({

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:721:34)

  ● IntentIngester › Burn Integration › submitIntent › should execute burn and submit paid intent

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/burns", ObjectContaining {"amount": 20, "type": "base_filing"}

    Number of calls: 0

      759 |
      760 |         // Verify burn was submitted to chain first
    > 761 |         expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                  ^
      762 |           'http://localhost:3000/api/v1/burns',
      763 |           expect.objectContaining({
      764 |             type: 'base_filing',

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:761:34)

  ● IntentIngester › Burn Integration › submitIntent › should handle burn execution failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"author": "user1", "branch": undefined, "constraints": [], "desires": ["general collaboration"], "flagCount": 0, "hash": "f756f3587e52a5c595227aa8e92d98d1a69db1458bceb8096a119a0d78b9e77c", "offeredFee": undefined, "prose": "Second submission that should fail due to burn execution failure", "status": "pending", "timestamp": 1770744152594}

      832 |         mockedAxios.post.mockRejectedValueOnce(new Error('Burn failed'));
      833 |
    > 834 |         await expect(ingesterWithBurn.submitIntent({
          |               ^
      835 |           author: 'user1',
      836 |           prose: 'Second submission that should fail due to burn execution failure',
      837 |         })).rejects.toThrow('Burn failed');

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:834:15)

  ● IntentIngester › Burn Integration › submitIntent › should handle chain submission failure

    expect(received).toBeNull()

    Received: {"author": "user1", "branch": undefined, "constraints": [], "desires": ["general collaboration"], "flagCount": 0, "hash": "100a86a77e0bb031876323e404e9223a2274f064b37ace251ed2d1f54a6d34a3", "offeredFee": undefined, "prose": "Intent submission that will fail due to chain error for testing", "status": "pending", "timestamp": 1770744152596}

      849 |         });
      850 |
    > 851 |         expect(intent).toBeNull();
          |                        ^
      852 |       });
      853 |     });
      854 |   });

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:851:24)

FAIL test/unit/settlement/SettlementManager.test.ts (7.741 s)
  SettlementManager
    Constructor
      ✓ should initialize with config (24 ms)
      ✓ should start with empty active settlements
    Settlement Creation - Permissionless Mode
      ✓ should create basic settlement from negotiation result (1 ms)
      ✓ should set acceptance deadline based on config
      ✓ should calculate facilitation fee correctly (1 ms)
      ✓ should handle intents with zero fees
      ✓ should initialize acceptance flags as false
      ✓ should initialize empty challenges array
      ✓ should not add DPoS fields in permissionless mode (1 ms)
      ✓ should not add PoA signature in permissionless mode (1 ms)
    Settlement Creation - DPoS Mode
      ✓ should add DPoS fields when provided (1 ms)
      ✓ should create stake reference with timestamp
      ✓ should not add PoA signature in DPoS mode
    Settlement Creation - PoA Mode
      ✓ should add authority signature in PoA mode
      ✓ should use PoA authority key for signature (1 ms)
      ✓ should not add DPoS fields in PoA mode
    Settlement Creation - Hybrid Mode
      ✓ should add both DPoS and PoA fields in hybrid mode (1 ms)
      ✓ should use both stake reference and authority signature (1 ms)
    Settlement Submission
      ✕ should submit settlement successfully with 200 status (3 ms)
      ✓ should submit settlement successfully with 201 status (1 ms)
      ✓ should add settlement to active settlements on successful submission (1 ms)
      ✕ should return false on non-success status (1 ms)
      ✕ should handle API errors gracefully (1 ms)
      ✕ should include signature in submission (1 ms)
    Prose Formatting
      ✕ should format settlement as prose entry (1 ms)
      ✕ should include proposed terms in prose
      ✕ should include stake reference in prose when present
      ✕ should include authority signature in prose when present (1 ms)
    Settlement Monitoring
      ✕ should check settlement status on chain (1 ms)
      ✕ should update settlement when Party A accepts (1 ms)
      ✕ should update settlement when Party B accepts
      ✕ should update challenges array (3 ms)
      ✕ should close settlement when both parties accept (1 ms)
      ✓ should mark settlement as rejected if expired without acceptance
      ✕ should close settlement even if deadline passed when both accepted (1 ms)
      ✓ should handle monitoring errors gracefully (1 ms)
    Settlement Closure
      ✕ should create payout entry when closing
      ✕ should forfeit fee if settlement has upheld challenges (1 ms)
      ✕ should proceed with closure if challenges are rejected (1 ms)
      ✓ should handle closure errors gracefully
    Active Settlement Management
      ✓ should track multiple active settlements (5 ms)
      ✕ should remove settlement from active when closed (1 ms)
      ✓ should return empty array when no active settlements
    Burn Integration
      ✕ should execute success burn when settlement closes (1 ms)
      ✕ should not execute burn when BurnManager is not provided (1 ms)
      ✕ should not fail settlement closure if burn execution fails
      ✕ should not execute burn when settlement value is zero
      ✕ should not execute burn when settlement has upheld challenges (1 ms)
      ✕ should calculate settlement value correctly from facilitation fee
    Edge Cases
      ✓ should handle very high facilitation fee percentage (1 ms)
      ✓ should handle zero facilitation fee percentage
      ✓ should handle very short acceptance window
      ✓ should handle very long acceptance window
      ✓ should handle empty proposed terms
      ✓ should handle very long reasoning trace (1 ms)

  ● SettlementManager › Settlement Submission › should submit settlement successfully with 200 status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/entries", ObjectContaining {"author": "test-public-key", "content": StringContaining "[PROPOSED SETTLEMENT]", "metadata": {"acceptanceDeadline": 1771003352515, "challenges": [], "facilitationFee": 0.025, "facilitationFeePercent": 1, "id": "test_settlement_id_0", "intentHashA": "intent_valid_001", "intentHashB": "intent_valid_002", "mediatorId": "test-public-key", "modelIntegrityHash": "hash_model_prompt_12345", "partyAAccepted": false, "partyBAccepted": false, "proposedTerms": {"deliverables": ["Modern logo design", "Vector files"], "price": 500, "timelines": "1 week"}, "reasoningTrace": "These intents align well for logo design services.", "status": "proposed", "timestamp": 1770744152515}, "signature": StringContaining "sig_", "type": "settlement"}

    Number of calls: 0

      366 |
      367 |       expect(result).toBe(true);
    > 368 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      369 |         `${config.chainEndpoint}/api/v1/entries`,
      370 |         expect.objectContaining({
      371 |           type: 'settlement',

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:368:32)

  ● SettlementManager › Settlement Submission › should return false on non-success status

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      419 |       const result = await manager.submitSettlement(settlement);
      420 |
    > 421 |       expect(result).toBe(false);
          |                      ^
      422 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      423 |     });
      424 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:421:22)

  ● SettlementManager › Settlement Submission › should handle API errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      434 |       const result = await manager.submitSettlement(settlement);
      435 |
    > 436 |       expect(result).toBe(false);
          |                      ^
      437 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      438 |     });
      439 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:436:22)

  ● SettlementManager › Settlement Submission › should include signature in submission

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"signature": StringContaining "sig_"}

    Number of calls: 0

      449 |       await manager.submitSettlement(settlement);
      450 |
    > 451 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      452 |         expect.any(String),
      453 |         expect.objectContaining({
      454 |           signature: expect.stringContaining('sig_'),

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:451:32)

  ● SettlementManager › Prose Formatting › should format settlement as prose entry

    TypeError: Cannot read properties of undefined (reading '1')

      475 |       await manager.submitSettlement(settlement);
      476 |
    > 477 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      478 |       const prose = callArgs.content;
      479 |
      480 |       expect(prose).toContain('[PROPOSED SETTLEMENT]');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:477:54)

  ● SettlementManager › Prose Formatting › should include proposed terms in prose

    TypeError: Cannot read properties of undefined (reading '1')

      498 |       await manager.submitSettlement(settlement);
      499 |
    > 500 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      501 |       const prose = callArgs.content;
      502 |
      503 |       expect(prose).toContain('Proposed Terms:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:500:54)

  ● SettlementManager › Prose Formatting › should include stake reference in prose when present

    TypeError: Cannot read properties of undefined (reading '1')

      520 |       await manager.submitSettlement(settlement);
      521 |
    > 522 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      523 |       const prose = callArgs.content;
      524 |
      525 |       expect(prose).toContain('Stake Reference:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:522:54)

  ● SettlementManager › Prose Formatting › should include authority signature in prose when present

    TypeError: Cannot read properties of undefined (reading '1')

      541 |       await manager.submitSettlement(settlement);
      542 |
    > 543 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      544 |       const prose = callArgs.content;
      545 |
      546 |       expect(prose).toContain('Authority Signature:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:543:54)

  ● SettlementManager › Settlement Monitoring › should check settlement status on chain

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/settlements/test_settlement_id_0/status"

    Number of calls: 0

      575 |       await manager.monitorSettlements();
      576 |
    > 577 |       expect(mockedAxios.get).toHaveBeenCalledWith(
          |                               ^
      578 |         `${config.chainEndpoint}/api/v1/settlements/${settlement.id}/status`
      579 |       );
      580 |     });

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:577:31)

  ● SettlementManager › Settlement Monitoring › should update settlement when Party A accepts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      601 |
      602 |       const active = manager.getActiveSettlements();
    > 603 |       expect(active[0].partyAAccepted).toBe(true);
          |                                        ^
      604 |       expect(active[0].partyBAccepted).toBe(false);
      605 |     });
      606 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:603:40)

  ● SettlementManager › Settlement Monitoring › should update settlement when Party B accepts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      627 |       const active = manager.getActiveSettlements();
      628 |       expect(active[0].partyAAccepted).toBe(false);
    > 629 |       expect(active[0].partyBAccepted).toBe(true);
          |                                        ^
      630 |     });
      631 |
      632 |     it('should update challenges array', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:629:40)

  ● SettlementManager › Settlement Monitoring › should update challenges array

    expect(received).toEqual(expected) // deep equality

    - Expected  - 11
    + Received  +  1

    - Array [
    -   Object {
    -     "challengerId": "challenger_456",
    -     "contradictionProof": "proof_pending",
    -     "id": "challenge_1",
    -     "paraphraseEvidence": "evidence_pending",
    -     "settlementId": "test_settlement_id_0",
    -     "status": "pending",
    -     "timestamp": 1770744152574,
    -   },
    - ]
    + Array []

      663 |
      664 |       const active = manager.getActiveSettlements();
    > 665 |       expect(active[0].challenges).toEqual(mockChallenges);
          |                                    ^
      666 |     });
      667 |
      668 |     it('should close settlement when both parties accept', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:665:36)

  ● SettlementManager › Settlement Monitoring › should close settlement when both parties accept

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      686 |       await manager.monitorSettlements();
      687 |
    > 688 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      689 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      690 |     });
      691 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:688:32)

  ● SettlementManager › Settlement Monitoring › should close settlement even if deadline passed when both accepted

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      723 |       await manager.monitorSettlements();
      724 |
    > 725 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      726 |     });
      727 |
      728 |     it('should handle monitoring errors gracefully', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:725:32)

  ● SettlementManager › Settlement Closure › should create payout entry when closing

    TypeError: Cannot read properties of undefined (reading '1')

      770 |
      771 |       const payoutCall = mockedAxios.post.mock.calls[1];
    > 772 |       const payoutData = payoutCall[1] as any;
          |                                    ^
      773 |       expect(payoutData.type).toBe('payout');
      774 |       expect(payoutData.metadata.settlementId).toBe(settlement.id);
      775 |       expect(payoutData.metadata.amount).toBe(settlement.facilitationFee);

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:772:36)

  ● SettlementManager › Settlement Closure › should forfeit fee if settlement has upheld challenges

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      808 |
      809 |       // Should not create payout entry
    > 810 |       expect(mockedAxios.post).toHaveBeenCalledTimes(1); // Only submit, no payout
          |                                ^
      811 |     });
      812 |
      813 |     it('should proceed with closure if challenges are rejected', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:810:32)

  ● SettlementManager › Settlement Closure › should proceed with closure if challenges are rejected

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      839 |       await manager.monitorSettlements();
      840 |
    > 841 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      842 |     });
      843 |
      844 |     it('should handle closure errors gracefully', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:841:32)

  ● SettlementManager › Active Settlement Management › should remove settlement from active when closed

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"acceptanceDeadline": 1771003352587, "challenges": [], "facilitationFee": 0.025, "facilitationFeePercent": 1, "id": "test_settlement_id_0", "intentHashA": "intent_valid_001", "intentHashB": "intent_valid_002", "mediatorId": "test-public-key", "modelIntegrityHash": "hash_model_prompt_12345", "partyAAccepted": false, "partyBAccepted": false, "proposedTerms": {"deliverables": ["Modern logo design", "Vector files"], "price": 500, "timelines": "1 week"}, "reasoningTrace": "These intents align well for logo design services.", "status": "proposed", "timestamp": 1770744152587}]

      917 |       await manager.monitorSettlements();
      918 |
    > 919 |       expect(manager.getActiveSettlements()).toHaveLength(0);
          |                                              ^
      920 |     });
      921 |
      922 |     it('should return empty array when no active settlements', () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:919:46)

  ● SettlementManager › Burn Integration › should execute success burn when settlement closes

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      976 |
      977 |       // Should have submit + burn + payout calls
    > 978 |       expect(mockedAxios.post).toHaveBeenCalledTimes(3);
          |                                ^
      979 |
      980 |       // Verify burn was executed
      981 |       const burnCall = mockedAxios.post.mock.calls[1];

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:978:32)

  ● SettlementManager › Burn Integration › should not execute burn when BurnManager is not provided

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1009 |
      1010 |       // Should only have submit + payout (no burn)
    > 1011 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2);
           |                                ^
      1012 |       const calls = mockedAxios.post.mock.calls;
      1013 |       expect(calls[0][0]).toContain('/entries'); // Submit
      1014 |       expect(calls[1][0]).toContain('/entries'); // Payout

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1011:32)

  ● SettlementManager › Burn Integration › should not fail settlement closure if burn execution fails

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      1042 |
      1043 |       // Settlement should still close (payout should be attempted)
    > 1044 |       expect(mockedAxios.post).toHaveBeenCalledTimes(3);
           |                                ^
      1045 |     });
      1046 |
      1047 |     it('should not execute burn when settlement value is zero', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1044:32)

  ● SettlementManager › Burn Integration › should not execute burn when settlement value is zero

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1069 |
      1070 |       // Should only have submit + payout (no burn for zero value)
    > 1071 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2);
           |                                ^
      1072 |     });
      1073 |
      1074 |     it('should not execute burn when settlement has upheld challenges', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1071:32)

  ● SettlementManager › Burn Integration › should not execute burn when settlement has upheld challenges

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      1104 |
      1105 |       // Should only have submit (no burn, no payout)
    > 1106 |       expect(mockedAxios.post).toHaveBeenCalledTimes(1);
           |                                ^
      1107 |     });
      1108 |
      1109 |     it('should calculate settlement value correctly from facilitation fee', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1106:32)

  ● SettlementManager › Burn Integration › should calculate settlement value correctly from facilitation fee

    TypeError: Cannot read properties of undefined (reading '1')

      1138 |       // Verify burn calculation
      1139 |       const burnCall = mockedAxios.post.mock.calls[1];
    > 1140 |       const burnData = burnCall[1] as any;
           |                                ^
      1141 |       const totalFees = (VALID_INTENT_1.offeredFee || 0) + (VALID_INTENT_2.offeredFee || 0);
      1142 |       const expectedBurnAmount = totalFees * (config.successBurnPercentage || 0.0005);
      1143 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1140:32)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"BMnoji8pyfDFxXUlo1Shn","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"O8D8V7_MEhY-oGE63l2ao","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"BMnoji8pyfDFxXUlo1Shn","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"BMnoji8pyfDFxXUlo1Shn","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"4KkPQ76Y0lDota6_2gliS","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"BMnoji8pyfDFxXUlo1Shn","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153224,"service":"mediator-node","settlementId":"BMnoji8pyfDFxXUlo1Shn","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"7NxwvViQNAVNaHBLsOzHN","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"diXGb8Pvpo-HZubWmDLs1","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"7NxwvViQNAVNaHBLsOzHN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"7NxwvViQNAVNaHBLsOzHN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"B993fQTaBXP1scM0eFpBU","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"7NxwvViQNAVNaHBLsOzHN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153250,"service":"mediator-node","settlementId":"7NxwvViQNAVNaHBLsOzHN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"rOWU1Je6NHah9x9NXZR1g","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"rW4QZAp4OJE5f647AO_4I","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"rOWU1Je6NHah9x9NXZR1g","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"rOWU1Je6NHah9x9NXZR1g","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"-oJ10icdD84ULDhyvzWWP","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"rOWU1Je6NHah9x9NXZR1g","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153271,"service":"mediator-node","settlementId":"rOWU1Je6NHah9x9NXZR1g","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"eGXN1ulgGsrrZixZ41EeM","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"Wel16tfcA1W9VbYr0UKLB","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"eGXN1ulgGsrrZixZ41EeM","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"eGXN1ulgGsrrZixZ41EeM","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"xOUPKNkmI0rEP9GPcoqx6","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"eGXN1ulgGsrrZixZ41EeM","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153288,"service":"mediator-node","settlementId":"eGXN1ulgGsrrZixZ41EeM","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"aJKJbMNkSQCIzdxvJ2sF1","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"NxrBBSvkvzYjD6f8B0ztX","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"aJKJbMNkSQCIzdxvJ2sF1","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"aJKJbMNkSQCIzdxvJ2sF1","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"yFUirS7GF43dI3yQGuZss","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"aJKJbMNkSQCIzdxvJ2sF1","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153307,"service":"mediator-node","settlementId":"aJKJbMNkSQCIzdxvJ2sF1","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"soaDT1CtXlgiMp5WtyNJY","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"it4p-KNBPdksSul2V_oR1","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"soaDT1CtXlgiMp5WtyNJY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"soaDT1CtXlgiMp5WtyNJY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"xw-EOSeoQNi9wSUtjueDR","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"soaDT1CtXlgiMp5WtyNJY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153325,"service":"mediator-node","settlementId":"soaDT1CtXlgiMp5WtyNJY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"X1uU36WOFgwceiDRL6SzF","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"mSRofuYjG-5XzruWrVmSw","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"iZxJG9k99EPzvTEJ82I3I","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"mSRofuYjG-5XzruWrVmSw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"mSRofuYjG-5XzruWrVmSw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"feDwrTkfQWMxgyElF1Wml","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"Bp695z7dQMsABjIf8gJk4","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"mSRofuYjG-5XzruWrVmSw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"iqD-YNPufr7l0Eh3h3QP0","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"feDwrTkfQWMxgyElF1Wml","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"feDwrTkfQWMxgyElF1Wml","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153341,"service":"mediator-node","settlementId":"mSRofuYjG-5XzruWrVmSw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"VK3RFAWisp_m_HQ7_wjyh","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"feDwrTkfQWMxgyElF1Wml","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153351,"service":"mediator-node","settlementId":"feDwrTkfQWMxgyElF1Wml","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"jMXZGR_uHtTZ22GHnN-9A","timestamp":"2026-02-10 17:22:33","validationErrors":0}
FAIL test/integration/AlignmentCycle.test.ts (8.464 s)
  Integration: Alignment Cycle
    Full Cycle Execution
      ✕ should execute complete alignment cycle from start to finish (24 ms)
      ✕ should handle intent discovery and caching (1 ms)
      ✕ should generate embeddings for all intents (1 ms)
      ✕ should find alignment candidates with high similarity (1 ms)
      ✕ should submit settlement after successful negotiation (1 ms)
    Multi-Candidate Processing
      ✕ should process top 3 candidates per cycle (1 ms)
      ✕ should handle no alignment candidates gracefully
      ✕ should prioritize candidates by fee and similarity
    Error Recovery
      ✕ should continue after LLM API failure (1 ms)
      ✕ should handle intent fetching errors gracefully (1 ms)
      ✕ should handle settlement submission failures (1 ms)
      ✕ should recover from vector database errors (1 ms)
    Resource Cleanup
      ✕ should cleanup embedding cache for removed intents (1 ms)
      ✕ should clear intervals on stop (1 ms)
      ✕ should save vector database on stop (1 ms)
      ✕ should handle stop before start gracefully
      ✕ should handle multiple stop calls gracefully
    Cycle Timing and Intervals
      ✕ should run alignment cycle every 30 seconds
      ✕ should poll for intents every 10 seconds (1 ms)
      ✕ should monitor settlements every 60 seconds (1 ms)
    Settlement Submission Flow
      ✕ should create settlement with correct structure (1 ms)
      ✕ should not submit if negotiation fails (1 ms)
    Status and Monitoring
      ✕ should provide accurate status information (1 ms)
      ✕ should update status after intents are cached (1 ms)

  ● Integration: Alignment Cycle › Full Cycle Execution › should execute complete alignment cycle from start to finish

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should handle intent discovery and caching

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should generate embeddings for all intents

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should find alignment candidates with high similarity

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should submit settlement after successful negotiation

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should process top 3 candidates per cycle

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should handle no alignment candidates gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should prioritize candidates by fee and similarity

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should continue after LLM API failure

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should handle intent fetching errors gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should handle settlement submission failures

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should recover from vector database errors

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should cleanup embedding cache for removed intents

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should clear intervals on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should save vector database on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should handle stop before start gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should handle multiple stop calls gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should run alignment cycle every 30 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should poll for intents every 10 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should monitor settlements every 60 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Settlement Submission Flow › should create settlement with correct structure

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Settlement Submission Flow › should not submit if negotiation fails

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Status and Monitoring › should provide accurate status information

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Status and Monitoring › should update status after intents are cached

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"1uJPPCDUKqUIRjWrrnsXs","name":"Duplicate Name","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"BPana_kSubzZAKdgO_Oo1","name":"Persistent Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"review_board"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":2,"service":"mediator-node","settlementId":"tPCoNUKvUVq0PbLf-99S4","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"fRs-IovBrF6StpqFy4h20","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement stage completed {"completedBy":"party-1","service":"mediator-node","settlementId":"tPCoNUKvUVq0PbLf-99S4","stageNumber":1,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"5ElEm3zfMdp8rJuipC1YY","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"fRs-IovBrF6StpqFy4h20","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"fRs-IovBrF6StpqFy4h20","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"UZvNVXiCPt0Dsc0cacJZB","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"fRs-IovBrF6StpqFy4h20","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement stage completed {"completedBy":"party-1","service":"mediator-node","settlementId":"tPCoNUKvUVq0PbLf-99S4","stageNumber":2,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153372,"service":"mediator-node","settlementId":"fRs-IovBrF6StpqFy4h20","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"FL8XKZ5F9mWoHaOXgf03R","name":"Authority 1","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation authority registered {"authorityId":"KIJ-V8R9YdnJjef5qGzQ2","name":"Authority 2","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"y4oW3uCQn7JtYP0TNleXo","name":"Arbitrator 1","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"GNBWw2izKPyHM1G1ZEPSf","name":"Arbitrator 2","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation authority registered {"authorityId":"nDyMVhyacC2MR6DlRep5-","name":"DAO 1","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"GCIXj9OI08HJdxSTjUlCW","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"371E2NcweIqFwRHFuqi8a","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"GCIXj9OI08HJdxSTjUlCW","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"GCIXj9OI08HJdxSTjUlCW","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"rsJbrOJVkOzwMHjuRexME","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"GCIXj9OI08HJdxSTjUlCW","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153391,"service":"mediator-node","settlementId":"GCIXj9OI08HJdxSTjUlCW","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"s9jhRs5pbzAKTvmLNSy-e","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[33mwarn[39m: Settlement contested {"disputeId":"dispute-123","service":"mediator-node","settlementId":"s9jhRs5pbzAKTvmLNSy-e","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"6A5RDG0nhG6KgPT3_tTTs","name":"Original Name","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"court"}
[32minfo[39m: Authority updated {"authorityId":"6A5RDG0nhG6KgPT3_tTTs","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"dxamL72nDTO8RuF1nbpA8","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Escalation authority registered {"authorityId":"NZ3daCZZqc66IbdGVrGXd","name":"To Be Removed","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"custom"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"WOq-4Q_oxQ-GyrgY4Jw3D","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"dxamL72nDTO8RuF1nbpA8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"dxamL72nDTO8RuF1nbpA8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"9Iynr4B0jV8Ll_M_CwWJ-","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"9Iynr4B0jV8Ll_M_CwWJ-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Authority removed {"authorityId":"NZ3daCZZqc66IbdGVrGXd","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"dr7dqV9dqLw5TPot-tMNS","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"dxamL72nDTO8RuF1nbpA8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153411,"service":"mediator-node","settlementId":"dxamL72nDTO8RuF1nbpA8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"6RcaShHSLCWmXBze0ayqL","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"9Iynr4B0jV8Ll_M_CwWJ-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153412,"service":"mediator-node","settlementId":"9Iynr4B0jV8Ll_M_CwWJ-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement reversed {"reversalSettlementId":"reversal-settlement-1","service":"mediator-node","settlementId":"9Iynr4B0jV8Ll_M_CwWJ-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"PgWC1uqddNZxulAhWeLJ2","name":"Active Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-123","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Active Authority","disputeId":"dispute-123","escalationId":"PRK_C_xOdYzb6pgGLo_4b","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[33mwarn[39m: Cannot remove authority with existing escalations {"authorityId":"PgWC1uqddNZxulAhWeLJ2","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"P0AewdA7BAWo7QEHGOlzi","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test Arbitrator","disputeId":"dispute-1","escalationId":"aSIPTV5JJljYg6qsKswnP","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"g-Z-vTROr2Tt3E66xORDg","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"i25mycgusGE_5IlyZClUg","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"_xy5r8vg6b6-hbY-bPC5E","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"g-Z-vTROr2Tt3E66xORDg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"g-Z-vTROr2Tt3E66xORDg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"vgukc_VWPC1qRMADfpnz9","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"i25mycgusGE_5IlyZClUg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"i25mycgusGE_5IlyZClUg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"W-WGXZc1nSaCzVFvqU63Z","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"g-Z-vTROr2Tt3E66xORDg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153435,"service":"mediator-node","settlementId":"g-Z-vTROr2Tt3E66xORDg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"NE7v8f1zD9dPuhYO6VXSz","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"i25mycgusGE_5IlyZClUg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153436,"service":"mediator-node","settlementId":"i25mycgusGE_5IlyZClUg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"K9WoN6h8pAnFE3_48Nx9G","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"F8UXl_U2AifSg9Hpu1OAu","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"dY0QW7q3Q5yiAyRRiYmeU","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"6iCL0eLKv5LecVHUdcROD","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"Lp1WT4bDu7zlgm5pT-6yN","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"IabvB7ZyZOpc6Pzv3psk1","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"Zj2t6Ab_bDte3pbKfxUt9","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"cthu9AElpyjFyxka7hsdN","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Escalation initiated {"authority":"Test Arbitrator","disputeId":"dispute-1","escalationId":"pki-Nwz5jN4MUcDQR8zjb","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"cfMDLimzxkYTNSz1R3Anj","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"cthu9AElpyjFyxka7hsdN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"cthu9AElpyjFyxka7hsdN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"Z-LMSF_oAR0H3kLcXDmPC","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"1eOhz9hDMIAfVHt0SIQjM","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"cthu9AElpyjFyxka7hsdN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153458,"service":"mediator-node","settlementId":"cthu9AElpyjFyxka7hsdN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"sy2Q-7-SxSuM2qQTRgzsS","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"ky7DYWy6-OEhkEkBo0OwD","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Challenge submitted successfully {"challengeId":"sYgqjK5Ql2L-3emVTB-zT","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"iYHC2sweoMiazfZecN7jf","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"ky7DYWy6-OEhkEkBo0OwD","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"ky7DYWy6-OEhkEkBo0OwD","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"uWEh7Q_NSTAEQk7rl2F33","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"ky7DYWy6-OEhkEkBo0OwD","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"eMHHJJvenC7zBNvHpA_re","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153464,"service":"mediator-node","settlementId":"ky7DYWy6-OEhkEkBo0OwD","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"GnUPDv2GimsvDAOy70LSh","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-2","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"PipgsjYnHHcqww-t493Tn","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test Arbitrator","disputeId":"dispute-2","escalationId":"7x6o5eumFjqR6bARjjH2Y","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"sx2VSwGejjPArZMWHsCLw","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"GJQjHVlyPwbBHSRSMwAod","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"BMUvR4F0kOLia2YIHdfS3","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"rzRwKPXz1Z-GiPmWTvbtu","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"k78_9oxx_-mhvRr2vLebR","service":"mediator-node","settlementId":"settlement-2","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"TK8Ad70Ikx4wTlsBde2rD","service":"mediator-node","settlementId":"settlement-3","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"AnYje4m8H3SgvhyVtWtZc","service":"mediator-node","settlementId":"settlement-123","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Challenge submitted successfully {"challengeId":"Gb6Eu9qeN-87ypusOMtVk","service":"mediator-node","settlementId":"settlement-2","targetMediator":"other-mediator","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"4J1RZ3Cu88IZXanU_bXgZ","name":"Test Arbitrator","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-3","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test Arbitrator","disputeId":"dispute-3","escalationId":"ZGU4OtrdR0gGtIdJ4-fWe","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"scLS29fnGcdft1e1B2jmK","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"zWU8PGsSAQvzPBIgaQ0oc","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"scLS29fnGcdft1e1B2jmK","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"scLS29fnGcdft1e1B2jmK","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"-6L6EMbjqTbV5RdYH5WUF","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"scLS29fnGcdft1e1B2jmK","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153485,"service":"mediator-node","settlementId":"scLS29fnGcdft1e1B2jmK","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"05GC2opS3PuhtQQ8kHgu1","name":"HTTP Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation initiated {"authority":"HTTP Authority","disputeId":"dispute-submit-1","escalationId":"xa9Pm0xvodO_0XNOFVwQ5","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-123","escalationId":"xa9Pm0xvodO_0XNOFVwQ5","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"SiKO-ZviuKJ5D7v1C1pWP","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"oIbASas3nFKltgACjJekR","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"SiKO-ZviuKJ5D7v1C1pWP","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"SiKO-ZviuKJ5D7v1C1pWP","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"_Jddtc20P1GHw5CnuL8TH","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"SiKO-ZviuKJ5D7v1C1pWP","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153493,"service":"mediator-node","settlementId":"SiKO-ZviuKJ5D7v1C1pWP","timestamp":"2026-02-10 17:22:33"}
FAIL test/unit/challenge/ChallengeManager.test.ts
  ChallengeManager
    submitChallenge
      ✕ should submit challenge successfully with 200 status (8 ms)
      ✓ should submit challenge successfully with 201 status (1 ms)
      ✕ should handle non-success status codes (2 ms)
      ✕ should handle API errors gracefully (2 ms)
      ✓ should track submitted challenges (2 ms)
      ✕ should format challenge prose correctly (1 ms)
    monitorChallenges
      ✕ should update challenge status when upheld (3 ms)
      ✕ should update reputation when challenge rejected (2 ms)
      ✓ should handle API errors during monitoring (1 ms)
      ✓ should not update reputation when no ReputationTracker provided (3 ms)
    getChallengesForSettlement
      ✓ should return challenges for specific settlement (1 ms)
      ✓ should return empty array for settlement with no challenges
    getChallengeStats
      ✓ should return correct statistics (1 ms)
      ✓ should calculate success rate correctly (1 ms)
      ✓ should handle empty challenge list (10 ms)

  ● ChallengeManager › submitChallenge › should submit challenge successfully with 200 status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://test-chain.example.com/api/v1/challenges", ObjectContaining {"challenge": ObjectContaining {"challengerId": "test-public-key", "contradictionProof": "The settlement violates the budget constraint", "paraphraseEvidence": "Evidence of violation", "settlementId": "settlement-123"}, "prose": StringContaining "[CHALLENGE SUBMISSION]", "signature": Any<String>}, Any<Object>

    Number of calls: 0

      110 |
      111 |       // Verify the API call
    > 112 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      113 |         `${mockConfig.chainEndpoint}/api/v1/challenges`,
      114 |         expect.objectContaining({
      115 |           challenge: expect.objectContaining({

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:112:32)

  ● ChallengeManager › submitChallenge › should handle non-success status codes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      152 |       const result = await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      153 |
    > 154 |       expect(result.success).toBe(false);
          |                              ^
      155 |       expect(result.error).toContain('HTTP 400');
      156 |       expect(result.challengeId).toBeUndefined();
      157 |     });

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:154:30)

  ● ChallengeManager › submitChallenge › should handle API errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      162 |       const result = await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      163 |
    > 164 |       expect(result.success).toBe(false);
          |                              ^
      165 |       expect(result.error).toBe('Network error');
      166 |       expect(result.challengeId).toBeUndefined();
      167 |     });

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:164:30)

  ● ChallengeManager › submitChallenge › should format challenge prose correctly

    TypeError: Cannot read properties of undefined (reading '1')

      196 |       await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      197 |
    > 198 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      199 |       const prose = callArgs.prose;
      200 |
      201 |       expect(prose).toContain('[CHALLENGE SUBMISSION]');

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:198:54)

  ● ChallengeManager › monitorChallenges › should update challenge status when upheld

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      246 |       // Challenge should be removed from active tracking after resolution
      247 |       const updatedChallenges = challengeManager.getSubmittedChallenges();
    > 248 |       expect(updatedChallenges.length).toBe(0);
          |                                        ^
      249 |     });
      250 |
      251 |     it('should update reputation when challenge rejected', async () => {

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:248:40)

  ● ChallengeManager › monitorChallenges › should update reputation when challenge rejected

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      268 |       await challengeManager.monitorChallenges();
      269 |
    > 270 |       expect(mockReputationTracker.recordFailedChallenge).toHaveBeenCalled();
          |                                                           ^
      271 |
      272 |       // Challenge should be removed after resolution
      273 |       const updatedChallenges = challengeManager.getSubmittedChallenges();

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:270:59)

[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"lTnbg62CxjRCK0CdL4Vhk","name":"HTTP Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"HTTP Authority","disputeId":"dispute-submit-1","escalationId":"7Ir6Q0oGhdtDLpsqxnlcO","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[33mwarn[39m: Failed to submit escalation to authority endpoint {"error":"Error: Network error","escalationId":"7Ir6Q0oGhdtDLpsqxnlcO","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"escalationId":"7Ir6Q0oGhdtDLpsqxnlcO","service":"mediator-node","submitted":false,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"s1v9ZUEjrhuReYmDXkG4s","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"VERG3svwCHO_uhE3FqK82","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"s1v9ZUEjrhuReYmDXkG4s","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"s1v9ZUEjrhuReYmDXkG4s","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"ebYTRX2uBBL4rcMXHeu4I","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"s1v9ZUEjrhuReYmDXkG4s","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153511,"service":"mediator-node","settlementId":"s1v9ZUEjrhuReYmDXkG4s","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"UZ3f4JHn2wkyo6IjNHczu","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"UZ3f4JHn2wkyo6IjNHczu","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"955fZk4tF4DnLQNnzIjBh","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"UZ3f4JHn2wkyo6IjNHczu","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153515,"service":"mediator-node","settlementId":"UZ3f4JHn2wkyo6IjNHczu","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"QoRf55d7B57BfSFitgZFJ","name":"HTTP Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"HTTP Authority","disputeId":"dispute-submit-1","escalationId":"0yuXgsCX1GJqaxrY675EJ","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"rYzA2ib_FynVqvgKqJWZg","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"Fb1Pz-7CQ5kwfEr7rB94T","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"rYzA2ib_FynVqvgKqJWZg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"rYzA2ib_FynVqvgKqJWZg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"MULduCQSr4W7KF0PaQBhE","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"rYzA2ib_FynVqvgKqJWZg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"2YI2PZDdKIK2I9VdpFPhT","name":"HTTP Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153526,"service":"mediator-node","settlementId":"rYzA2ib_FynVqvgKqJWZg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"HTTP Authority","disputeId":"dispute-submit-1","escalationId":"OICVF6tO9FKCWeg60TepQ","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-1","escalationId":"OICVF6tO9FKCWeg60TepQ","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"4Q_2p9pdQFPW79pKrNNoa","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"itdKbFyXMsVY--CaT7WU-","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"4Q_2p9pdQFPW79pKrNNoa","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"4Q_2p9pdQFPW79pKrNNoa","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"bhXcgpJry6u5Txbn7k2lL","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"4Q_2p9pdQFPW79pKrNNoa","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153536,"service":"mediator-node","settlementId":"4Q_2p9pdQFPW79pKrNNoa","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"T8N9MXAGOIkpxWiPgwNWH","name":"HTTP Authority","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation initiated {"authority":"HTTP Authority","disputeId":"dispute-submit-1","escalationId":"-L5AYWrO0Ch-FYoH-fV8j","scopeIssues":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-456","escalationId":"-L5AYWrO0Ch-FYoH-fV8j","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"_yOfM0UXZPNlOXVCkpq7e","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"yJ5nvZ7iUeCsPr5b8sXhd","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"_yOfM0UXZPNlOXVCkpq7e","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"_yOfM0UXZPNlOXVCkpq7e","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"2V-vgq3YRLc5EU2dgW9q9","name":"Test DAO","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-100","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"3GsuMtraaN5AtOAWur6DI","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"_yOfM0UXZPNlOXVCkpq7e","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test DAO","disputeId":"dispute-100","escalationId":"EXQmkyKZTv7ghboq8dhAK","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-200","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153555,"service":"mediator-node","settlementId":"_yOfM0UXZPNlOXVCkpq7e","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test DAO","disputeId":"dispute-200","escalationId":"tPh20F2fi9PZn4XbgkHpw","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"DFO5ordjdAhDEsNeNcLk-","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"DwYihC7vln6X8Q3ckENDF","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"DFO5ordjdAhDEsNeNcLk-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"DFO5ordjdAhDEsNeNcLk-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"0LcgY92k5bWko3MN6MmlC","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"DFO5ordjdAhDEsNeNcLk-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153561,"service":"mediator-node","settlementId":"DFO5ordjdAhDEsNeNcLk-","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"dNNXWM3RZ91fXuvIywIK9","name":"Test DAO","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"tJQR0Ra4drmWURyA1QnXy","name":"Test DAO","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-sub-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Test DAO","disputeId":"dispute-sub-1","escalationId":"9Si5zgNfgUn22iIxCUvsE","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-xyz","escalationId":"9Si5zgNfgUn22iIxCUvsE","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"HPSYv9YrhMDagtAjB5JWN","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"HPSYv9YrhMDagtAjB5JWN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"eztSjLXjF_2Dba747NupR","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"HPSYv9YrhMDagtAjB5JWN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153581,"service":"mediator-node","settlementId":"HPSYv9YrhMDagtAjB5JWN","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"IaDokfVGYogUkHzX5t-Xw","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"WSzkIsDK3Ed3gpZRcYgSr","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"IaDokfVGYogUkHzX5t-Xw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"IaDokfVGYogUkHzX5t-Xw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"_b-jTQlM3gDOSdlME8VOf","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"IaDokfVGYogUkHzX5t-Xw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153587,"service":"mediator-node","settlementId":"IaDokfVGYogUkHzX5t-Xw","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"G8-jljReQos1g19GOimNi","name":"Arbitrator 1","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation authority registered {"authorityId":"UZHuI8284aXEGaVTogqGz","name":"Arbitrator 2","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[32minfo[39m: Escalation authority registered {"authorityId":"8Kjn62gVY-UrKqzGHit-o","name":"DAO 1","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"dao"}
[32minfo[39m: Escalation initiated {"authority":"Arbitrator 1","disputeId":"dispute-1","escalationId":"d9hFSThA44gTDrODlUxiO","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-2","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"DAO 1","disputeId":"dispute-2","escalationId":"o4KZvBT1Y2dAarvxqNViX","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-1","escalationId":"o4KZvBT1Y2dAarvxqNViX","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"FWlXXj49R7-xqNDxWMaCo","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"FWlXXj49R7-xqNDxWMaCo","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"LpiliI6AvluCJhGehndWQ","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"FWlXXj49R7-xqNDxWMaCo","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153605,"service":"mediator-node","settlementId":"FWlXXj49R7-xqNDxWMaCo","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"OxYxxWKXbRyh3aZ0yj7KC","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Escalation authority registered {"authorityId":"1It4Z6BL_V0qEvXsKPrcp","name":"Persistent Court","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"court"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-persist-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"l1Ur5DEUOjq231_vwvN1e","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"OxYxxWKXbRyh3aZ0yj7KC","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"OxYxxWKXbRyh3aZ0yj7KC","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Persistent Court","disputeId":"dispute-persist-1","escalationId":"4RR4Y3cJhcoWxfWfOdoch","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"8LTOOHNuSyWfUJLL0HmNB","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"OxYxxWKXbRyh3aZ0yj7KC","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153608,"service":"mediator-node","settlementId":"OxYxxWKXbRyh3aZ0yj7KC","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Authorities loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":1,"dataPath":"./test-data/escalations","escalationsLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation authority registered {"authorityId":"9iEcf4U2KI3BYcfa32aMh","name":"Persistent Board","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"review_board"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Authorities loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":1,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"apGw5jnJPdadNHTIpxJRz","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Escalation authority registered {"authorityId":"o0YUC4n5l2WWaSAa4qZ19","name":"Submission Test","service":"mediator-node","timestamp":"2026-02-10 17:22:33","type":"arbitrator"}
[33mwarn[39m: Human escalation required but no signature provided {"disputeId":"dispute-sub-persist","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"Jddpvv35DKopMbqdIusUk","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"Jddpvv35DKopMbqdIusUk","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"mEKHS8mDyfxBLCGeXa2Gg","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"apGw5jnJPdadNHTIpxJRz","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"apGw5jnJPdadNHTIpxJRz","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"xXxfX7g8i8MYXHwC5hkaW","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"Jddpvv35DKopMbqdIusUk","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation initiated {"authority":"Submission Test","disputeId":"dispute-sub-persist","escalationId":"fxL44vPoiFZq9THWaWYVZ","scopeIssues":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"p8NrkXRd-cccul_FgulkG","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"apGw5jnJPdadNHTIpxJRz","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153632,"service":"mediator-node","settlementId":"Jddpvv35DKopMbqdIusUk","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153633,"service":"mediator-node","settlementId":"apGw5jnJPdadNHTIpxJRz","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalation submission attempted {"confirmationId":"conf-persist","escalationId":"fxL44vPoiFZq9THWaWYVZ","service":"mediator-node","submitted":true,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Escalations loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Authorities loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":1,"dataPath":"./test-data/escalations","escalationsLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
PASS test/dispute/EscalationManager.test.ts
  EscalationManager
    Authority Registration
      ✓ should register a new authority (13 ms)
      ✓ should fail to register authority without name (17 ms)
      ✓ should prevent duplicate authority names (12 ms)
      ✓ should persist authority to disk (8 ms)
    Authority Management
      ✓ should get all authorities (10 ms)
      ✓ should get authorities by type (11 ms)
      ✓ should update authority information (10 ms)
      ✓ should fail to update non-existent authority (2 ms)
      ✓ should remove authority without escalations (6 ms)
      ✓ should not remove authority with existing escalations (12 ms)
    Escalation Initiation
      ✓ should initiate an escalation (9 ms)
      ✓ should fail with empty scope of issues (7 ms)
      ✓ should fail with non-existent authority (12 ms)
      ✓ should prevent duplicate escalations to same authority (9 ms)
      ✓ should set humanAuthorship to false without signature (10 ms)
      ✓ should persist escalation to disk (10 ms)
    Escalation Submission
      ✓ should successfully submit escalation via HTTP (17 ms)
      ✓ should handle HTTP submission failure (12 ms)
      ✓ should fail to submit non-existent escalation (12 ms)
      ✓ should prevent duplicate submissions (14 ms)
      ✓ should persist submission result to disk (14 ms)
    Escalation Retrieval
      ✓ should get escalations for a dispute (10 ms)
      ✓ should return empty array for dispute with no escalations (9 ms)
      ✓ should get submission result (13 ms)
    Statistics
      ✓ should return correct statistics (20 ms)
    Persistence and Loading
      ✓ should load existing escalations on initialization (12 ms)
      ✓ should load existing authorities on initialization (11 ms)
      ✓ should load existing submissions on initialization (22 ms)

[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"5_fY4OAdBqYvLBY7Nc0rE","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"7RZanEwltjSGg4D0eMs0y","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"5_fY4OAdBqYvLBY7Nc0rE","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"5_fY4OAdBqYvLBY7Nc0rE","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"2AHv62Y9Iv5tIfivqzpWd","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"5_fY4OAdBqYvLBY7Nc0rE","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153656,"service":"mediator-node","settlementId":"5_fY4OAdBqYvLBY7Nc0rE","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"W36jsJreJdpdeHEGoI6Kg","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"T1oUYqEyCdJp5828gNQdb","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"W36jsJreJdpdeHEGoI6Kg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"W36jsJreJdpdeHEGoI6Kg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"RPNjl9k365nKW9TkTrLkw","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"W36jsJreJdpdeHEGoI6Kg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153661,"service":"mediator-node","settlementId":"W36jsJreJdpdeHEGoI6Kg","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"cYUjZQ8JJulu_5A8idZk3","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"TJFKqPSw-L627UccYCUUu","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"cYUjZQ8JJulu_5A8idZk3","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"cYUjZQ8JJulu_5A8idZk3","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"mXugxV4BOAlVG4Tpq5kef","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"cYUjZQ8JJulu_5A8idZk3","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153678,"service":"mediator-node","settlementId":"cYUjZQ8JJulu_5A8idZk3","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"esaZKzDYB4pkRa7f9jEM-","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"7QG3iA8WickiYRptwH2sO","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
    
    ========================================

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:649:13)

  console.log
    SIMULATION RESULTS SUMMARY

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:650:13)

  console.log
    ========================================

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:651:13)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
  console.log
    Total Iterations: 100

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:652:13)

  console.log
    Passed: 0 (0.0%)

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:653:13)

  console.log
    Failed: 100 (100.0%)

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:654:13)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"bgTCScAgebZ1sS5cHLiSj","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
    Average Duration: 0.00ms

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:655:13)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"s8n8yX5j39ZBLH4QNZMZH","timestamp":"2026-02-10 17:22:33","validationErrors":0}
PASS test/unit/llm/LLMProvider.test.ts
  LLMProvider
    Constructor - Anthropic
      ✓ should initialize with Anthropic provider (3 ms)
      ✓ should not initialize OpenAI when using Anthropic (1 ms)
    Constructor - OpenAI
      ✓ should initialize with OpenAI provider (1 ms)
      ✓ should not initialize Anthropic when using OpenAI (2 ms)
    Embedding Generation - OpenAI
      ✓ should generate embedding using OpenAI (1 ms)
      ✓ should handle OpenAI API errors (21 ms)
      ✓ should generate embeddings for different texts (1 ms)
    Embedding Generation - Anthropic Fallback
      ✓ should use fallback embedding for Anthropic (2 ms)
      ✓ should generate different embeddings for different texts (3 ms)
      ✓ should normalize fallback embeddings (1 ms)
      ✓ should handle empty text gracefully (1 ms)
      ✓ should respect vector dimensions from config (1 ms)
    Negotiation - Anthropic
      ✓ should negotiate alignment successfully (5 ms)
      ✓ should handle unsuccessful negotiation (2 ms)
      ✓ should filter low confidence results (1 ms)
      ✓ should include model in result (2 ms)
      ✓ should handle Anthropic API errors (7 ms)
    Negotiation - OpenAI
      ✓ should negotiate alignment successfully (2 ms)
      ✓ should handle OpenAI API errors (1 ms)
      ✓ should handle null content in response (1 ms)
    Response Parsing
      ✓ should parse complete response correctly (1 ms)
      ✓ should handle malformed JSON in proposed terms (1 ms)
      ✓ should handle missing SUCCESS field (1 ms)
      ✓ should handle missing CONFIDENCE field (1 ms)
      ✓ should handle missing REASONING field (1 ms)
      ✓ should handle completely malformed response (2 ms)
    Semantic Summary - Anthropic
      ✓ should generate semantic summary (1 ms)
      ✓ should handle Anthropic API errors in summary (1 ms)
      ✓ should handle non-text content type (1 ms)
    Semantic Summary - OpenAI
      ✓ should generate semantic summary (2 ms)
      ✓ should handle OpenAI API errors in summary
      ✓ should handle null content in summary response (1 ms)
    Prompt Building
      ✓ should build prompt with all intent fields (2 ms)
      ✓ should include desires and constraints in prompt (1 ms)
      ✓ should include protocol principles in prompt (1 ms)
    Edge Cases
      ✓ should throw error when no provider configured (5 ms)
      ✓ should handle intents with missing optional fields
      ✓ should handle very long intent prose (1 ms)
      ✓ should handle special characters in intent data (2 ms)

[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"s8n8yX5j39ZBLH4QNZMZH","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"9-fOe-6wPy6IoCBPWi0Zs","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"s8n8yX5j39ZBLH4QNZMZH","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153704,"service":"mediator-node","settlementId":"s8n8yX5j39ZBLH4QNZMZH","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"9ALuNMI8QKwq67uywvO9Y","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"bgTCScAgebZ1sS5cHLiSj","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"bgTCScAgebZ1sS5cHLiSj","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"ek57AAf1mm6qQjJ_it6nU","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"bgTCScAgebZ1sS5cHLiSj","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153704,"service":"mediator-node","settlementId":"bgTCScAgebZ1sS5cHLiSj","timestamp":"2026-02-10 17:22:33"}
  console.log
    Total API Calls: 0

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:656:13)

  console.log
    Errors Recovered: 0

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:657:13)

  console.log
    
    By Scenario:

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:658:13)

  console.log
      normal_operation: 0/6 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      high_load: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      network_failures: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      llm_failures: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      invalid_intents: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      stake_insufficient: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      unauthorized_poa: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      challenge_submission: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      spam_detection: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      validator_rotation: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      concurrent_operations: 0/7 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      resource_exhaustion: 0/6 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      timeout_recovery: 0/6 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

  console.log
      chain_api_errors: 0/6 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      semantic_consensus: 0/6 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:661:17)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
    
    By Consensus Mode:

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:664:13)

[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
  console.log
      permissionless: 0/25 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:667:17)

  console.log
      dpos: 0/25 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:667:17)

  console.log
      poa: 0/25 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:667:17)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"-rnNT3tyGaTeP6xsU84Vr","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"-rnNT3tyGaTeP6xsU84Vr","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"DNhZv-0_tT9bsTGrEAZD8","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
      hybrid: 0/25 passed

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:667:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"Tfyan7m3z2bylJuPPrJBr","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"DNhZv-0_tT9bsTGrEAZD8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"DNhZv-0_tT9bsTGrEAZD8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"XLsWkmjHF-GuzSwlq-rFI","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"-rnNT3tyGaTeP6xsU84Vr","timestamp":"2026-02-10 17:22:33"}
  console.log
    
    Failed Tests:

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:672:15)

[32minfo[39m: Settlement declaration recorded {"declarationId":"x8Hni2D99iraADnfmGb1E","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"DNhZv-0_tT9bsTGrEAZD8","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153723,"service":"mediator-node","settlementId":"-rnNT3tyGaTeP6xsU84Vr","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 1: high_load (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement finalized {"finalizedAt":1770744153724,"service":"mediator-node","settlementId":"DNhZv-0_tT9bsTGrEAZD8","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 2: network_failures (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 3: llm_failures (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 4: invalid_intents (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 5: stake_insufficient (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 6: unauthorized_poa (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 7: challenge_submission (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 8: spam_detection (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 9: validator_rotation (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 10: concurrent_operations (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 11: resource_exhaustion (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 12: timeout_recovery (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 13: chain_api_errors (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 14: semantic_consensus (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 15: normal_operation (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 16: high_load (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 17: network_failures (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 18: llm_failures (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 19: invalid_intents (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-coordinator/settlements","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 20: stake_insufficient (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 21: unauthorized_poa (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 22: challenge_submission (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 23: spam_detection (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 24: validator_rotation (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"D1kxGa1qdDOdXLWbDXc5c","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
      Iteration 25: concurrent_operations (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"P_-tv1bFhNcQGj_gV0MEe","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"D1kxGa1qdDOdXLWbDXc5c","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 26: resource_exhaustion (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"D1kxGa1qdDOdXLWbDXc5c","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 27: timeout_recovery (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 28: chain_api_errors (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"04KDIssRc73TDFstGLs0r","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"D1kxGa1qdDOdXLWbDXc5c","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 29: semantic_consensus (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 30: normal_operation (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement finalized {"finalizedAt":1770744153750,"service":"mediator-node","settlementId":"D1kxGa1qdDOdXLWbDXc5c","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 31: high_load (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 32: network_failures (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 33: llm_failures (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

PASS test/settlement/MP05SettlementCoordinator.test.ts
  MP05SettlementCoordinator Integration Tests
    Initialization
      ✓ should initialize all components successfully (19 ms)
    Settlement Lifecycle
      ✓ should support complete settlement lifecycle (35 ms)
      ✓ should support staged settlements (21 ms)
      ✓ should handle settlement contest (20 ms)
      ✓ should handle settlement reversal (23 ms)
    Capitalization
      ✓ should create capitalization event for payment claim (26 ms)
      ✓ should create capitalization event for revenue share (26 ms)
      ✓ should create capitalization event for equity interest (28 ms)
      ✓ should generate capitalization interface (37 ms)
      ✓ should record execution metadata (27 ms)
    External System Integration
      ✓ should generate blockchain instructions (25 ms)
      ✓ should generate payment instructions (26 ms)
      ✓ should generate accounting entries (28 ms)
    Complete Workflow
      ✓ should complete full settlement and capitalization workflow (25 ms)
    Query Methods
      ✓ should query settlements by party (21 ms)
      ✓ should get settlement summary with all related data (20 ms)
    Statistics
      ✓ should provide comprehensive statistics (19 ms)
    Precondition Validation
      ✓ should validate preconditions before settlement (19 ms)

  console.log
      Iteration 34: invalid_intents (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 35: stake_insufficient (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 36: unauthorized_poa (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 37: challenge_submission (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 38: spam_detection (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 39: validator_rotation (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 40: concurrent_operations (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 41: resource_exhaustion (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 42: timeout_recovery (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 43: chain_api_errors (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 44: semantic_consensus (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 45: normal_operation (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"fZu9D_81apTmPKn0zMRkY","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
      Iteration 46: high_load (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"ut1QosCHBv9rJ87KncO56","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"fZu9D_81apTmPKn0zMRkY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"fZu9D_81apTmPKn0zMRkY","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"RHAdFzN4Gx-7lbSOWoc8O","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 47: network_failures (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"dPjmeKgsM4tl33oz_ZrAl","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"fZu9D_81apTmPKn0zMRkY","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 48: llm_failures (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 49: invalid_intents (dpos) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement finalized {"finalizedAt":1770744153770,"service":"mediator-node","settlementId":"fZu9D_81apTmPKn0zMRkY","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 50: stake_insufficient (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 51: unauthorized_poa (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 52: challenge_submission (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 53: spam_detection (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 54: validator_rotation (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 55: concurrent_operations (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 56: resource_exhaustion (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 57: timeout_recovery (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 58: chain_api_errors (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 59: semantic_consensus (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 60: normal_operation (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 61: high_load (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 62: network_failures (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 63: llm_failures (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 64: invalid_intents (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 65: stake_insufficient (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 66: unauthorized_poa (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 67: challenge_submission (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 68: spam_detection (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 69: validator_rotation (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 70: concurrent_operations (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 71: resource_exhaustion (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 72: timeout_recovery (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 73: chain_api_errors (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 74: semantic_consensus (poa) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 75: normal_operation (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 76: high_load (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 77: network_failures (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 78: llm_failures (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 79: invalid_intents (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 80: stake_insufficient (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 81: unauthorized_poa (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"GnwUnTAuldYInomQW33_V","proposedBy":"mediator-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 82: challenge_submission (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 83: spam_detection (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"9a4MxmnxT1YUAp8S5tSFU","timestamp":"2026-02-10 17:22:33","validationErrors":0}
  console.log
      Iteration 84: validator_rotation (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"J1kTvNje_7dvDTgqA_ILj","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"9a4MxmnxT1YUAp8S5tSFU","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"9a4MxmnxT1YUAp8S5tSFU","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 85: concurrent_operations (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 86: resource_exhaustion (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement declaration recorded {"declarationId":"6Gk83rpbdUPndsFswJmfC","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"9a4MxmnxT1YUAp8S5tSFU","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"bAlTc-feMz7AUYZ_nQ854","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 87: timeout_recovery (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Settlement finalized {"finalizedAt":1770744153797,"service":"mediator-node","settlementId":"9a4MxmnxT1YUAp8S5tSFU","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 88: chain_api_errors (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"bAlTc-feMz7AUYZ_nQ854","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 89: semantic_consensus (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 90: normal_operation (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 91: high_load (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 92: network_failures (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 93: llm_failures (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 94: invalid_intents (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 95: stake_insufficient (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"BOhuQIb9_iWI4tETtKsnL","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 96: unauthorized_poa (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 97: challenge_submission (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 98: spam_detection (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
      Iteration 99: validator_rotation (hybrid) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlements-for-cap","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"BCKWS64jF_i6uo6ELW_pn","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"8lTXPOihVBaENvmxJUndp","timestamp":"2026-02-10 17:22:33","validationErrors":0}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"rjaVx0xCQz-LFYDwJOG79","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"8lTXPOihVBaENvmxJUndp","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"8lTXPOihVBaENvmxJUndp","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"_OIno9Xvdfw5CUvjhyAHy","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"8lTXPOihVBaENvmxJUndp","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"JpcEbNbeNcJjDom3xD0Yh","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744153814,"service":"mediator-node","settlementId":"8lTXPOihVBaENvmxJUndp","timestamp":"2026-02-10 17:22:33"}
  console.log
      Iteration 100: concurrent_operations (permissionless) - Cannot read properties of undefined (reading 'interceptors')

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:674:17)

  console.log
    ========================================

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:677:13)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"dQ1L9xR3Wsc-dc2yGFlcB","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"D-xVgnWajyD5d9RfVjdcI","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"D-xVgnWajyD5d9RfVjdcI","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"D-xVgnWajyD5d9RfVjdcI","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
PASS test/settlement/MP05CapitalizationManager.test.ts
  MP05CapitalizationManager Unit Tests
    Capitalization Event Creation
      ✓ should create payment claim event (30 ms)
      ✓ should create revenue share event (24 ms)
      ✓ should create equity interest event (19 ms)
      ✓ should create token event (18 ms)
      ✓ should create contractual right event (18 ms)
      ✓ should reject event for non-existent settlement (16 ms)
      ✓ should reject event for non-finalized settlement (32 ms)
      ✓ should reject event with invalid beneficiaries (18 ms)
      ✓ should reject event when capitalization disabled (22 ms)
    Capitalization Interface Generation
      ✓ should generate capitalization interface (23 ms)
      ✓ should validate percentage totals (19 ms)
      ✓ should include upstream references (29 ms)
      ✓ should include execution hints (25 ms)
      ✓ should reject interface for mismatched event and settlement (25 ms)
    Execution Metadata
      ✓ should record execution metadata (27 ms)
      ✓ should track pending executions (24 ms)
      ✓ should reject execution for non-existent event (23 ms)
    External System Integration
      ✓ should generate blockchain instructions for payment claim (23 ms)
      ✓ should generate payment instructions (26 ms)
      ✓ should generate accounting entries (22 ms)
      ✓ should reject payment instructions for non-payment interfaces (27 ms)
    Query Methods
      ✓ should query events by settlement (20 ms)
      ✓ should query events by value type (20 ms)
      ✓ should query events by beneficiary (25 ms)
    Statistics
      ✓ should provide comprehensive statistics (27 ms)
    Persistence
      ✓ should persist events to disk (18 ms)
      ✓ should load events from disk on initialization (18 ms)

[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"hvnVQrN0pulzzEOHFkCTH","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"hvnVQrN0pulzzEOHFkCTH","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"M2cFmAwwjklh9WxAKLgXp","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
FAIL test/integration/IntentSubmission.test.ts (8.963 s)
  Intent Submission Integration
    Intent Submission via IntentIngester
      ✕ should submit first intent with free burn allowance (30 ms)
      ✕ should execute burn for second intent submission (1 ms)
      ✕ should handle escalating burns for multiple submissions (1 ms)
      ✕ should preview burn before submission (1 ms)
      ✕ should track different users independently (1 ms)
      ✕ should include burn stats in node status (1 ms)
      ✕ should handle load multiplier in burn calculations
      ✕ should reject invalid intent submissions

  ● Intent Submission Integration › Intent Submission via IntentIngester › should submit first intent with free burn allowance

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should execute burn for second intent submission

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should handle escalating burns for multiple submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should preview burn before submission

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should track different users independently

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should include burn stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should handle load multiplier in burn calculations

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should reject invalid intent submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"b14DhsLwCIGQMQaMyXjPy","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"b14DhsLwCIGQMQaMyXjPy","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"ATA7_Fi3yP8SJyU9PI5TW","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"ATA7_Fi3yP8SJyU9PI5TW","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
FAIL test/integration/SettlementBurns.test.ts (8.972 s)
  Settlement Burns Integration
    Success Burn Execution
      ✕ should execute success burn when settlement closes (30 ms)
      ✕ should track success burns separately in burn stats
      ✕ should calculate burn from settlement value correctly
    Burn Skipping Scenarios
      ✕ should not execute burn when settlement has upheld challenges
      ✕ should not execute burn when settlement value is zero
    Error Handling
      ✕ should not fail settlement closure if burn execution fails (1 ms)
      ✕ should log burn errors without affecting settlement status (1 ms)
    End-to-End Settlement Lifecycle
      ✕ should demonstrate complete settlement with success burn (1 ms)

  ● Settlement Burns Integration › Success Burn Execution › should execute success burn when settlement closes

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Success Burn Execution › should track success burns separately in burn stats

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Success Burn Execution › should calculate burn from settlement value correctly

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Burn Skipping Scenarios › should not execute burn when settlement has upheld challenges

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Burn Skipping Scenarios › should not execute burn when settlement value is zero

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Error Handling › should not fail settlement closure if burn execution fails

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Error Handling › should log burn errors without affecting settlement status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › End-to-End Settlement Lifecycle › should demonstrate complete settlement with success burn

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

FAIL test/integration/LoadBasedScaling.test.ts (8.983 s)
  Load-Based Burn Scaling Integration
    LoadMonitor Initialization
      ✕ should initialize LoadMonitor with MediatorNode (31 ms)
      ✕ should start load monitoring when node starts (if enabled) (5 ms)
    Dynamic Load Adjustment
      ✕ should increase burn multiplier under high load (1 ms)
      ✕ should maintain base multiplier under low load (1 ms)
      ✕ should apply load multiplier to burn calculations (1 ms)
    Metrics Tracking
      ✕ should track intent submission rate
      ✕ should track active intent count (1 ms)
      ✕ should calculate average burn amount (1 ms)
    Node Status Integration
      ✕ should include load stats in node status (1 ms)
    Smooth Transitions
      ✕ should gradually adjust multiplier (not instant)
    Periodic Monitoring
      ✕ should update load multiplier periodically
    Load-Disabled Mode
      ✕ should not include load stats when disabled (1 ms)
    End-to-End Load Scaling
      ✕ should demonstrate full congestion pricing workflow (1 ms)

  ● Load-Based Burn Scaling Integration › LoadMonitor Initialization › should initialize LoadMonitor with MediatorNode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › LoadMonitor Initialization › should start load monitoring when node starts (if enabled)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should increase burn multiplier under high load

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should maintain base multiplier under low load

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should apply load multiplier to burn calculations

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should track intent submission rate

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should track active intent count

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should calculate average burn amount

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Node Status Integration › should include load stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Smooth Transitions › should gradually adjust multiplier (not instant)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Periodic Monitoring › should update load multiplier periodically

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Load-Disabled Mode › should not include load stats when disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › End-to-End Load Scaling › should demonstrate full congestion pricing workflow

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

FAIL test/integration/BurnAnalytics.test.ts (8.991 s)
  Burn Analytics Integration
    Analytics Integration with MediatorNode
      ✕ should provide analytics via mediatorNode.getBurnAnalytics() (32 ms)
      ✕ should track burns and provide time series data (6 ms)
      ✕ should provide trend analysis after multiple burns (1 ms)
    User Analytics
      ✕ should track individual user burn patterns (1 ms)
      ✕ should calculate average burn per user (1 ms)
      ✕ should get analytics for all users
    Leaderboards
      ✕ should generate leaderboards from burn data (1 ms)
      ✕ should rank users correctly by total amount (1 ms)
    Dashboard Metrics
      ✕ should generate comprehensive dashboard metrics (1 ms)
      ✕ should show correct burn type distribution
      ✕ should track load multiplier over time
    Forecasting
      ✕ should generate burn forecasts (1 ms)
    Real-time Analytics Updates
      ✕ should reflect new burns immediately in analytics (1 ms)
    Edge Cases
      ✕ should handle analytics with no burns (1 ms)
      ✕ should handle analytics with only free burns (1 ms)
      ✕ should handle time series with sparse data
    Analytics Performance
      ✕ should handle large number of burns efficiently (1 ms)

  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should provide analytics via mediatorNode.getBurnAnalytics()

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should track burns and provide time series data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should provide trend analysis after multiple burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should track individual user burn patterns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should calculate average burn per user

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should get analytics for all users

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Leaderboards › should generate leaderboards from burn data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Leaderboards › should rank users correctly by total amount

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should generate comprehensive dashboard metrics

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should show correct burn type distribution

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should track load multiplier over time

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Forecasting › should generate burn forecasts

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Real-time Analytics Updates › should reflect new burns immediately in analytics

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle analytics with no burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle analytics with only free burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle time series with sparse data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Performance › should handle large number of burns efficiently

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

FAIL test/integration/ConsensusMode.test.ts (9.034 s)
  Consensus Mode Integration Tests
    Permissionless Mode
      ✕ should start successfully without any restrictions (30 ms)
      ✕ should process intents without stake or authority checks (1 ms)
      ✕ should allow settlement submission without stake reference (1 ms)
    DPoS Mode
      ✕ should fail to start if minimum stake requirement is not met
      ✕ should start successfully when minimum stake is met (1 ms)
      ✕ should load delegations and calculate effective stake correctly (1 ms)
      ✕ should include stake reference in settlement submissions (1 ms)
      ✕ should handle stake bonding failure gracefully (1 ms)
      ✕ should filter out inactive delegations when calculating effective stake (1 ms)
    PoA Mode
      ✕ should fail to start if not in authority set (1 ms)
      ✕ should start successfully when in authority set (1 ms)
      ✕ should process intents when authorized (1 ms)
      ✕ should handle authority set loading failure gracefully (1 ms)
    Hybrid Mode
      ✕ should fail to start if not in authority set (even with sufficient stake) (1 ms)
      ✕ should fail to start if in authority set but insufficient stake (1 ms)
      ✕ should start successfully when both authorized and stake requirements are met (1 ms)
      ✕ should include both stake and authority signature in settlements (1 ms)
      ✕ should leverage delegations to meet stake requirement in hybrid mode (1 ms)
    Mode-Specific Validations
      ✕ should validate consensus mode configuration (17 ms)
      ✕ should handle missing DPoS configuration in DPoS mode (1 ms)
      ✕ should handle missing PoA configuration in PoA mode (1 ms)
      ✕ should properly clean up consensus components on stop

  ● Consensus Mode Integration Tests › Permissionless Mode › should start successfully without any restrictions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:156:22)

  ● Consensus Mode Integration Tests › Permissionless Mode › should process intents without stake or authority checks

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:184:22)

  ● Consensus Mode Integration Tests › Permissionless Mode › should allow settlement submission without stake reference

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:228:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should fail to start if minimum stake requirement is not met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:282:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should start successfully when minimum stake is met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:318:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should load delegations and calculate effective stake correctly

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:360:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should include stake reference in settlement submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:414:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should handle stake bonding failure gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:465:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should filter out inactive delegations when calculating effective stake

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:510:22)

  ● Consensus Mode Integration Tests › PoA Mode › should fail to start if not in authority set

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:575:22)

  ● Consensus Mode Integration Tests › PoA Mode › should start successfully when in authority set

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:612:22)

  ● Consensus Mode Integration Tests › PoA Mode › should process intents when authorized

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:652:22)

  ● Consensus Mode Integration Tests › PoA Mode › should handle authority set loading failure gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:704:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should fail to start if not in authority set (even with sufficient stake)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:744:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should fail to start if in authority set but insufficient stake

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:788:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should start successfully when both authorized and stake requirements are met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:831:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should include both stake and authority signature in settlements

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:875:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should leverage delegations to meet stake requirement in hybrid mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:935:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should validate consensus mode configuration

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of undefined (reading 'interceptors')"

          90 |
          91 |     // Add response interceptor for logging
        > 92 |     this.client.interceptors.response.use(
             |                 ^
          93 |       response => response,
          94 |       (error: AxiosError) => {
          95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at test/integration/ConsensusMode.test.ts:1001:22
      at test/integration/ConsensusMode.test.ts:1001:52
                at Array.forEach (<anonymous>)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:999:18)
      at test/integration/ConsensusMode.test.ts:1001:52
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:999:18)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should handle missing DPoS configuration in DPoS mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1010:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should handle missing PoA configuration in PoA mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1044:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should properly clean up consensus components on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1083:22)

[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"o0XCEjO_QWoAoXcvsOVxe","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"qbcCH4vtc2m91Z4xN1Amd","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation ratified {"delegationId":"qbcCH4vtc2m91Z4xN1Amd","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"qbcCH4vtc2m91Z4xN1Amd","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-2","delegationId":"tqRzBlX0w5soTAWuP9utA","delegatorId":"delegate-1","powersCount":1,"proposedBy":"delegate-1","redelegationDepth":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"q9kxwX4ARKz8Q2ngArZWI","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"q9kxwX4ARKz8Q2ngArZWI","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"q9kxwX4ARKz8Q2ngArZWI","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License revoked {"grantorId":"grantor-1","licenseId":"q9kxwX4ARKz8Q2ngArZWI","reason":"License revoked due to misuse","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"Oc9FjjtYzHrgkZQlFINDF","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"cWfg3PdeNV6e1flYMvSlw","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation ratified {"delegationId":"Oc9FjjtYzHrgkZQlFINDF","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"cWfg3PdeNV6e1flYMvSlw","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
FAIL test/e2e/ComprehensiveSimulation.test.ts (9.081 s)
  Comprehensive E2E Simulation (100 iterations)
    Iteration 1
      ✕ should handle high_load scenario with permissionless consensus (26 ms)
    Iteration 2
      ✕ should handle network_failures scenario with permissionless consensus (1 ms)
    Iteration 3
      ✕ should handle llm_failures scenario with permissionless consensus (1 ms)
    Iteration 4
      ✕ should handle invalid_intents scenario with permissionless consensus (1 ms)
    Iteration 5
      ✕ should handle stake_insufficient scenario with permissionless consensus (1 ms)
    Iteration 6
      ✕ should handle unauthorized_poa scenario with permissionless consensus (9 ms)
    Iteration 7
      ✕ should handle challenge_submission scenario with permissionless consensus (1 ms)
    Iteration 8
      ✕ should handle spam_detection scenario with permissionless consensus (1 ms)
    Iteration 9
      ✕ should handle validator_rotation scenario with permissionless consensus (1 ms)
    Iteration 10
      ✕ should handle concurrent_operations scenario with permissionless consensus (1 ms)
    Iteration 11
      ✕ should handle resource_exhaustion scenario with permissionless consensus (1 ms)
    Iteration 12
      ✕ should handle timeout_recovery scenario with permissionless consensus (1 ms)
    Iteration 13
      ✕ should handle chain_api_errors scenario with permissionless consensus
    Iteration 14
      ✕ should handle semantic_consensus scenario with permissionless consensus
    Iteration 15
      ✕ should handle normal_operation scenario with permissionless consensus
    Iteration 16
      ✕ should handle high_load scenario with permissionless consensus (1 ms)
    Iteration 17
      ✕ should handle network_failures scenario with permissionless consensus (1 ms)
    Iteration 18
      ✕ should handle llm_failures scenario with permissionless consensus
    Iteration 19
      ✕ should handle invalid_intents scenario with permissionless consensus
    Iteration 20
      ✕ should handle stake_insufficient scenario with permissionless consensus (1 ms)
    Iteration 21
      ✕ should handle unauthorized_poa scenario with permissionless consensus
    Iteration 22
      ✕ should handle challenge_submission scenario with permissionless consensus
    Iteration 23
      ✕ should handle spam_detection scenario with permissionless consensus
    Iteration 24
      ✕ should handle validator_rotation scenario with permissionless consensus
    Iteration 25
      ✕ should handle concurrent_operations scenario with dpos consensus
    Iteration 26
      ✕ should handle resource_exhaustion scenario with dpos consensus
    Iteration 27
      ✕ should handle timeout_recovery scenario with dpos consensus (1 ms)
    Iteration 28
      ✕ should handle chain_api_errors scenario with dpos consensus
    Iteration 29
      ✕ should handle semantic_consensus scenario with dpos consensus
    Iteration 30
      ✕ should handle normal_operation scenario with dpos consensus (1 ms)
    Iteration 31
      ✕ should handle high_load scenario with dpos consensus (1 ms)
    Iteration 32
      ✕ should handle network_failures scenario with dpos consensus
    Iteration 33
      ✕ should handle llm_failures scenario with dpos consensus (1 ms)
    Iteration 34
      ✕ should handle invalid_intents scenario with dpos consensus (1 ms)
    Iteration 35
      ✕ should handle stake_insufficient scenario with dpos consensus (1 ms)
    Iteration 36
      ✕ should handle unauthorized_poa scenario with dpos consensus (1 ms)
    Iteration 37
      ✕ should handle challenge_submission scenario with dpos consensus
    Iteration 38
      ✕ should handle spam_detection scenario with dpos consensus (1 ms)
    Iteration 39
      ✕ should handle validator_rotation scenario with dpos consensus
    Iteration 40
      ✕ should handle concurrent_operations scenario with dpos consensus
    Iteration 41
      ✕ should handle resource_exhaustion scenario with dpos consensus (1 ms)
    Iteration 42
      ✕ should handle timeout_recovery scenario with dpos consensus (1 ms)
    Iteration 43
      ✕ should handle chain_api_errors scenario with dpos consensus
    Iteration 44
      ✕ should handle semantic_consensus scenario with dpos consensus (1 ms)
    Iteration 45
      ✕ should handle normal_operation scenario with dpos consensus
    Iteration 46
      ✕ should handle high_load scenario with dpos consensus
    Iteration 47
      ✕ should handle network_failures scenario with dpos consensus (1 ms)
    Iteration 48
      ✕ should handle llm_failures scenario with dpos consensus (1 ms)
    Iteration 49
      ✕ should handle invalid_intents scenario with dpos consensus
    Iteration 50
      ✕ should handle stake_insufficient scenario with poa consensus (5 ms)
    Iteration 51
      ✕ should handle unauthorized_poa scenario with poa consensus (1 ms)
    Iteration 52
      ✕ should handle challenge_submission scenario with poa consensus
    Iteration 53
      ✕ should handle spam_detection scenario with poa consensus
    Iteration 54
      ✕ should handle validator_rotation scenario with poa consensus
    Iteration 55
      ✕ should handle concurrent_operations scenario with poa consensus
    Iteration 56
      ✕ should handle resource_exhaustion scenario with poa consensus (1 ms)
    Iteration 57
      ✕ should handle timeout_recovery scenario with poa consensus (1 ms)
    Iteration 58
      ✕ should handle chain_api_errors scenario with poa consensus
    Iteration 59
      ✕ should handle semantic_consensus scenario with poa consensus (1 ms)
    Iteration 60
      ✕ should handle normal_operation scenario with poa consensus
    Iteration 61
      ✕ should handle high_load scenario with poa consensus
    Iteration 62
      ✕ should handle network_failures scenario with poa consensus (1 ms)
    Iteration 63
      ✕ should handle llm_failures scenario with poa consensus (1 ms)
    Iteration 64
      ✕ should handle invalid_intents scenario with poa consensus
    Iteration 65
      ✕ should handle stake_insufficient scenario with poa consensus
    Iteration 66
      ✕ should handle unauthorized_poa scenario with poa consensus (1 ms)
    Iteration 67
      ✕ should handle challenge_submission scenario with poa consensus (1 ms)
    Iteration 68
      ✕ should handle spam_detection scenario with poa consensus
    Iteration 69
      ✕ should handle validator_rotation scenario with poa consensus
    Iteration 70
      ✕ should handle concurrent_operations scenario with poa consensus (1 ms)
    Iteration 71
      ✕ should handle resource_exhaustion scenario with poa consensus
    Iteration 72
      ✕ should handle timeout_recovery scenario with poa consensus
    Iteration 73
      ✕ should handle chain_api_errors scenario with poa consensus
    Iteration 74
      ✕ should handle semantic_consensus scenario with poa consensus
    Iteration 75
      ✕ should handle normal_operation scenario with hybrid consensus (1 ms)
    Iteration 76
      ✕ should handle high_load scenario with hybrid consensus (1 ms)
    Iteration 77
      ✕ should handle network_failures scenario with hybrid consensus
    Iteration 78
      ✕ should handle llm_failures scenario with hybrid consensus
    Iteration 79
      ✕ should handle invalid_intents scenario with hybrid consensus (1 ms)
    Iteration 80
      ✕ should handle stake_insufficient scenario with hybrid consensus
    Iteration 81
      ✕ should handle unauthorized_poa scenario with hybrid consensus (1 ms)
    Iteration 82
      ✕ should handle challenge_submission scenario with hybrid consensus
    Iteration 83
      ✕ should handle spam_detection scenario with hybrid consensus
    Iteration 84
      ✕ should handle validator_rotation scenario with hybrid consensus (1 ms)
    Iteration 85
      ✕ should handle concurrent_operations scenario with hybrid consensus
    Iteration 86
      ✕ should handle resource_exhaustion scenario with hybrid consensus
    Iteration 87
      ✕ should handle timeout_recovery scenario with hybrid consensus
    Iteration 88
      ✕ should handle chain_api_errors scenario with hybrid consensus
    Iteration 89
      ✕ should handle semantic_consensus scenario with hybrid consensus (1 ms)
    Iteration 90
      ✕ should handle normal_operation scenario with hybrid consensus
    Iteration 91
      ✕ should handle high_load scenario with hybrid consensus (1 ms)
    Iteration 92
      ✕ should handle network_failures scenario with hybrid consensus
    Iteration 93
      ✕ should handle llm_failures scenario with hybrid consensus
    Iteration 94
      ✕ should handle invalid_intents scenario with hybrid consensus (1 ms)
    Iteration 95
      ✕ should handle stake_insufficient scenario with hybrid consensus
    Iteration 96
      ✕ should handle unauthorized_poa scenario with hybrid consensus
    Iteration 97
      ✕ should handle challenge_submission scenario with hybrid consensus (1 ms)
    Iteration 98
      ✕ should handle spam_detection scenario with hybrid consensus
    Iteration 99
      ✕ should handle validator_rotation scenario with hybrid consensus (1 ms)
    Iteration 100
      ✕ should handle concurrent_operations scenario with permissionless consensus (1 ms)
    Stress Tests
      ✕ should handle rapid start/stop cycles
      ✕ should handle maximum cache size (3 ms)
      ✕ should handle all features enabled simultaneously
      ✕ should recover from intermittent failures
    Edge Cases
      ✕ should handle empty intent pool
      ✕ should handle single intent (no pairs possible)
      ✕ should handle negotiation failures gracefully
      ✕ should handle malformed API responses (1 ms)
      ✕ should handle very long intent prose
      ✕ should handle special characters in intent prose (1 ms)
    Concurrency
      ✕ should handle multiple nodes in parallel (1 ms)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 1 › should handle high_load scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 2 › should handle network_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 3 › should handle llm_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 4 › should handle invalid_intents scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 5 › should handle stake_insufficient scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 6 › should handle unauthorized_poa scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 7 › should handle challenge_submission scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 8 › should handle spam_detection scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 9 › should handle validator_rotation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 10 › should handle concurrent_operations scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 11 › should handle resource_exhaustion scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 12 › should handle timeout_recovery scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 13 › should handle chain_api_errors scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 14 › should handle semantic_consensus scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 15 › should handle normal_operation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 16 › should handle high_load scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 17 › should handle network_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 18 › should handle llm_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 19 › should handle invalid_intents scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 20 › should handle stake_insufficient scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 21 › should handle unauthorized_poa scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 22 › should handle challenge_submission scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 23 › should handle spam_detection scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 24 › should handle validator_rotation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 25 › should handle concurrent_operations scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 26 › should handle resource_exhaustion scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 27 › should handle timeout_recovery scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 28 › should handle chain_api_errors scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 29 › should handle semantic_consensus scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 30 › should handle normal_operation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 31 › should handle high_load scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 32 › should handle network_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 33 › should handle llm_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 34 › should handle invalid_intents scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 35 › should handle stake_insufficient scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 36 › should handle unauthorized_poa scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 37 › should handle challenge_submission scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 38 › should handle spam_detection scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 39 › should handle validator_rotation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 40 › should handle concurrent_operations scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 41 › should handle resource_exhaustion scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 42 › should handle timeout_recovery scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 43 › should handle chain_api_errors scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 44 › should handle semantic_consensus scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 45 › should handle normal_operation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 46 › should handle high_load scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 47 › should handle network_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 48 › should handle llm_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 49 › should handle invalid_intents scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 50 › should handle stake_insufficient scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 51 › should handle unauthorized_poa scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 52 › should handle challenge_submission scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 53 › should handle spam_detection scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 54 › should handle validator_rotation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 55 › should handle concurrent_operations scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 56 › should handle resource_exhaustion scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 57 › should handle timeout_recovery scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 58 › should handle chain_api_errors scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 59 › should handle semantic_consensus scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 60 › should handle normal_operation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 61 › should handle high_load scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 62 › should handle network_failures scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 63 › should handle llm_failures scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 64 › should handle invalid_intents scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 65 › should handle stake_insufficient scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 66 › should handle unauthorized_poa scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 67 › should handle challenge_submission scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 68 › should handle spam_detection scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 69 › should handle validator_rotation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 70 › should handle concurrent_operations scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 71 › should handle resource_exhaustion scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 72 › should handle timeout_recovery scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 73 › should handle chain_api_errors scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 74 › should handle semantic_consensus scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 75 › should handle normal_operation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 76 › should handle high_load scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 77 › should handle network_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 78 › should handle llm_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 79 › should handle invalid_intents scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 80 › should handle stake_insufficient scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 81 › should handle unauthorized_poa scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 82 › should handle challenge_submission scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 83 › should handle spam_detection scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 84 › should handle validator_rotation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 85 › should handle concurrent_operations scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 86 › should handle resource_exhaustion scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 87 › should handle timeout_recovery scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 88 › should handle chain_api_errors scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 89 › should handle semantic_consensus scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 90 › should handle normal_operation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 91 › should handle high_load scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 92 › should handle network_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 93 › should handle llm_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 94 › should handle invalid_intents scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 95 › should handle stake_insufficient scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 96 › should handle unauthorized_poa scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 97 › should handle challenge_submission scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 98 › should handle spam_detection scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 99 › should handle validator_rotation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 100 › should handle concurrent_operations scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle rapid start/stop cycles

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:708:22)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle maximum cache size

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:725:20)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle all features enabled simultaneously

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:762:20)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should recover from intermittent failures

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:785:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle empty intent pool

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:805:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle single intent (no pairs possible)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:822:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle negotiation failures gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:841:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle malformed API responses

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:860:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle very long intent prose

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:882:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle special characters in intent prose

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:901:20)

  ● Comprehensive E2E Simulation (100 iterations) › Concurrency › should handle multiple nodes in parallel

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:923:20)

[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"Oc9FjjtYzHrgkZQlFINDF","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"cWfg3PdeNV6e1flYMvSlw","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"cbCQ_4uENIy7oHhruhu6P","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"cbCQ_4uENIy7oHhruhu6P","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"cbCQ_4uENIy7oHhruhu6P","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations-depth","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"Fm3xWb1Z8GgzkuYhUcAbI","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation ratified {"delegationId":"Fm3xWb1Z8GgzkuYhUcAbI","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"Fm3xWb1Z8GgzkuYhUcAbI","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-2","delegationId":"6Nrkyeq6sk8Y8UFFoCVuF","delegatorId":"delegate-1","powersCount":1,"proposedBy":"delegate-1","redelegationDepth":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation ratified {"delegationId":"6Nrkyeq6sk8Y8UFFoCVuF","delegatorId":"delegate-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-2","delegationId":"6Nrkyeq6sk8Y8UFFoCVuF","delegatorId":"delegate-1","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"7_aQE6I1kC1IEq0PFGM5U","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"7_aQE6I1kC1IEq0PFGM5U","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"7_aQE6I1kC1IEq0PFGM5U","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License revoked {"grantorId":"grantor-1","licenseId":"7_aQE6I1kC1IEq0PFGM5U","reason":"First revocation","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"xS2y9y9foXiYQu7D55je2","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"9RDB6jOSQ4RAsOGHCx-gW","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegation ratified {"delegationId":"xS2y9y9foXiYQu7D55je2","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"9RDB6jOSQ4RAsOGHCx-gW","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"9RDB6jOSQ4RAsOGHCx-gW","service":"mediator-node","timestamp":"2026-02-10 17:22:33"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"w-lVZR2OkgsqStFzhyJpd","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"qIxGuv-jBVIlrOlmxlag7","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"4_z8x_MizaT6blc5w8Y56","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"4_z8x_MizaT6blc5w8Y56","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"4_z8x_MizaT6blc5w8Y56","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated action recorded {"actionId":"Ds6X7epaCYwp_VkEPwHZL","actionType":"negotiation","delegationId":"4_z8x_MizaT6blc5w8Y56","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withinScope":true}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"vHpJvWjyN8eNh2aohUdRF","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"vHpJvWjyN8eNh2aohUdRF","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"vHpJvWjyN8eNh2aohUdRF","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated action recorded {"actionId":"XQOtmUGdUUUKxJ4zWYSNo","actionType":"financial","delegationId":"vHpJvWjyN8eNh2aohUdRF","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withinScope":false}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"H4xo_VXA6qUnz5qOe-nut","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"H4xo_VXA6qUnz5qOe-nut","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"H4xo_VXA6qUnz5qOe-nut","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"2NI8vhlkx_0nly9zq5t6l","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"2NI8vhlkx_0nly9zq5t6l","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"2NI8vhlkx_0nly9zq5t6l","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"24W6nGdt2XR2d4LVHZPzA","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"24W6nGdt2XR2d4LVHZPzA","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"24W6nGdt2XR2d4LVHZPzA","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation revoked {"delegationId":"24W6nGdt2XR2d4LVHZPzA","delegatorId":"delegator-1","reason":"Delegation revoked due to project completion","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"m1S6XVE36PQP9pEtZPuys","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"m1S6XVE36PQP9pEtZPuys","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"m1S6XVE36PQP9pEtZPuys","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"53QA5eQR_h4uk0pi05gUx","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"53QA5eQR_h4uk0pi05gUx","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"53QA5eQR_h4uk0pi05gUx","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"sAPIkmDOoFqBOx_hmmX_L","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Increase DPoS Active Slots","votingPeriodEnd":"2026-02-17T17:22:34.172Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"Th2-B57_E9YwQ3-eF7-0O","proposalType":"authority_add","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Add New Authority","votingPeriodEnd":"2026-02-17T17:22:34.182Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"Xttza3vtFOSQ5QnbtlGTq","proposalType":"authority_remove","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Remove Inactive Authority","votingPeriodEnd":"2026-02-17T17:22:34.184Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"tx6YBQmc9tzJIfrQnCKm1","proposalType":"mode_transition","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Transition to Hybrid Mode","votingPeriodEnd":"2026-02-17T17:22:34.185Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error submitting governance proposal {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"sEw1CA9kJFt4VcKGZaQZB","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Increase Fee","votingPeriodEnd":"2026-02-17T17:22:34.189Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"nGPnVKmhE51xfpn_Siy-C","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.190Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"nGPnVKmhE51xfpn_Siy-C","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":3000}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"bjOVyneM6-Gfuky1QfIFn","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.193Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"bjOVyneM6-Gfuky1QfIFn","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"against","votingPower":1500}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"XeFSZ6uH5WTNsi5So3-AL","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.195Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"XeFSZ6uH5WTNsi5So3-AL","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"abstain","votingPower":2000}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"-Tzrag-K6qQr5t9cquCnd","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.196Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License automatically expired {"expiresAt":1770744154095,"licenseId":"9RDB6jOSQ4RAsOGHCx-gW","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"CY6Tp38TBBOXCfZB4tZOj","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.197Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"CY6Tp38TBBOXCfZB4tZOj","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":2000}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"nVjZgCUg0t7Z3w-Q4z_xo","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.199Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"nVjZgCUg0t7Z3w-Q4z_xo","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":7500}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"xA_ewkTgx4TrsDk4l5_HU","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.201Z"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error casting vote {"error":{},"proposalId":"xA_ewkTgx4TrsDk4l5_HU","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"iF25m5IKsGr5tboqYJaim","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"SpUc7QZtJA4jjNBNQQBRp","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Proposal 1","votingPeriodEnd":"2026-02-17T17:22:34.203Z"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"iF25m5IKsGr5tboqYJaim","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"5uWx4VGTHp-56D-ZI07RF","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Proposal 2","votingPeriodEnd":"2026-02-17T17:22:34.203Z"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"iF25m5IKsGr5tboqYJaim","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"9lN94okT0Qsw6J7f7TLU3","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.205Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"F05Wsp0CuGQ4A6My3x6MO","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Voting Proposal","votingPeriodEnd":"2026-02-17T17:22:34.208Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"1YT8Hxd_HYpzxz7PyuEch","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"lKHwE6UlNgItlltJFt865","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test Proposal","votingPeriodEnd":"2026-02-17T17:22:34.209Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"lKHwE6UlNgItlltJFt865","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":2000}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"1YT8Hxd_HYpzxz7PyuEch","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"1YT8Hxd_HYpzxz7PyuEch","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"VMr3Zb-7ocP-Gys4he7QC","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Time Test","votingPeriodEnd":"2026-02-17T17:22:34.212Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"_PrATtRbtVlG3Vd_eiOWj","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Delay Test","votingPeriodEnd":"2026-02-17T17:22:34.213Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"6MWOqVpqe2v4Mz4_jFD69","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"N3XZqsTeKqkqDfv_CR4wl","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Proposal 1","votingPeriodEnd":"2026-02-17T17:22:34.216Z"}
[32minfo[39m: Governance proposal submitted {"proposalId":"NI5ZrGtk-6YsFiYIi62OC","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Proposal 2","votingPeriodEnd":"2026-02-17T17:22:34.217Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"6MWOqVpqe2v4Mz4_jFD69","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"6MWOqVpqe2v4Mz4_jFD69","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"BKskcPWVAv7puouYUMRhe","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Vote Test","votingPeriodEnd":"2026-02-17T17:22:34.218Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"BKskcPWVAv7puouYUMRhe","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":2000}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager started {"approvalThreshold":50,"quorumPercentage":30,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","votingPeriodDays":7}
[31merror[39m: Error monitoring proposals {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager started {"approvalThreshold":50,"quorumPercentage":30,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","votingPeriodDays":7}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error monitoring proposals {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"UQzld1eJhfkDy0K3xfGzi","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager started {"approvalThreshold":50,"quorumPercentage":30,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","votingPeriodDays":7}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"UQzld1eJhfkDy0K3xfGzi","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager started {"approvalThreshold":50,"quorumPercentage":30,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","votingPeriodDays":7}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error monitoring proposals {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error monitoring proposals {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"UQzld1eJhfkDy0K3xfGzi","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error submitting governance proposal {"error":{"response":{"data":{"error":"Invalid proposal format"},"status":400}},"service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Bad Proposal"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error submitting governance proposal {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Timeout Test"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error submitting governance proposal {"error":{"code":"ECONNREFUSED","message":"Connection refused"},"service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Connection Test"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"Y5Fyv2ioImPeF5DeeY5eJ","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Fee Adjustment","votingPeriodEnd":"2026-02-17T17:22:34.230Z"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"qqPZM7jurAblgyXOXnUAz","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"qqPZM7jurAblgyXOXnUAz","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"qqPZM7jurAblgyXOXnUAz","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License revoked {"grantorId":"grantor-1","licenseId":"qqPZM7jurAblgyXOXnUAz","reason":"Test revocation","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"-GzFXKOvpz2WgX-cPcgt9","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Test","votingPeriodEnd":"2026-02-17T17:22:34.239Z"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"9DqaXio9WlF7guJfsMcjh","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"tp7nWoc538GlUoURoNtBY","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Stake Test","votingPeriodEnd":"2026-02-17T17:22:34.251Z"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"9DqaXio9WlF7guJfsMcjh","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"ucY8mKzlirDpQ1WQkRUkh","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Vote Power Test","votingPeriodEnd":"2026-02-17T17:22:34.252Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"ucY8mKzlirDpQ1WQkRUkh","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":3500}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"9DqaXio9WlF7guJfsMcjh","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance proposal submitted {"proposalId":"l4RQVVfIZiA7gFdm56JVf","proposalType":"parameter_change","service":"mediator-node","timestamp":"2026-02-10 17:22:34","title":"Power Test","votingPeriodEnd":"2026-02-17T17:22:34.253Z"}
[32minfo[39m: Vote cast successfully {"proposalId":"l4RQVVfIZiA7gFdm56JVf","service":"mediator-node","timestamp":"2026-02-10 17:22:34","voteType":"for","votingPower":10000}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-2","licenseId":"UZci2n8nTE_E1L0RZ8WR1","proposedBy":"grantor-2","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-2","humanAuthorship":true,"licenseId":"UZci2n8nTE_E1L0RZ8WR1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-3","grantorId":"grantor-3","licenseId":"ov13Fwobm5Btl3TCUacUi","proposedBy":"grantor-3","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Governance manager stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"OQlHFvqEyuD-1jBRe6La0","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"OQlHFvqEyuD-1jBRe6La0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"OQlHFvqEyuD-1jBRe6La0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/unit/governance/GovernanceManager.test.ts
  GovernanceManager
    Proposal Submission
      ✓ should submit a valid parameter change proposal (9 ms)
      ✓ should reject proposal submission with insufficient stake (2 ms)
      ✓ should submit authority add proposal (2 ms)
      ✓ should submit authority remove proposal (2 ms)
      ✓ should submit mode transition proposal (2 ms)
      ✓ should handle submission API errors (1 ms)
      ✓ should include prose description in proposal (2 ms)
    Vote Casting
      ✓ should cast a vote for a proposal (3 ms)
      ✓ should cast against vote (1 ms)
      ✓ should cast abstain vote (1 ms)
      ✓ should reject vote for non-existent proposal (1 ms)
      ✓ should reject duplicate votes (2 ms)
      ✓ should use stake-weighted voting power (2 ms)
      ✓ should handle vote submission API errors (1 ms)
    Proposal Status and Lifecycle
      ✓ should get active proposals (2 ms)
      ✓ should get proposal by ID (1 ms)
      ✓ should return undefined for non-existent proposal (1 ms)
      ✓ should get all proposals (2 ms)
      ✓ should get my vote for a proposal (1 ms)
    Quorum and Approval Validation
      ✓ should have correct configuration (1 ms)
      ✓ should track voting period end times (2 ms)
      ✓ should set execution delay correctly (1 ms)
    Governance Statistics
      ✓ should return initial statistics (2 ms)
      ✓ should update statistics after proposals (1 ms)
      ✓ should track vote counts in statistics (2 ms)
    Monitoring and Lifecycle
      ✓ should start monitoring (4 ms)
      ✓ should stop monitoring (1 ms)
      ✓ should handle multiple start/stop cycles (2 ms)
    Error Handling
      ✓ should handle malformed proposal data gracefully (1 ms)
      ✓ should handle network timeouts (1 ms)
      ✓ should handle chain API unavailability (1 ms)
    Proposal Prose Formatting
      ✓ should format parameter change proposal as prose (9 ms)
      ✓ should include voting rules in prose (12 ms)
    Integration with StakeManager
      ✓ should query effective stake for proposal submission (1 ms)
      ✓ should query effective stake for vote casting (1 ms)
      ✓ should use different voting power based on stake (2 ms)
    Configuration
      ✓ should respect custom voting period (1 ms)
      ✓ should respect custom quorum percentage (1 ms)
      ✓ should respect custom approval threshold
      ✓ should respect custom minimum stake (1 ms)

[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-2","licenseId":"jN4jPOAXgV1Ih1rH9WUz4","proposedBy":"grantor-2","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-2","humanAuthorship":true,"licenseId":"jN4jPOAXgV1Ih1rH9WUz4","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-3","grantorId":"grantor-3","licenseId":"Lauy_8E0_U74-IqnyIoc6","proposedBy":"grantor-3","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"USE3ZWH04k4YBy5Uo_HT0","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"USE3ZWH04k4YBy5Uo_HT0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"USE3ZWH04k4YBy5Uo_HT0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154274-99d23ccb6dbc","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-2","licenseId":"nom3jjdBACW5gu2g_N0FZ","proposedBy":"grantor-2","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-2","humanAuthorship":true,"licenseId":"nom3jjdBACW5gu2g_N0FZ","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-3","grantorId":"grantor-3","licenseId":"yhtom3coWWUzSWVr0_LlV","proposedBy":"grantor-3","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation automatically expired {"delegationId":"53QA5eQR_h4uk0pi05gUx","expiresAt":1770744154179,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"B6EiI9yjNReu_gqkLS65d","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"B6EiI9yjNReu_gqkLS65d","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"B6EiI9yjNReu_gqkLS65d","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-2","licenseId":"Whuoq3SADMuFsI_0WCjC_","proposedBy":"grantor-2","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-2","humanAuthorship":true,"licenseId":"Whuoq3SADMuFsI_0WCjC_","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-3","grantorId":"grantor-3","licenseId":"0FbBn2UiCd6JxlpCEGMMC","proposedBy":"grantor-3","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"fngFFtw6lG0HY1U4jfZsY","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"fngFFtw6lG0HY1U4jfZsY","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"fngFFtw6lG0HY1U4jfZsY","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-2","delegationId":"c-ZzpZA1L9IMjD8FYUifL","delegatorId":"delegator-2","powersCount":1,"proposedBy":"delegator-2","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-0","grantorId":"grantor-0","licenseId":"gvLQdppWi3s9StdQxE262","proposedBy":"grantor-0","service":"mediator-node","subjectCount":2,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"c-ZzpZA1L9IMjD8FYUifL","delegatorId":"delegator-2","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-0","humanAuthorship":true,"licenseId":"gvLQdppWi3s9StdQxE262","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-3","delegationId":"EoCzU10ka9zgmuk13GkfO","delegatorId":"delegator-3","powersCount":1,"proposedBy":"delegator-3","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-0","grantorId":"grantor-0","licenseId":"gvLQdppWi3s9StdQxE262","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"1Pd_dt4WN2aEFt3ANgBt3","proposedBy":"grantor-1","service":"mediator-node","subjectCount":2,"subjectType":"artifact","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"1Pd_dt4WN2aEFt3ANgBt3","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"1Pd_dt4WN2aEFt3ANgBt3","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License revoked {"grantorId":"grantor-1","licenseId":"1Pd_dt4WN2aEFt3ANgBt3","reason":"Test revocation","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-2","licenseId":"CL5MuiZcIfX_qTpBCCa3-","proposedBy":"grantor-2","service":"mediator-node","subjectCount":2,"subjectType":"agreement","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"nz72aJeLvLyQvO75rWghG","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"nz72aJeLvLyQvO75rWghG","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"nz72aJeLvLyQvO75rWghG","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-2","delegationId":"oK7AHceX9rrei8scCCOn4","delegatorId":"delegator-2","powersCount":1,"proposedBy":"delegator-2","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"oK7AHceX9rrei8scCCOn4","delegatorId":"delegator-2","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"KRdQBYvBwBShaecwgSDZ6","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-3","delegationId":"DuDFrz_oK2TQGYhhAxvod","delegatorId":"delegator-3","powersCount":1,"proposedBy":"delegator-3","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"HyUqgabbHGTGyiS8TfUYe","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"receipt","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Licenses loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licenses","licensesLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"cla6ESkhQ98cFPYX_2Roz","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"cla6ESkhQ98cFPYX_2Roz","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"cla6ESkhQ98cFPYX_2Roz","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-2","delegationId":"vGkDy_n2v05jvJ7w2_Fyx","delegatorId":"delegator-2","powersCount":1,"proposedBy":"delegator-2","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"vGkDy_n2v05jvJ7w2_Fyx","delegatorId":"delegator-2","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-3","delegationId":"uchwi1O4HFnFSoyWCYNIF","delegatorId":"delegator-3","powersCount":1,"proposedBy":"delegator-3","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/licensing/LicenseManager.test.ts
  LicenseManager
    License Proposal
      ✓ should propose a license successfully (8 ms)
      ✓ should reject proposal without grantor (10 ms)
      ✓ should reject proposal without subject IDs (3 ms)
      ✓ should reject time-bounded license without expiration (2 ms)
      ✓ should reject time-bounded license with past expiration (3 ms)
      ✓ should allow mediator to propose license (4 ms)
    License Ratification
      ✓ should ratify license successfully (6 ms)
      ✓ should reject ratification by non-grantor (5 ms)
      ✓ should reject ratification without human authorship (4 ms)
      ✓ should reject ratification without statement (5 ms)
      ✓ should reject ratification of non-existent license (4 ms)
    License Activation
      ✓ should activate ratified license successfully (6 ms)
      ✓ should reject activation of non-ratified license (29 ms)
      ✓ should reject activation of expired license (108 ms)
    License Revocation
      ✓ should revoke active license successfully (7 ms)
      ✓ should reject revocation by non-grantor (6 ms)
      ✓ should reject revocation without statement (11 ms)
      ✓ should reject revocation of already revoked license (6 ms)
    License Expiry
      ✓ should automatically expire time-bounded licenses (206 ms)
      ✓ should not expire perpetual licenses (6 ms)
    License Verification
      ✓ should verify active license (7 ms)
      ✓ should reject verification for different grantee (6 ms)
      ✓ should reject verification for different subject (8 ms)
      ✓ should detect expired license (7 ms)
    License Queries
      ✓ should get licenses by grantor (24 ms)
      ✓ should get licenses by grantee (10 ms)
      ✓ should get licenses by status (9 ms)
      ✓ should get active licenses for subject (9 ms)
    Statistics
      ✓ should return correct statistics (11 ms)
    Persistence
      ✓ should persist licenses to disk (7 ms)
      ✓ should load licenses from disk (6 ms)

[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"tTu2dnlXEr_BGCIZyn7FH","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"tTu2dnlXEr_BGCIZyn7FH","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"tTu2dnlXEr_BGCIZyn7FH","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated action recorded {"actionId":"NM2PKqEWDukb2hM81wp7v","actionType":"negotiation","delegationId":"tTu2dnlXEr_BGCIZyn7FH","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withinScope":true}
[32minfo[39m: Delegated action recorded {"actionId":"_D4DnxbRU4XB5dRZF96Ur","actionType":"commitment","delegationId":"tTu2dnlXEr_BGCIZyn7FH","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withinScope":false}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"-7s4CWwZf8Xi-BJnD15AD","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"4rkd4V0u8L50rzGsplrn5","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"fbrM34qsg3iuiOG9Gz2XJ","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation ratified {"delegationId":"fbrM34qsg3iuiOG9Gz2XJ","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"fbrM34qsg3iuiOG9Gz2XJ","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Delegated action recorded {"actionId":"uj4SNm1dwwbnseGkc4uVx","actionType":"test","delegationId":"fbrM34qsg3iuiOG9Gz2XJ","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withinScope":true}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154351-e7523772137d","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/licensing/DelegationManager.test.ts
  DelegationManager
    Delegation Proposal
      ✓ should propose a delegation successfully (23 ms)
      ✓ should reject proposal without delegated powers (5 ms)
      ✓ should reject proposal with empty power strings (4 ms)
      ✓ should support redelegation with valid parent (9 ms)
      ✓ should reject redelegation when parent does not allow it (8 ms)
      ✓ should reject redelegation exceeding depth limit (15 ms)
    Delegation Ratification
      ✓ should ratify delegation successfully (7 ms)
      ✓ should reject ratification by non-delegator (6 ms)
      ✓ should reject ratification without human authorship (6 ms)
    Delegated Actions
      ✓ should record action within scope (10 ms)
      ✓ should detect action outside scope (10 ms)
      ✓ should reject action by non-delegate (20 ms)
      ✓ should reject action without grant reference (11 ms)
    Delegation Revocation
      ✓ should revoke delegation successfully (7 ms)
      ✓ should reject revocation by non-delegator (7 ms)
    Delegation Expiry
      ✓ should automatically expire time-bounded delegations (209 ms)
    Delegation Queries
      ✓ should get delegations by delegator (12 ms)
      ✓ should get delegations by delegate (12 ms)
      ✓ should get delegations by status (11 ms)
    Statistics
      ✓ should return correct statistics (11 ms)
    Persistence
      ✓ should persist delegations to disk (6 ms)
      ✓ should load delegations from disk (8 ms)
      ✓ should persist actions to disk (10 ms)

[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154351-e7523772137d","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154369-39a100be3ba8","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"BC3hPCPbd1-GHRmDoe_Jf","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":1,"service":"mediator-node","settlementId":"X4f8Ry8lgEqUmME1C2LX-","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"ALVhniC2rUGc_bb8KP0Ch","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"CvDhYdD5XaQ2iQLpMxrYT","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"ALVhniC2rUGc_bb8KP0Ch","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"zv_wroS0667yEVKPtWw75","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"V1AXDKX_cqrwJPch5yJXG","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"zv_wroS0667yEVKPtWw75","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"zv_wroS0667yEVKPtWw75","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"zh0OwJNIso2bPOZJccKOF","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"zv_wroS0667yEVKPtWw75","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"gOuAqbMA3Vb7Gs_8WJ7KD","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"b86AX6HKS96rFAAtvcAI_","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"EJii2qYYL07jFcnT9_251","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"b86AX6HKS96rFAAtvcAI_","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"Zz717vJ1_v2NtKJ-xvm4H","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[33mwarn[39m: Settlement risk recorded {"riskId":"MAZWvcjFYDdL_8VOy8hLD","riskType":"unauthorized_declaration","service":"mediator-node","settlementId":"Zz717vJ1_v2NtKJ-xvm4H","severity":"high","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"T0NsAL0c7pbG5zr7LzwNC","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"b8qQ4BJ4s-qdWKLTSAiMp","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"T0NsAL0c7pbG5zr7LzwNC","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"T0NsAL0c7pbG5zr7LzwNC","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"e-57o5OLo9gUBbHerwiJr","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"T0NsAL0c7pbG5zr7LzwNC","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744154469,"service":"mediator-node","settlementId":"T0NsAL0c7pbG5zr7LzwNC","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"xJkTV4_TtGfadfCR9XAuq","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement declaration recorded {"declarationId":"y5Ky1wkn_sUlR9K2YzU7A","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"xJkTV4_TtGfadfCR9XAuq","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"xJkTV4_TtGfadfCR9XAuq","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"KM0-KyOAh07Q9ligirh_J","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"xJkTV4_TtGfadfCR9XAuq","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"sBxCS7N3mc_GqMLzfGlGn","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154274-99d23ccb6dbc","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"oAMPb5k7maW6k1i7L82nI","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"XvQxEoirs8Qiqjwe38uf1","declaringParty":"party-1","ratified":false,"service":"mediator-node","settlementId":"oAMPb5k7maW6k1i7L82nI","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement ratified - all parties declared {"parties":2,"service":"mediator-node","settlementId":"oAMPb5k7maW6k1i7L82nI","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"MiDEGKiqVCyr85um4S9pC","declaringParty":"party-2","ratified":true,"service":"mediator-node","settlementId":"oAMPb5k7maW6k1i7L82nI","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744154488,"service":"mediator-node","settlementId":"oAMPb5k7maW6k1i7L82nI","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154491-d99848319205","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":1,"service":"mediator-node","settlementId":"7GIvI117kUWXDrAysZIUG","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement stage completed {"completedBy":"party-1","service":"mediator-node","settlementId":"7GIvI117kUWXDrAysZIUG","stageNumber":1,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement stage completed {"completedBy":"party-1","service":"mediator-node","settlementId":"7GIvI117kUWXDrAysZIUG","stageNumber":2,"timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":1,"service":"mediator-node","settlementId":"V2jkcVLwEmkuk4pFuTt_n","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: ⚠️  PRODUCTION WARNING: Anthropic does not provide embeddings. Using character-based fallback which is NOT suitable for production semantic matching. Configure EMBEDDING_PROVIDER (openai, voyage, or cohere) and EMBEDDING_API_KEY for production use. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Configuration loaded {"chainId":"test-chain","consensusMode":"permissionless","llmProvider":"anthropic","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":1,"service":"mediator-node","settlementId":"MYgQbXHBu-SJp1m5uT1Py","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"HU0DF8W2MiUar-0IiaTUF","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"qPBY6iWpSXgJ44IhtRyEW","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Settlement contested {"disputeId":"dispute-123","service":"mediator-node","settlementId":"qPBY6iWpSXgJ44IhtRyEW","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"PYRp0fCp7LAI8fROBonY4","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"PYRp0fCp7LAI8fROBonY4","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154369-39a100be3ba8","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"Vwn5_Yj8Suz27z0npEOcG","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"PYRp0fCp7LAI8fROBonY4","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744154524,"service":"mediator-node","settlementId":"PYRp0fCp7LAI8fROBonY4","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement reversed {"reversalSettlementId":"reversal-1","service":"mediator-node","settlementId":"PYRp0fCp7LAI8fROBonY4","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154529-8cd2d97356fe","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":2,"service":"mediator-node","settlementId":"OXf4H6bDXZX1Qz9_NXtvx","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-2","requiredParties":2,"service":"mediator-node","settlementId":"X3fZnI8Q0MjntOUAiMgJR","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[33mwarn[39m: High event publish latency detected (P95: 1149.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:34","type":"high_latency"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154529-8cd2d97356fe","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: High event publish latency detected (P95: 1149.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:34","type":"high_latency"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154539-509d0c82213d","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"boRJIoz5chBqUPY4u74Qq","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"boRJIoz5chBqUPY4u74Qq","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"bmHeDHLp2vqZVLKD0z0Jq","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"boRJIoz5chBqUPY4u74Qq","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744154550,"service":"mediator-node","settlementId":"boRJIoz5chBqUPY4u74Qq","timestamp":"2026-02-10 17:22:34"}
FAIL test/integration/ChallengeLifecycle.test.ts (9.642 s)
  Challenge Lifecycle Integration
    Challenge Detection and Submission
      ✕ should provide access to challenge detector and manager (31 ms)
      ✕ should analyze settlement for contradictions (2 ms)
      ✕ should submit challenge and track it (2 ms)
      ✕ should update challenge status via monitoring (2 ms)
      ✕ should include challenge stats in node status (3 ms)
    Challenge Configuration
      ✕ should respect minConfidenceToChallenge setting (1 ms)
      ✕ should not include challenge stats when disabled (2 ms)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should provide access to challenge detector and manager

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should provide access to challenge detector and manager

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should analyze settlement for contradictions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should analyze settlement for contradictions

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should submit challenge and track it

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should submit challenge and track it

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should update challenge status via monitoring

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should update challenge status via monitoring

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should include challenge stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should include challenge stats in node status

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Configuration › should respect minConfidenceToChallenge setting

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Configuration › should respect minConfidenceToChallenge setting

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Configuration › should not include challenge stats when disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Configuration › should not include challenge stats when disabled

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-2","requiredParties":1,"service":"mediator-node","settlementId":"BS1LTtElqD3j_5cCRhi6P","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","isStaged":true,"requiredParties":1,"service":"mediator-node","settlementId":"nCou-z8iHsVEeKuAcqHjz","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Settlement ratified - all parties declared {"parties":1,"service":"mediator-node","settlementId":"nCou-z8iHsVEeKuAcqHjz","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement declaration recorded {"declarationId":"dO9fgTCh_bGlmjzKshpIt","declaringParty":"party-1","ratified":true,"service":"mediator-node","settlementId":"nCou-z8iHsVEeKuAcqHjz","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement stage completed {"completedBy":"party-1","service":"mediator-node","settlementId":"nCou-z8iHsVEeKuAcqHjz","stageNumber":1,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement finalized {"finalizedAt":1770744154561,"service":"mediator-node","settlementId":"nCou-z8iHsVEeKuAcqHjz","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://test-siem:8080"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"t_0wdVsl9A3D7R2O3z7zl","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Test Arbitrator","disputeId":"dispute-1","outcome":"claimant_favored","resolutionId":"t_0wdVsl9A3D7R2O3z7zl","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"Connection refused","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://test-siem:8080"}
FAIL test/integration/SemanticConsensusLifecycle.test.ts (9.669 s)
  Semantic Consensus Verification Lifecycle Integration
    High-Value Settlement Detection
      ✕ should detect high-value settlements requiring verification (29 ms)
      ✕ should not require verification for low-value settlements (2 ms)
    Verification Request Initiation
      ✕ should initiate verification for high-value settlement (2 ms)
      ✕ should exclude requester and self from verifier selection (2 ms)
    Verification Response Submission
      ✕ should generate and submit verification response (2 ms)
    Node Status Integration
      ✕ should include verification stats in node status (1 ms)
      ✕ should update stats after initiating verification (2 ms)
      ✕ should not include stats when semantic consensus disabled (1 ms)
    Semantic Equivalence
      ✕ should correctly identify equivalent semantic summaries (2 ms)
      ✕ should correctly identify non-equivalent semantic summaries (1 ms)
    Configuration
      ✕ should respect HIGH_VALUE_THRESHOLD setting (1 ms)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should detect high-value settlements requiring verification

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should detect high-value settlements requiring verification

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should not require verification for low-value settlements

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should not require verification for low-value settlements

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should initiate verification for high-value settlement

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should initiate verification for high-value settlement

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should exclude requester and self from verifier selection

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should exclude requester and self from verifier selection

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Response Submission › should generate and submit verification response

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Response Submission › should generate and submit verification response

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should include verification stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should include verification stats in node status

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should update stats after initiating verification

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should update stats after initiating verification

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should not include stats when semantic consensus disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should not include stats when semantic consensus disabled

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify non-equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify non-equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Configuration › should respect HIGH_VALUE_THRESHOLD setting

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Configuration › should respect HIGH_VALUE_THRESHOLD setting

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"tuTgcktA77yFcFfqCi37O","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"8AKGOrVc7NIS2-hWht2Lq","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Test Arbitrator","disputeId":"dispute-2","outcome":"claimant_favored","resolutionId":"8AKGOrVc7NIS2-hWht2Lq","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":0,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement initiated {"initiatedBy":"party-1","requiredParties":1,"service":"mediator-node","settlementId":"NkuC9RZvoRpiO5iqH_BNA","timestamp":"2026-02-10 17:22:34","validationErrors":0}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlements loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"p3bMyWK4ZJ3n4SEdYZfZ6","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement risks loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: MP05SettlementManager initialized {"dataPath":"./test-data/mp05-settlement-manager","risksLoaded":0,"service":"mediator-node","settlementsLoaded":1,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Test Arbitrator","disputeId":"dispute-3","outcome":"other","resolutionId":"p3bMyWK4ZJ3n4SEdYZfZ6","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"H9jTBSTuyjPXtO5bQwzM0","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Test Arbitrator","disputeId":"dispute-4","outcome":"claimant_favored","resolutionId":"H9jTBSTuyjPXtO5bQwzM0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/settlement/MP05SettlementManager.test.ts
  MP05SettlementManager Unit Tests
    Settlement Initiation
      ✓ should initiate settlement successfully (13 ms)
      ✓ should reject initiation without required fields (6 ms)
      ✓ should reject initiation when settlement system disabled (10 ms)
      ✓ should initiate staged settlement (7 ms)
    Settlement Declaration
      ✓ should record settlement declaration (8 ms)
      ✓ should auto-ratify when all parties declare (8 ms)
      ✓ should reject declaration without human authorship (6 ms)
      ✓ should reject duplicate declaration from same party (7 ms)
      ✓ should reject declaration by non-party (8 ms)
    Settlement Finalization
      ✓ should finalize ratified settlement (10 ms)
      ✓ should reject finalization of non-ratified settlement (10 ms)
      ✓ should reject modifications to finalized settlement (9 ms)
    Staged Settlement
      ✓ should complete stages sequentially (8 ms)
      ✓ should reject out-of-sequence stage completion (6 ms)
      ✓ should reject stage completion on non-staged settlement (7 ms)
    Settlement Contest and Reversal
      ✓ should contest settlement (8 ms)
      ✓ should reverse finalized settlement (8 ms)
    Query Methods
      ✓ should query settlements by party (7 ms)
      ✓ should query settlements by status (19 ms)
    Statistics
      ✓ should provide comprehensive statistics (10 ms)
    Persistence
      ✓ should persist settlements to disk (6 ms)
      ✓ should load settlements from disk on initialization (9 ms)

[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Test Arbitrator","disputeId":"dispute-5","outcome":"claimant_favored","resolutionId":"ARQs8KqOQ4K-Ezzg0mDJk","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"bUnkKULzyHA2oGKmCSYT3","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement recorded {"disputeId":"dispute-6","parties":2,"resolutionId":"bUnkKULzyHA2oGKmCSYT3","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"VH9S1W3t6d3gXQ-t_8zrb","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement recorded {"disputeId":"dispute-8","parties":2,"resolutionId":"VH9S1W3t6d3gXQ-t_8zrb","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"iG5B7dVVDSFu4Bdc0A8eq","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement recorded {"disputeId":"dispute-9","parties":2,"resolutionId":"iG5B7dVVDSFu4Bdc0A8eq","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"GGEwh01hoX5bIAcYMJVL8","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-456","disputeId":"dispute-10","resolutionId":"GGEwh01hoX5bIAcYMJVL8","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"CJwFz1Gm7fvUwx9oDycr0","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-11","resolutionId":"CJwFz1Gm7fvUwx9oDycr0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"uM7KnfncB4sY9AEAEgEzl","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-789","disputeId":"dispute-12","resolutionId":"uM7KnfncB4sY9AEAEgEzl","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"gZlMt1TiJdknv3GL7gKW6","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Withdrawal recorded {"disputeId":"dispute-13","resolutionId":"gZlMt1TiJdknv3GL7gKW6","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withdrawnBy":"party-1"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"aMoaJ8dTwyjAQxAzT2dsz","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Withdrawal recorded {"disputeId":"dispute-14","resolutionId":"aMoaJ8dTwyjAQxAzT2dsz","service":"mediator-node","timestamp":"2026-02-10 17:22:34","withdrawnBy":"party-2"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"ZEi9hjtnEkYtk3wSPAmCf","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-15","resolutionId":"ZEi9hjtnEkYtk3wSPAmCf","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Component health check failed {"component":"failing-component","error":"Component check failed","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: System health degraded {"service":"mediator-node","status":"unhealthy","timestamp":"2026-02-10 17:22:34","unhealthyComponents":["failing-component"]}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"fr9bJW-bO5amS1a0al6Ss","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-16","resolutionId":"fr9bJW-bO5amS1a0al6Ss","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"_WH7FUzM2OEpYtusqI8E4","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-17","resolutionId":"_WH7FUzM2OEpYtusqI8E4","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"W5840DZyZGJVa964eKl4k","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-18","resolutionId":"W5840DZyZGJVa964eKl4k","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"RESTRICTED","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://test-daemon:9000"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"error":"Connection refused","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://test-daemon:9000"}
[32minfo[39m: Outcome published to chain {"resolutionId":"miQR3V8NO3B8OAWtidn_n","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Arbitrator","disputeId":"dispute-19","outcome":"claimant_favored","resolutionId":"miQR3V8NO3B8OAWtidn_n","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"h-2Gi7PB_XXC8JI0yPqoM","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-20","resolutionId":"h-2Gi7PB_XXC8JI0yPqoM","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"0mJmYhT-QoPxKInkcvAYK","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-21","resolutionId":"0mJmYhT-QoPxKInkcvAYK","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"8szMu1kqE9NFNvVacJPrM","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Arbitrator","disputeId":"dispute-22","outcome":"claimant_favored","resolutionId":"8szMu1kqE9NFNvVacJPrM","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"q1yB3E2Qmf7pviKWjXJ9k","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Authority decision recorded {"authority":"Arbitrator","disputeId":"dispute-23","outcome":"respondent_favored","resolutionId":"q1yB3E2Qmf7pviKWjXJ9k","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"dpU2c8uRcANatpy2CfQIz","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Settlement recorded {"disputeId":"dispute-24","parties":2,"resolutionId":"dpU2c8uRcANatpy2CfQIz","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"dgbT4c_XCEVvXy9euWhZ3","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-25","resolutionId":"dgbT4c_XCEVvXy9euWhZ3","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: System health degraded {"service":"mediator-node","status":"critical","timestamp":"2026-02-10 17:22:34","unhealthyComponents":["critical-component"]}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"NjX-OKrW7Pjn-zksIArKy","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"NjX-OKrW7Pjn-zksIArKy","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"NjX-OKrW7Pjn-zksIArKy","respondent":"user-002","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: System health degraded {"service":"mediator-node","status":"unhealthy","timestamp":"2026-02-10 17:22:34","unhealthyComponents":["unhealthy-component"]}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error saving outcome {"error":{"code":"ENOENT","errno":-2,"path":"test-data/outcomes/ycHOs4SPJ0y88bvkjyNPZ.json","syscall":"open"},"resolutionId":"ycHOs4SPJ0y88bvkjyNPZ","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"ycHOs4SPJ0y88bvkjyNPZ","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-26","resolutionId":"ycHOs4SPJ0y88bvkjyNPZ","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: System health degraded {"service":"mediator-node","status":"degraded","timestamp":"2026-02-10 17:22:34","unhealthyComponents":["degraded-component"]}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"L0DW28fZ7H9MYBJ_s4VW0","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"L0DW28fZ7H9MYBJ_s4VW0","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"L0DW28fZ7H9MYBJ_s4VW0","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154539-509d0c82213d","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error saving outcome {"error":{"code":"ENOENT","errno":-2,"path":"test-data/outcomes/yzR9w0vbaf3shrkvIv0Br.json","syscall":"open"},"resolutionId":"yzR9w0vbaf3shrkvIv0Br","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcome published to chain {"resolutionId":"yzR9w0vbaf3shrkvIv0Br","service":"mediator-node","status":200,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dismissal recorded {"dismissedBy":"mediator-1","disputeId":"dispute-27","resolutionId":"yzR9w0vbaf3shrkvIv0Br","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
FAIL test/dispute/OutcomeRecorder.test.ts
  OutcomeRecorder
    Authority Decision Recording
      ✓ should record authority decision successfully (8 ms)
      ✓ should prevent duplicate resolutions for same dispute (5 ms)
      ✓ should include external references in resolution (6 ms)
      ✓ should publish to chain by default (5 ms)
      ✓ should skip chain publishing when requested (4 ms)
    Settlement Recording
      ✓ should record settlement successfully (4 ms)
      ✓ should fail settlement with insufficient parties (2 ms)
      ✓ should record settlement without mediator (5 ms)
      ✓ should include reputation impact if provided (4 ms)
    Dismissal Recording
      ✓ should record dismissal successfully (5 ms)
      ✓ should prevent dismissal of already resolved dispute (5 ms)
      ✓ should include annotations if provided (4 ms)
    Withdrawal Recording
      ✓ should record withdrawal successfully (4 ms)
      ✓ should record withdrawal without reason (5 ms)
    Outcome Retrieval
      ✓ should get outcome by resolution ID (5 ms)
      ✓ should get outcome for dispute (4 ms)
      ✓ should return undefined for non-existent outcome (3 ms)
      ✓ should get all outcomes (6 ms)
      ✓ should get outcomes by type (5 ms)
    Immutability Verification
      ✓ should verify outcome is immutable (4 ms)
      ✓ should handle non-existent outcome (2 ms)
    Statistics
      ✓ should return accurate statistics (10 ms)
    Persistence and Loading
      ✕ should persist outcomes to disk (10 ms)
      ✕ should load existing outcomes on initialization (6 ms)

  ● OutcomeRecorder › Persistence and Loading › should persist outcomes to disk

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      512 |
      513 |       const filePath = path.join(testDataPath, `${result.resolutionId}.json`);
    > 514 |       expect(fs.existsSync(filePath)).toBe(true);
          |                                       ^
      515 |
      516 |       const content = fs.readFileSync(filePath, 'utf-8');
      517 |       const savedOutcome = JSON.parse(content);

      at Object.<anonymous> (test/dispute/OutcomeRecorder.test.ts:514:39)

  ● OutcomeRecorder › Persistence and Loading › should load existing outcomes on initialization

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      530 |
      531 |       const outcomes = newRecorder.getAllOutcomes();
    > 532 |       expect(outcomes.length).toBeGreaterThan(0);
          |                               ^
      533 |       expect(outcomes.some((o) => o.disputeId === 'dispute-27')).toBe(true);
      534 |     });
      535 |   });

      at Object.<anonymous> (test/dispute/OutcomeRecorder.test.ts:532:31)

[32minfo[39m: Item frozen {"disputeId":"s3dHI41y2zFU7iffKXJAP","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"s3dHI41y2zFU7iffKXJAP","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"s3dHI41y2zFU7iffKXJAP","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring started {"interval":1000,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring started {"interval":1000,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring started {"interval":1000,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"TInbkXeuvlnDPKjekUH03","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"TInbkXeuvlnDPKjekUH03","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"TInbkXeuvlnDPKjekUH03","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"Mjmuy-X6-Hq0PN3PzTHeL","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"Mjmuy-X6-Hq0PN3PzTHeL","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"Mjmuy-X6-Hq0PN3PzTHeL","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Evidence added to dispute {"disputeId":"Mjmuy-X6-Hq0PN3PzTHeL","evidenceId":"SKmBocN0s0py5gxV-G2Db","evidenceType":"document","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"0SgyYRTpSM85q8Wro_U-b","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"DZh5FA4ifoNgyQCL_1XQg","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"DZh5FA4ifoNgyQCL_1XQg","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"DZh5FA4ifoNgyQCL_1XQg","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute status updated {"disputeId":"DZh5FA4ifoNgyQCL_1XQg","service":"mediator-node","status":"under_review","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"error":"Daemon unreachable","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"failOpen":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"SIEM unreachable","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":false,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps integration is disabled {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification requires consent from both parties {"claimantConsent":true,"disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"LOCKDOWN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"hzeDQjUbYaNfZrXBzWIkU","disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"Cannot read properties of undefined (reading 'status')","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"58mwyQq7Mqijrsw7tyhS_","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":false,"service":"mediator-node","siemConnected":false,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"RESTRICTED","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Dispute not found for status update {"disputeId":"non-existent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"Cannot read properties of undefined (reading 'status')","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":false,"service":"mediator-node","siemConnected":false,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"0TTooKt6RjawK1-IiWqCf","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"2YKmB0-2sK8H58Mw2y6H2","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"2xI6NsaFEmfvxf78bLIP1","recordCount":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"GbnOhbp23UsIv7lrX9DPy","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"GbnOhbp23UsIv7lrX9DPy","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"GbnOhbp23UsIv7lrX9DPy","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Error saving package {"error":{"code":"ENOENT","errno":-2,"path":"test-data/packages/OpYuK6CQIg21_r45Ncewz.json","syscall":"open"},"packageId":"OpYuK6CQIg21_r45Ncewz","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"OpYuK6CQIg21_r45Ncewz","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"TRUSTED","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":false,"disputeId":"dispute-123","packageId":"UPdegxcOCFfDloJYutcH-","recordCount":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"Cannot read properties of undefined (reading 'status')","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":false,"service":"mediator-node","siemConnected":false,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"LOCKDOWN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"Q4EP4VzkAx9U1ZhaP-a9C","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"error":"Cannot read properties of undefined (reading 'status')","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"C46fpOcTy1MWBs2nhSVXH","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":false,"service":"mediator-node","siemConnected":false,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages-2","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"57A9J4lVx4KAXWHy6cGdz","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Statement submitted {"clarificationId":"C46fpOcTy1MWBs2nhSVXH","service":"mediator-node","statementId":"-qYPlVUKtNfxVUVmm5aJB","statementType":"claim","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"error":"Cannot read properties of undefined (reading 'status')","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"failOpen":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":true,"service":"mediator-node","siemConnected":false,"siemEnabled":false,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"CQyCbhPhoLRG7ddlaytGf","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"Tdicnbs_oyc1_OQweJQs5","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"SjdFnGYk3oVGHGRdD32u6","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"error":"Daemon down","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[33mwarn[39m: Failed to connect to Boundary Daemon {"failOpen":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":false,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Connected to Boundary Daemon {"mode":"OPEN","service":"mediator-node","timestamp":"2026-02-10 17:22:34","url":"http://daemon:9000"}
[32minfo[39m: Connected to Boundary SIEM {"service":"mediator-node","sourceId":"test-mediator","timestamp":"2026-02-10 17:22:34","url":"http://siem:8080"}
[32minfo[39m: Security apps manager initialized {"daemonConnected":true,"daemonEnabled":true,"service":"mediator-node","siemConnected":true,"siemEnabled":true,"timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":false,"disputeId":"dispute-123","packageId":"zxrqYIeapfUsdZsXd94o9","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Security apps manager shutdown complete {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/unit/security/SecurityAppsManager.test.ts
  SecurityAppsManager
    constructor
      ✓ should create manager with default configuration (2 ms)
      ✓ should create manager with custom configuration (1 ms)
    initialize
      ✓ should initialize both clients when enabled (3 ms)
      ✓ should handle daemon connection failure gracefully (2 ms)
      ✓ should handle SIEM connection failure gracefully (1 ms)
      ✓ should skip initialization when disabled (1 ms)
    isActionAllowed
      ✓ should return true when daemon allows action (2 ms)
      ✓ should return false when daemon denies action (1 ms)
      ✓ should return true when daemon is not configured (1 ms)
    requestPolicyDecision
      ✓ should return full decision from daemon (2 ms)
      ✓ should return null when daemon is not configured (2 ms)
    logSecurityAction
      ✓ should log to both daemon and SIEM (2 ms)
      ✓ should handle blocked outcome correctly (2 ms)
    logBlockchainEvent
      ✓ should log blockchain events to SIEM (2 ms)
    logAuthEvent
      ✓ should log auth events to both systems (3 ms)
    logSettlementEvent
      ✓ should log settlement events to both systems (2 ms)
    logPolicyViolation
      ✓ should log policy violations to both systems (2 ms)
    logThreatDetection
      ✓ should log threats to both systems (2 ms)
    getCurrentMode
      ✓ should return current boundary mode (2 ms)
      ✓ should return null when daemon is not configured (1 ms)
    isInLockdown
      ✓ should return true in lockdown mode (2 ms)
      ✓ should return false when daemon is not configured (1 ms)
    getActiveAlerts
      ✓ should fetch active alerts from SIEM (3 ms)
      ✓ should return empty array when SIEM is not configured (1 ms)
    getHealth
      ✓ should return healthy status when both services are healthy (2 ms)
      ✓ should return unhealthy when daemon is down (8 ms)
    shutdown
      ✓ should disconnect all clients (2 ms)
    singleton pattern
      ✓ should return same instance from getSecurityAppsManager
      ✓ should create new instance after reset

[32minfo[39m: Dispute package created {"complete":false,"disputeId":"dispute-123","packageId":"vB7MmBPwLVp29JsCiI_pw","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"zHQv0UkTRpWmsO8fwjS2u","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"Eb2-MwVJFXPRxsuiPDVfm","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Package exported to JSON {"exportPath":"test-data/packages/exports/Eb2-MwVJFXPRxsuiPDVfm.json","packageId":"Eb2-MwVJFXPRxsuiPDVfm","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"8b0d_FFRRccR81Thoqnse","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Package exported to text {"exportPath":"test-data/packages/exports/8b0d_FFRRccR81Thoqnse.txt","packageId":"8b0d_FFRRccR81Thoqnse","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/unit/MediatorNode.test.ts
  MediatorNode
    constructor
      ✓ should create a mediator node with default config (10 ms)
      ✓ should initialize all core components (5 ms)
      ✓ should initialize ValidatorRotationManager for DPoS mode (4 ms)
      ✓ should initialize ValidatorRotationManager for hybrid mode (10 ms)
      ✓ should NOT initialize ValidatorRotationManager for permissionless mode (3 ms)
      ✓ should initialize EffortCaptureSystem when enabled (4 ms)
      ✓ should NOT initialize EffortCaptureSystem when disabled (3 ms)
      ✓ should initialize DisputeManager when enabled (5 ms)
      ✓ should initialize LicensingManager when enabled (6 ms)
      ✓ should initialize WebSocketServer when enabled (11 ms)
      ✓ should initialize HealthMonitor when monitoring is enabled (3 ms)
      ✓ should initialize GovernanceManager when enabled (3 ms)
      ✓ should log correct feature flags (5 ms)
    start
      ✓ should start in permissionless mode successfully (5 ms)
      ✓ should initialize vector database (9 ms)
      ✓ should load reputation (2 ms)
      ✓ should start polling for intents (3 ms)
      ✓ should start load monitoring when enabled (21 ms)
      ✓ should start WebSocket server when enabled (6 ms)
      ✓ should start health monitoring when enabled (5 ms)
      ✓ should register health checkers (11 ms)
      ✓ should start governance system when enabled (5 ms)
      ✓ should start effort capture system when enabled (5 ms)
      ✓ should handle errors during start (32 ms)
      DPoS mode
        ✓ should load delegations (6 ms)
        ✓ should bond stake if configured (11 ms)
        ✓ should check minimum stake requirement (6 ms)
        ✓ should NOT start if minimum stake not met (5 ms)
        ✓ should start validator rotation manager (12 ms)
      PoA mode
        ✓ should load authority set (6 ms)
        ✓ should check authorization (6 ms)
        ✓ should NOT start if not authorized (5 ms)
    stop
      ✓ should stop polling (3 ms)
      ✓ should stop load monitoring (3 ms)
      ✓ should save vector database (4 ms)
      ✓ should log stopped message (3 ms)
      ✓ should stop validator rotation manager in DPoS mode (11 ms)
      ✓ should stop effort capture system when enabled (5 ms)
      ✓ should stop WebSocket server when enabled (5 ms)
      ✓ should stop health monitoring when enabled (11 ms)
      ✓ should stop governance system when enabled (5 ms)
      ✓ should handle cleanup errors gracefully (3 ms)
    getStatus
      ✓ should return running state correctly (4 ms)
      ✓ should return running true after start (9 ms)
      ✓ should return cached intents count (3 ms)
      ✓ should return active settlements count (3 ms)
      ✓ should return reputation weight (2 ms)
      ✓ should return effective stake (4 ms)
      ✓ should return burn stats (2 ms)
      ✓ should include load stats when enabled (10 ms)
      ✓ should include challenge stats when enabled (5 ms)
      ✓ should include verification stats when semantic consensus enabled (4 ms)
      ✓ should include effort capture stats when enabled (10 ms)
      ✓ should include dispute stats when enabled (5 ms)
      ✓ should include licensing stats when enabled (5 ms)
    getter methods
      ✓ should return BurnManager (3 ms)
      ✓ should return IntentIngester (8 ms)
      ✓ should return LoadMonitor (2 ms)
      ✓ should return SettlementManager (3 ms)
      ✓ should return ChallengeDetector (2 ms)
      ✓ should return ChallengeManager (3 ms)
      ✓ should return SemanticConsensusManager (3 ms)
      ✓ should return undefined for optional components when not enabled (8 ms)
      ✓ should return WebSocketServer when enabled (4 ms)
      ✓ should return DisputeManager when enabled (5 ms)
      ✓ should return GovernanceManager when enabled (10 ms)
      ✓ should return HealthMonitor when enabled (5 ms)
      ✓ should return PerformanceAnalytics when enabled (4 ms)
    alignment cycle
      ✓ should run alignment cycle periodically (3 ms)
      ✓ should generate embeddings for new intents (8 ms)
      ✓ should skip alignment cycle when no intents (2 ms)
      ✓ should handle errors in alignment cycle gracefully (2 ms)
      ✓ should respect DPoS slot-based gating (5 ms)
    settlement monitoring
      ✓ should start settlement monitoring interval (3 ms)
      ✓ should handle errors in settlement monitoring gracefully (8 ms)
    challenge monitoring
      ✓ should monitor challenges when enabled (3 ms)
    sybil resistance monitoring
      ✓ should start sybil resistance monitoring when enabled (3 ms)

[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"YM0JEgZ4ZwiU_bQkYPYCZ","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[31merror[39m: Failed to get environment status {"error":"Network error","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154853-f99c9e130a3b","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"_E9-NPWjZDQ6ShgzQttvn","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154855-93f888a73f27","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"0ylF1UsHGvc7MWTy3uSDR","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Connection rejected: max connections reached {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"Okc8NA-ygXlHougUTJCoJ","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-456","packageId":"roQbnD2fuiLx9nOzDD2jo","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"1EXApeUP9yIthtpdMmGJ2","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Package deleted {"packageId":"1EXApeUP9yIthtpdMmGJ2","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"qn5nZXXGAV0Z9l669F0wo","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Package exported to JSON {"exportPath":"test-data/packages/exports/qn5nZXXGAV0Z9l669F0wo.json","packageId":"qn5nZXXGAV0Z9l669F0wo","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Package deleted {"packageId":"qn5nZXXGAV0Z9l669F0wo","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"JxSBV_KwKFS1gjVQaUYIs","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-456","packageId":"NsMSM1jHEEkFTH2IS8MtJ","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"N_QnIzQC-Z9SzLKK-iBTd","recordCount":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"YkqoebWxgFkxHVG3ZJ7s_","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Dispute package created {"complete":true,"disputeId":"dispute-123","packageId":"zv40y4MiDDPfKcPBIziXW","recordCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154491-d99848319205","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
PASS test/dispute/DisputePackageBuilder.test.ts
  DisputePackageBuilder
    Package Building
      ✓ should build a basic dispute package (10 ms)
      ✓ should include all evidence in package (4 ms)
      ✓ should include clarifications in package (5 ms)
      ✓ should generate human-readable summary (4 ms)
      ✓ should support package build options (3 ms)
    Package Hash Calculation
      ✓ should calculate consistent hash for same content (8 ms)
      ✓ should calculate different hash for different content (6 ms)
    Package Verification
      ✓ should verify package completeness (4 ms)
      ✓ should detect missing timeline (4 ms)
      ✓ should detect undocumented contested items (4 ms)
      ✓ should mark package as verified when complete (4 ms)
    Package Export
      ✓ should export package to JSON (7 ms)
      ✓ should export package to text (6 ms)
      ✓ should fail to export non-existent package (2 ms)
    Package Retrieval
      ✓ should get package by ID (3 ms)
      ✓ should get packages for dispute (4 ms)
      ✓ should return empty array for dispute with no packages (2 ms)
      ✓ should get all packages (5 ms)
    Package Deletion
      ✓ should delete package (4 ms)
      ✓ should fail to delete non-existent package (1 ms)
      ✓ should delete package exports (6 ms)
    Statistics
      ✓ should return accurate statistics (5 ms)
      ✓ should track verified packages correctly (4 ms)
    Persistence and Loading
      ✓ should persist packages to disk (4 ms)
      ✓ should load existing packages on initialization (5 ms)

[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744154899-71d0d3c8c82b","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"4BIWoX2wt89mtDHzU9UDJ","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"4BIWoX2wt89mtDHzU9UDJ","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"4BIWoX2wt89mtDHzU9UDJ","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Mutation attempt on frozen item recorded {"attemptedBy":"user-002","disputeId":"4BIWoX2wt89mtDHzU9UDJ","itemId":"intent-001","operationType":"update","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Mutation attempt on frozen item recorded {"attemptedBy":"user-002","disputeId":"4BIWoX2wt89mtDHzU9UDJ","itemId":"intent-001","operationType":"delete","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"4vU15v9_WkqE2NLwLV52F","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Statement submitted {"clarificationId":"4vU15v9_WkqE2NLwLV52F","service":"mediator-node","statementId":"YBoJHiQ3t_qDxtehroUOm","statementType":"counterclaim","timestamp":"2026-02-10 17:22:34"}
PASS test/unit/consensus/ValidatorRotationManager.test.ts
  ValidatorRotationManager
    constructor
      ✓ should initialize with default rotation config (1 ms)
      ✓ should start with no validators
    start
      ✓ should load validators from chain on start (2 ms)
      ✓ should initialize current epoch on start (5 ms)
      ✓ should handle chain API failure gracefully (1 ms)
    registerValidator
      ✓ should register a new validator with sufficient stake (1 ms)
      ✓ should reject validator with insufficient stake (1 ms)
      ✓ should submit registration to chain (1 ms)
    updateValidatorStake
      ✓ should update validator stake (1 ms)
      ✓ should ignore update for unknown validator (1 ms)
      ✓ should record stake change event (1 ms)
    removeValidator
      ✓ should remove a validator (1 ms)
      ✓ should record validator left event (1 ms)
    slot assignment
      ✓ should return current slot assignment (1 ms)
      ✓ should correctly identify current validator (1 ms)
      ✓ should calculate next slot for mediator
      ✓ should return time until next slot
    shouldMediate
      ✓ should allow mediation in permissionless mode
      ✓ should gate mediation in DPoS mode based on slot (1 ms)
      ✓ should check active set in hybrid mode
    validator selection
      ✓ should select top N validators by stake (1 ms)
      ✓ should exclude jailed validators from selection
    jailing and unjailing
      ✓ should jail a validator
      ✓ should not unjail before cooldown (1 ms)
      ✓ should unjail after cooldown period (1 ms)
      ✓ should reset missed slots on unjailing (1 ms)
    missed slot tracking
      ✓ should track missed slots (1 ms)
      ✓ should jail validator after threshold missed slots (1 ms)
      ✓ should reset missed slots on activity
    rotation events
      ✓ should record epoch start event (1 ms)
      ✓ should record validator joined event (2 ms)
      ✓ should limit event history (4 ms)
    configuration updates
      ✓ should update rotation configuration
      ✓ should preserve other config values when updating (1 ms)
    getStatus
      ✓ should return comprehensive status (1 ms)
      ✓ should include epoch details
    stop
      ✓ should stop epoch monitoring timers
    epoch transitions
      ✓ should maintain epoch continuity (1 ms)
      ✓ should calculate correct epoch boundaries (1 ms)

[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"Yq89a_wdJgxQ5T_HrQcDn","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"Yq89a_wdJgxQ5T_HrQcDn","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"Yq89a_wdJgxQ5T_HrQcDn","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Evidence snapshot created {"disputeId":"Yq89a_wdJgxQ5T_HrQcDn","exportPath":"test-data/evidence/snapshots/snapshot-Yq89a_wdJgxQ5T_HrQcDn-1770744154926.json","itemCount":1,"service":"mediator-node","snapshotId":"snapshot-Yq89a_wdJgxQ5T_HrQcDn-1770744154926","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"a2qrKR7en_p1lVCJAN8KV","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Statement submitted {"clarificationId":"a2qrKR7en_p1lVCJAN8KV","service":"mediator-node","statementId":"E5k_m8WYEOu7OxjgOvBea","statementType":"claim","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"1g5433Ly___-MsCJophZ4","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"1g5433Ly___-MsCJophZ4","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"1g5433Ly___-MsCJophZ4","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Items unfrozen for resolved dispute {"disputeId":"1g5433Ly___-MsCJophZ4","service":"mediator-node","timestamp":"2026-02-10 17:22:34","unfrozenCount":1}
[32minfo[39m: Dispute resolved {"disputeId":"1g5433Ly___-MsCJophZ4","outcome":"Settled amicably","service":"mediator-node","timestamp":"2026-02-10 17:22:34","unfrozenCount":1}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: Dispute not found for resolution {"disputeId":"non-existent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"mi5cV0tzbdEcPlp66TLGR","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"mi5cV0tzbdEcPlp66TLGR","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"mi5cV0tzbdEcPlp66TLGR","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Items unfrozen for resolved dispute {"disputeId":"mi5cV0tzbdEcPlp66TLGR","service":"mediator-node","timestamp":"2026-02-10 17:22:34","unfrozenCount":1}
[32minfo[39m: Dispute dismissed {"disputeId":"mi5cV0tzbdEcPlp66TLGR","reason":"Insufficient evidence","service":"mediator-node","timestamp":"2026-02-10 17:22:34","unfrozenCount":1}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"mpv3wfjsdSTJi7uFqc-dF","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"mpv3wfjsdSTJi7uFqc-dF","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"mpv3wfjsdSTJi7uFqc-dF","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"ZbhB9ztP8cFrOInAkqvIr","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"ZbhB9ztP8cFrOInAkqvIr","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"ZbhB9ztP8cFrOInAkqvIr","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Item frozen {"disputeId":"2-Ck7JZYuIYTMimvqwVyx","itemId":"intent-002","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Contested items frozen {"disputeId":"2-Ck7JZYuIYTMimvqwVyx","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:34","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-002","contestedItems":1,"disputeId":"2-Ck7JZYuIYTMimvqwVyx","service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:34"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"K-m02XL_LO993aWbOYYzw","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"K-m02XL_LO993aWbOYYzw","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"K-m02XL_LO993aWbOYYzw","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"Owc2R7d0p7x3LrwiXPEir","itemId":"intent-002","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"Owc2R7d0p7x3LrwiXPEir","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-002","contestedItems":1,"disputeId":"Owc2R7d0p7x3LrwiXPEir","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Dispute status updated {"disputeId":"K-m02XL_LO993aWbOYYzw","service":"mediator-node","status":"under_review","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"Exwtkk5AHR_8LYkUcv_BT","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"Exwtkk5AHR_8LYkUcv_BT","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"Exwtkk5AHR_8LYkUcv_BT","respondent":"user-002","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"LBlv4eSAZ_Acqb2d0bPio","itemId":"intent-002","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"LBlv4eSAZ_Acqb2d0bPio","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-003","contestedItems":1,"disputeId":"LBlv4eSAZ_Acqb2d0bPio","respondent":"user-001","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"a2IjAgZFtsYCa_7vQ8uly","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"a2IjAgZFtsYCa_7vQ8uly","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"a2IjAgZFtsYCa_7vQ8uly","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Evidence added to dispute {"disputeId":"a2IjAgZFtsYCa_7vQ8uly","evidenceId":"QgkgU2S2h5iTW64M3gx4z","evidenceType":"document","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Items unfrozen for resolved dispute {"disputeId":"a2IjAgZFtsYCa_7vQ8uly","service":"mediator-node","timestamp":"2026-02-10 17:22:35","unfrozenCount":1}
[32minfo[39m: Dispute resolved {"disputeId":"a2IjAgZFtsYCa_7vQ8uly","outcome":"Resolved","service":"mediator-node","timestamp":"2026-02-10 17:22:35","unfrozenCount":1}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"HzuQG6gyWJA4ts0klmVoH","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"HzuQG6gyWJA4ts0klmVoH","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"HzuQG6gyWJA4ts0klmVoH","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Evidence added to dispute {"disputeId":"HzuQG6gyWJA4ts0klmVoH","evidenceId":"xtntlROOkRWng3B7toBWW","evidenceType":"document","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Evidence added to dispute {"disputeId":"HzuQG6gyWJA4ts0klmVoH","evidenceId":"n6tjlH_fiZ3WRMU_nQXNv","evidenceType":"statement","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Failed to get policy decision {"action":"test_action","error":"Connection refused","failOpen":false,"resource":"test_resource","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"-hiMmQJF2xP6jYLeslkkb","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"-hiMmQJF2xP6jYLeslkkb","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Dispute initiated {"claimant":"user-001","contestedItems":1,"disputeId":"-hiMmQJF2xP6jYLeslkkb","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Escalations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EscalationManager initialized {"authoritiesLoaded":0,"dataPath":"./test-data/escalations","escalationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Packages loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputePackageBuilder initialized {"dataPath":"./test-data/packages","packagesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Outcomes loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: OutcomeRecorder initialized {"dataPath":"./test-data/outcomes","outcomesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disputes loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DisputeManager initialized {"dataPath":"./test-data/disputes","disputesLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/dispute/DisputeManager.test.ts
  DisputeManager
    initiateDispute
      ✓ should initiate a dispute successfully (29 ms)
      ✓ should freeze contested items when auto-freeze is enabled (17 ms)
      ✓ should submit dispute to chain (16 ms)
      ✓ should handle invalid contested items (10 ms)
      ✓ should handle optional respondent (21 ms)
    addEvidence
      ✓ should add evidence to a dispute (15 ms)
      ✓ should handle evidence for non-existent dispute (8 ms)
    updateDisputeStatus
      ✓ should update dispute status (14 ms)
      ✓ should handle non-existent dispute (9 ms)
    evidence freezing integration
      ✓ should prevent mutations of frozen items (111 ms)
      ✓ should record mutation attempts (17 ms)
      ✓ should create evidence snapshots (15 ms)
    resolveDispute
      ✓ should resolve a dispute and unfreeze items (14 ms)
      ✓ should handle non-existent dispute (10 ms)
    dismissDispute
      ✓ should dismiss a dispute and unfreeze items (14 ms)
    getters
      ✓ should get dispute by ID (12 ms)
      ✓ should get all disputes (15 ms)
      ✓ should get disputes by status (16 ms)
      ✓ should get disputes by party (14 ms)
    getDisputeTimeline
      ✓ should generate complete timeline (15 ms)
    getStats
      ✓ should return comprehensive statistics (15 ms)
    persistence
      ✓ should persist disputes to disk and load them (17 ms)

[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154855-93f888a73f27","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154853-f99c9e130a3b","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":true,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744155157-6c18c7f5307c","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: No JSON found in spam detection response {"intent":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error analyzing intent for spam {"error":{},"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"rV8C42fJ3kcNWr2Ae1PMD","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"8eOLmwkdn9CvO8LR8hxTw","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error submitting spam proof {"error":{},"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"uHt48hFD2ib3gtMkJLIxZ","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"RwtfJO8CZRknF-bzRmjja","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof validated {"depositForfeited":100,"intentHash":"test-intent-hash","proofId":"RwtfJO8CZRknF-bzRmjja","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"4qpX53quBHtiw3IChq56o","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof validated {"depositForfeited":0,"intentHash":"test-intent-hash","proofId":"4qpX53quBHtiw3IChq56o","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"xdghwb_8hFkAPEN_YxMQQ","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof rejected {"intentHash":"test-intent-hash","proofId":"xdghwb_8hFkAPEN_YxMQQ","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"JPINLq1DF8O0UNPgiKzw9","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error checking spam proof status {"error":{},"proofId":"JPINLq1DF8O0UNPgiKzw9","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"qzPokXScC8OkOvclMt5qE","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"hash2","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"hash2","proofId":"LPWONUfbArI5IIwveW_lT","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"hash3","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"hash3","proofId":"tRUANzqG_teJNyVLo64xC","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof validated {"depositForfeited":100,"intentHash":"test-intent-hash","proofId":"qzPokXScC8OkOvclMt5qE","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof rejected {"intentHash":"hash2","proofId":"LPWONUfbArI5IIwveW_lT","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"test-intent-hash","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"test-intent-hash","proofId":"uw1O5acRENT5ak8x6T9vM","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Submitting spam proof {"author":"test-author","confidence":0.95,"intentHash":"hash2","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Spam proof submitted successfully {"intentHash":"hash2","proofId":"rIzROVjfmzL1W7xgktsSt","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/sybil/SpamProofDetector.test.ts
  SpamProofDetector
    analyzeIntent
      ✓ should return null if spam proof submission disabled (1 ms)
      ✓ should detect spam with high confidence (1 ms)
      ✓ should not detect legitimate intent as spam (1 ms)
      ✓ should work with OpenAI provider (4 ms)
      ✓ should handle malformed JSON response (1 ms)
      ✓ should handle LLM errors gracefully (1 ms)
      ✓ should clamp confidence to 0-1 range
      ✓ should extract JSON from text with extra content
    shouldSubmitProof
      ✓ should submit proof for high confidence spam (1 ms)
      ✓ should not submit proof for low confidence spam
      ✓ should not submit proof for non-spam (1 ms)
      ✓ should respect custom minSpamConfidence
    submitSpamProof
      ✓ should submit spam proof successfully (2 ms)
      ✓ should format spam proof as prose (1 ms)
      ✓ should handle submission errors (1 ms)
      ✓ should track submitted proofs (1 ms)
    monitorSpamProofs
      ✓ should check status of pending proofs (1 ms)
      ✓ should skip non-pending proofs (1 ms)
      ✓ should handle rejected proofs (1 ms)
      ✓ should do nothing if no proofs submitted (1 ms)
      ✓ should handle status check errors (1 ms)
    getSpamProofStats
      ✓ should return empty stats initially (1 ms)
      ✓ should count proofs by status (2 ms)
    getSubmittedProofs
      ✓ should return all submitted proofs (1 ms)

[31merror[39m: Failed to submit event to SIEM {"error":"Network error","name":"test_event","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Failed to submit batch events {"count":1,"error":"Cannot read properties of undefined (reading 'data')","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"CmhQFYflnZxSujN6F8zWc","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification completed {"clarificationId":"CmhQFYflnZxSujN6F8zWc","duration":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.252Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.254Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.255Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[31merror[39m: Error selecting verifiers {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error initiating verification {"error":{},"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Failed to get policy decision {"action":"test_action","error":"Connection refused","failOpen":true,"resource":"test_resource","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"gWgFsul2JLu_VhwYRUUy3","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"gWgFsul2JLu_VhwYRUUy3","service":"mediator-node","statementId":"E00HIhMEgYQE39KmUWtB0","statementType":"claim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"gWgFsul2JLu_VhwYRUUy3","service":"mediator-node","statementId":"Bm05p4OvC01BMfHcn2o_x","statementType":"counterclaim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/integration/BurnWorkflow.test.ts
  Burn Workflow Integration
    BurnManager Integration
      ✓ should initialize BurnManager with MediatorNode (6 ms)
      ✓ should include burn statistics in node status (18 ms)
      ✓ should execute filing burns via BurnManager (3 ms)
      ✓ should track multiple users independently (1 ms)
      ✓ should calculate burn preview before execution (2 ms)
      ✓ should handle success burns on settlement closure (2 ms)
      ✓ should update load multiplier and reflect in calculations (2 ms)
      ✓ should expose comprehensive burn statistics (3 ms)

[32minfo[39m: Clarification analyzed {"ambiguities":1,"clarificationId":"gWgFsul2JLu_VhwYRUUy3","factualDisagreements":1,"interpretiveDisagreements":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Clarification not found for analysis {"clarificationId":"non-existent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"XtI0L7yaQSbidIXgpMxUr","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.279Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[33mwarn[39m: No statements to analyze {"clarificationId":"XtI0L7yaQSbidIXgpMxUr","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Generating verification response {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification response submitted {"approves":true,"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"TipHnQYFBZ42olL1M_et6","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/reputation/ReputationTracker.test.ts
  ReputationTracker
    constructor
      ✓ should initialize with default reputation values (1 ms)
      ✓ should use mediator public key from config (1 ms)
    loadReputation
      ✓ should load reputation from chain successfully (1 ms)
      ✓ should use reputationChainEndpoint if provided
      ✓ should preserve mediatorId from config even if chain data has different value (1 ms)
      ✓ should handle missing chain data gracefully
      ✓ should handle network errors gracefully (1 ms)
      ✓ should handle 404 errors gracefully
    recordSuccessfulClosure
      ✓ should increment successful closures counter
      ✓ should recalculate weight after recording closure
      ✓ should update lastUpdated timestamp
      ✓ should publish reputation update to chain (1 ms)
      ✓ should handle multiple successful closures
      ✓ should handle publish errors gracefully
    recordFailedChallenge
      ✓ should increment failed challenges counter (1 ms)
      ✓ should recalculate weight after recording failed challenge
      ✓ should publish reputation update to chain (1 ms)
      ✓ should handle multiple failed challenges
    recordUpheldChallengeAgainst
      ✓ should increment upheld challenges against counter (1 ms)
      ✓ should recalculate weight after recording upheld challenge
      ✓ should decrease weight when challenge is upheld (1 ms)
      ✓ should publish reputation update to chain
    recordForfeitedFee
      ✓ should increment forfeited fees counter
      ✓ should recalculate weight after recording forfeited fee
      ✓ should decrease weight when fee is forfeited
      ✓ should publish reputation update to chain (3 ms)
    getReputation
      ✓ should return a copy of reputation
      ✓ should return current reputation state (1 ms)
    getWeight
      ✓ should return current weight
      ✓ should return updated weight after changes
    reputation weight calculations
      ✓ should calculate weight with mixed metrics (1 ms)
      ✓ should calculate weight with all metrics
      ✓ should handle zero successful closures (1 ms)
    edge cases
      ✓ should handle rapid successive updates
      ✓ should handle chain endpoint changes
      ✓ should preserve state across multiple operations
      ✓ should handle publish failures without affecting local state (1 ms)

[32minfo[39m: Generating verification response {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error generating semantic summary {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification response submitted {"approves":false,"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"TipHnQYFBZ42olL1M_et6","service":"mediator-node","statementId":"NIe9KOX3AfA0QfuOpTspE","statementType":"claim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification analyzed {"ambiguities":1,"clarificationId":"TipHnQYFBZ42olL1M_et6","factualDisagreements":1,"interpretiveDisagreements":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"TipHnQYFBZ42olL1M_et6","service":"mediator-node","statementId":"F5s5COZ0a10iGqF16I-wp","statementType":"counterclaim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.289Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[32minfo[39m: Clarification analyzed {"ambiguities":1,"clarificationId":"TipHnQYFBZ42olL1M_et6","factualDisagreements":1,"interpretiveDisagreements":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.291Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[32minfo[39m: Initiating semantic consensus verification {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","value":15000}
[32minfo[39m: Verification request submitted to chain {"service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Verification request initiated {"deadline":"2026-02-11T17:22:35.294Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35","verifiers":5}
[33mwarn[39m: Verification deadline expired {"deadline":"2026-02-10T17:22:34.295Z","service":"mediator-node","settlementId":"settlement-123","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/consensus/SemanticConsensusManager.test.ts
  SemanticConsensusManager
    requiresVerification
      ✓ should return true for high-value settlements (1 ms)
      ✓ should return false for low-value settlements (1 ms)
      ✓ should return false when semantic consensus is disabled
      ✓ should handle settlements with zero fee percentage
    initiateVerification
      ✓ should successfully initiate verification (3 ms)
      ✓ should exclude requester and self from verifier selection (1 ms)
      ✓ should set correct verification deadline (2 ms)
      ✓ should handle API errors gracefully (22 ms)
      ✓ should track initiated verification (2 ms)
    checkSemanticEquivalence
      ✓ should detect equivalent summaries
      ✓ should detect non-equivalent summaries
      ✓ should handle identical embeddings (1 ms)
      ✓ should use configured similarity threshold
    submitVerificationResponse
      ✓ should generate and submit verification response (2 ms)
      ✓ should handle LLM errors gracefully (2 ms)
    getVerificationStats
      ✓ should return empty stats when no verifications (1 ms)
      ✓ should count pending verifications (2 ms)
    getVerification
      ✓ should return verification by settlement ID (2 ms)
      ✓ should return null for non-existent verification (1 ms)
    hasResponded
      ✓ should return false when no response submitted
    checkVerificationTimeouts
      ✓ should mark expired verifications as timed out (3 ms)

[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"ugkfqmmxqpQv3q0IbE0mC","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification completed {"clarificationId":"ugkfqmmxqpQv3q0IbE0mC","duration":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"ZwKb8rGjfWFh_7p7WcchI","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification completed {"clarificationId":"ZwKb8rGjfWFh_7p7WcchI","duration":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744155157-6c18c7f5307c","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":true,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"PCcpqEfabG4robhshcB1c","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744155317-849ff698e351","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification requires consent from both parties {"claimantConsent":true,"disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"hD_1H-I8O4DE5lvvTRyHI","disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"5WM_Dle-qjS8KdhibwWGw","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"5WM_Dle-qjS8KdhibwWGw","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"5WM_Dle-qjS8KdhibwWGw","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License revoked {"grantorId":"grantor-1","licenseId":"5WM_Dle-qjS8KdhibwWGw","reason":"License no longer needed","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"NFPZgMY3jDNaWBxr2dKiU","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-2","grantorId":"grantor-1","licenseId":"EicvibHJrFNkOoeXW66Cn","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"Mxc4SaaO152ptY3zugaX4","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation ratified {"delegationId":"Mxc4SaaO152ptY3zugaX4","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"Mxc4SaaO152ptY3zugaX4","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated action recorded {"actionId":"CXvhMa9ADCT5o61Y8GkRk","actionType":"action","delegationId":"Mxc4SaaO152ptY3zugaX4","service":"mediator-node","timestamp":"2026-02-10 17:22:35","withinScope":true}
[32minfo[39m: Delegation revoked {"delegationId":"Mxc4SaaO152ptY3zugaX4","delegatorId":"delegator-1","reason":"Delegation no longer needed","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/config/ConfigLoader.test.ts
  ConfigLoader
    load
      ✓ should load configuration from environment variables (2 ms)
      ✓ should use default values for optional fields (1 ms)
      ✓ should throw error for missing required CHAIN_ENDPOINT (22 ms)
      ✓ should throw error for missing required CHAIN_ID (1 ms)
      ✓ should throw error for missing required MEDIATOR_PRIVATE_KEY (1 ms)
      ✓ should throw error for missing required MEDIATOR_PUBLIC_KEY (1 ms)
      ✓ should require ANTHROPIC_API_KEY when llmProvider is anthropic
      ✓ should require OPENAI_API_KEY when llmProvider is openai (1 ms)
    consensusMode
      ✓ should load permissionless consensus mode (1 ms)
      ✓ should load dpos consensus mode
      ✓ should load poa consensus mode (1 ms)
      ✓ should load hybrid consensus mode
      ✓ should throw error for invalid consensus mode (1 ms)
      ✓ should default to permissionless when not specified (1 ms)
    llmProvider
      ✓ should load anthropic provider
      ✓ should load openai provider
      ✓ should load custom provider (1 ms)
      ✓ should throw error for invalid LLM provider (1 ms)
      ✓ should default to anthropic when not specified
    logLevel
      ✓ should load debug log level
      ✓ should load info log level (1 ms)
      ✓ should load warn log level
      ✓ should load error log level (1 ms)
      ✓ should default to info for invalid log level
      ✓ should default to info when not specified
    optional numeric fields
      ✓ should parse BONDED_STAKE_AMOUNT as number (1 ms)
      ✓ should parse MIN_EFFECTIVE_STAKE as number (1 ms)
      ✓ should parse FACILITATION_FEE_PERCENT as float
      ✓ should parse VECTOR_DIMENSIONS as integer (1 ms)
      ✓ should parse MAX_INTENTS_CACHE as integer
      ✓ should parse ACCEPTANCE_WINDOW_HOURS as integer (1 ms)
      ✓ should handle decimal values for BONDED_STAKE_AMOUNT
      ✓ should leave optional number fields undefined when not set (1 ms)
    optional string fields
      ✓ should load POA_AUTHORITY_KEY when provided
      ✓ should load REPUTATION_CHAIN_ENDPOINT when provided
      ✓ should load VECTOR_DB_PATH when provided
      ✓ should load LLM_MODEL when provided (1 ms)
    validation
      ✓ should throw error for negative facilitation fee (1 ms)
      ✓ should throw error for facilitation fee over 100 (1 ms)
      ✓ should allow facilitation fee of 0
      ✓ should allow facilitation fee of 100 (1 ms)
      ✓ should throw error for zero vector dimensions (1 ms)
      ✓ should throw error for negative vector dimensions
      ✓ should allow positive vector dimensions (3 ms)
    DPoS mode validation
      ✓ should warn when DPoS mode without MIN_EFFECTIVE_STAKE (1 ms)
      ✓ should accept DPoS mode with MIN_EFFECTIVE_STAKE
      ✓ should warn when Hybrid mode without MIN_EFFECTIVE_STAKE
    PoA mode validation
      ✓ should warn when PoA mode without POA_AUTHORITY_KEY
      ✓ should accept PoA mode with POA_AUTHORITY_KEY (1 ms)
      ✓ should warn when Hybrid mode without POA_AUTHORITY_KEY
    edge cases
      ✓ should use default when environment variable is empty string (1 ms)
      ✓ should handle whitespace in environment variables (1 ms)
      ✓ should handle very large numbers
      ✓ should handle all consensus modes with full configuration (1 ms)

[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"l_8by_bmBnlMZI1V2caDR","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"l_8by_bmBnlMZI1V2caDR","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"l_8by_bmBnlMZI1V2caDR","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"licenseId":"l_8by_bmBnlMZI1V2caDR","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"purpose_violation","violationId":"X3UaaWp_yNnLjg4YMGnZw","violatorId":"grantee-1"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744154899-71d0d3c8c82b","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744155404-82ccfdc9f743","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"k6yVHTg9UrtP6_9Bq4wTK","delegatorId":"delegator-1","powersCount":1,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation ratified {"delegationId":"k6yVHTg9UrtP6_9Bq4wTK","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"k6yVHTg9UrtP6_9Bq4wTK","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"delegationId":"k6yVHTg9UrtP6_9Bq4wTK","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"2UJ1M9y4sgHZL89eQWNZb","violatorId":"delegate-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"SFcnZ7nbTKxcst5oyX5Fo","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"SFcnZ7nbTKxcst5oyX5Fo","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"SFcnZ7nbTKxcst5oyX5Fo","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Failed to log audit event {"error":"Write failed","eventType":"test","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/burn/LoadMonitor.test.ts
  LoadMonitor
    Constructor and Initialization
      ✓ should initialize with default configuration (2 ms)
      ✓ should use custom target and max rates
      ✓ should use default values when config not provided
    Recording Submissions
      ✓ should record intent submission (1 ms)
      ✓ should record multiple intent submissions
      ✓ should record settlement and decrement active intents (1 ms)
      ✓ should not go below zero active intents
    Metrics Calculation
      ✓ should calculate intent submission rate (1 ms)
      ✓ should calculate settlement rate
      ✓ should calculate average burn amount (1 ms)
      ✓ should include timestamp in metrics
    Load Multiplier Calculation
      ✓ should maintain base multiplier when under target load
      ✓ should increase multiplier when above target load (1 ms)
      ✓ should use max multiplier when above max rate (1 ms)
      ✓ should apply smoothing factor for gradual transitions (1 ms)
      ✓ should update BurnManager when enabled (1 ms)
    Monitoring Lifecycle
      ✓ should start monitoring (1 ms)
      ✓ should stop monitoring
      ✓ should warn when starting already running monitor (1 ms)
      ✓ should calculate multiplier periodically when monitoring (1 ms)
    Load Statistics
      ✓ should provide comprehensive load stats (1 ms)
      ✓ should calculate load factor correctly (1 ms)
      ✓ should include historical averages (1 ms)
    History Tracking
      ✓ should store load history (1 ms)
      ✓ should limit history size (2 ms)
      ✓ should support limited history retrieval (1 ms)
    Cleanup and Reset
      ✓ should cleanup old records
      ✓ should reset all state
    Edge Cases
      ✓ should handle zero submissions gracefully (1 ms)
      ✓ should handle high submission burst
      ✓ should handle zero burn amounts
      ✓ should handle extreme load multiplier values (6 ms)

[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/security/SecurityReportGenerator.test.ts
  SecurityReportGenerator
    generateReport
      console format
        ✓ should generate console report (3 ms)
        ✓ should include vulnerability scan section (2 ms)
        ✓ should include recommendations (1 ms)
        ✓ should show risk level (1 ms)
        ✓ should show overall status (2 ms)
      json format
        ✓ should generate valid JSON report (2 ms)
        ✓ should include all suite results in JSON (5 ms)
      markdown format
        ✓ should generate markdown report (2 ms)
        ✓ should include vulnerability scan table (2 ms)
        ✓ should include test results table (1 ms)
        ✓ should show pass/fail status with emoji (2 ms)
      html format
        ✓ should generate valid HTML report (1 ms)
        ✓ should include styled summary grid (3 ms)
        ✓ should include test results table (2 ms)
        ✓ should include vulnerability scan section (2 ms)
        ✓ should include risk level badge with color (2 ms)
    risk level calculation
      ✓ should calculate critical risk level for critical findings (1 ms)
      ✓ should calculate high risk level for high findings (2 ms)
      ✓ should calculate medium risk level for medium findings (2 ms)
      ✓ should calculate none risk level when all pass (1 ms)
    recommendations
      ✓ should generate recommendations for failed tests (1 ms)
      ✓ should generate unique recommendations (2 ms)
    saveReport
      ✓ should save report to file (4 ms)
      ✓ should create directory if it does not exist (7 ms)
      ✓ should save HTML report correctly (4 ms)
      ✓ should save markdown report correctly (4 ms)
    edge cases
      ✓ should handle empty test results (1 ms)
      ✓ should handle missing vulnerability scan (2 ms)
      ✓ should handle empty findings (2 ms)

[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":100,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"MUkbzgOjqN0nMYbWWSE5R","violatorId":"user-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License automatically expired {"expiresAt":1770744155474,"licenseId":"SFcnZ7nbTKxcst5oyX5Fo","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Periodic expiry check completed {"expiredDelegations":0,"expiredLicenses":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/licensing-manager/licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher started {"healthInterval":200,"metricsInterval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/licensing-manager/delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/licensing-manager/violations","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: LicensingManager initialized {"dataPath":"./test-data/licensing-manager","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"gL_Uo7egXmJMrSh7qenPW","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"gL_Uo7egXmJMrSh7qenPW","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"-OdGFQPPvHXwWD2gnotkX","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"gL_Uo7egXmJMrSh7qenPW","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"-OdGFQPPvHXwWD2gnotkX","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"-OdGFQPPvHXwWD2gnotkX","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/licensing/LicensingManager.test.ts
  LicensingManager Integration Tests
    Initialization
      ✓ should initialize all managers successfully (16 ms)
    License Management
      ✓ should support full license lifecycle through unified API (16 ms)
      ✓ should query licenses by grantor (11 ms)
    Delegation Management
      ✓ should support full delegation lifecycle through unified API (22 ms)
    Authority Tracking
      ✓ should check license compliance (15 ms)
      ✓ should check delegation compliance (14 ms)
    Periodic Maintenance
      ✓ should check and expire licenses and delegations (114 ms)
    Statistics
      ✓ should provide comprehensive statistics (13 ms)

[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"0O1c4hsInpvGPXDRds2ZL","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"0O1c4hsInpvGPXDRds2ZL","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"0O1c4hsInpvGPXDRds2ZL","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"licenseId":"0O1c4hsInpvGPXDRds2ZL","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"purpose_violation","violationId":"Yk4fRJkO7iJnmsSc8avkM","violatorId":"grantee-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: License proposed {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"X0nJu5F8rt6gdwsgC8t76","proposedBy":"grantor-1","service":"mediator-node","subjectCount":1,"subjectType":"artifact","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License ratified {"grantorId":"grantor-1","humanAuthorship":true,"licenseId":"X0nJu5F8rt6gdwsgC8t76","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: License activated {"granteeId":"grantee-1","grantorId":"grantor-1","licenseId":"X0nJu5F8rt6gdwsgC8t76","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"licenseId":"X0nJu5F8rt6gdwsgC8t76","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"purpose_violation","violationId":"n6UuwcKMQuMlAYnKBQ3-S","violatorId":"grantee-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"X_zHHhfZiC-i0gLybp_t9","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation ratified {"delegationId":"X_zHHhfZiC-i0gLybp_t9","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"X_zHHhfZiC-i0gLybp_t9","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"7YLCePcwqIdTtgXFLDTsF","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation ratified {"delegationId":"7YLCePcwqIdTtgXFLDTsF","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"7YLCePcwqIdTtgXFLDTsF","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"delegationId":"7YLCePcwqIdTtgXFLDTsF","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"SIwVsphxy_YsAygOciGyc","violatorId":"delegate-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[32minfo[39m: Delegation proposed {"delegateId":"delegate-1","delegationId":"wxAAxULcAzIvsd6MRjeX8","delegatorId":"delegator-1","powersCount":2,"proposedBy":"delegator-1","redelegationDepth":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation ratified {"delegationId":"wxAAxULcAzIvsd6MRjeX8","delegatorId":"delegator-1","humanAuthorship":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegation activated {"delegateId":"delegate-1","delegationId":"wxAAxULcAzIvsd6MRjeX8","delegatorId":"delegator-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Scope violation recorded {"delegationId":"wxAAxULcAzIvsd6MRjeX8","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"drrGJvjvY6mzxo9uMiHI_","violatorId":"delegate-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"1bIh-AbuHe5zkAPP2jSx_","violatorId":"user-1"}
[32minfo[39m: Violation linked to dispute {"disputeId":"dispute-123","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationId":"1bIh-AbuHe5zkAPP2jSx_"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"Iq1qAO4Ybg8-QXmnoTyqT","violatorId":"user-1"}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-2","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"purpose_violation","violationId":"ch9btXhBIExxx76fVdOO2","violatorId":"user-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/security/VulnerabilityScanner.test.ts
  VulnerabilityScanner
    initialization
      ✓ should initialize with default patterns (3 ms)
      ✓ should have patterns for major vulnerability categories (3 ms)
      ✓ should allow adding custom patterns (2 ms)
    scanFile
      ✓ should detect eval() usage (5 ms)
      ✓ should detect new Function() usage (4 ms)
      ✓ should detect hardcoded credentials (5 ms)
      ✓ should detect weak cryptography (MD5) (4 ms)
      ✓ should detect weak cryptography (SHA1) (3 ms)
      ✓ should detect prototype pollution via __proto__ (4 ms)
      ✓ should detect innerHTML usage (4 ms)
      ✓ should detect insecure random number generation (3 ms)
      ✓ should not flag clean code (4 ms)
      ✓ should include line numbers in findings (3 ms)
      ✓ should include code snippet in findings (9 ms)
      ✓ should handle non-existent files gracefully (2 ms)
    scanDirectory
      ✓ should scan all TypeScript files in directory (5 ms)
      ✓ should exclude test files (6 ms)
      ✓ should exclude node_modules (7 ms)
      ✓ should return scan result with summary (5 ms)
      ✓ should pass when no critical or high findings (4 ms)
      ✓ should fail when critical findings exist (4 ms)
      ✓ should categorize findings by severity (4 ms)
      ✓ should handle empty directory (3 ms)
      ✓ should handle non-existent directory (1 ms)
    finding structure
      ✓ should include CWE IDs when available (4 ms)
      ✓ should include OWASP categories when available (3 ms)
      ✓ should include recommendations (3 ms)

[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"iOS_VaM-ckV_ix1-i1SIB","violatorId":"user-1"}
[32minfo[39m: Licenses loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: LicenseManager initialized {"dataPath":"./test-data/authority-tracker-licenses","licensesLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Delegated actions loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: DelegationManager initialized {"actionsLoaded":0,"dataPath":"./test-data/authority-tracker-delegations","delegationsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Violations loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":0}
[33mwarn[39m: Scope violation recorded {"licenseId":"license-1","service":"mediator-node","timestamp":"2026-02-10 17:22:35","type":"license_scope_violation","violationId":"iL7svJoEjq0ETrBeIIq3I","violatorId":"user-1"}
[32minfo[39m: Violations loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: AuthorityTracker initialized {"dataPath":"./test-data/authority-tracker","service":"mediator-node","timestamp":"2026-02-10 17:22:35","violationsLoaded":1}
PASS test/unit/burn/BurnAnalytics.test.ts
  BurnAnalytics
    Time Series Aggregation
      ✓ should aggregate burns by hour (2 ms)
      ✓ should aggregate burns by day (1 ms)
      ✓ should calculate correct averages
      ✓ should separate burns by type (1 ms)
    Trend Analysis
      ✓ should calculate trend metrics for day period (1 ms)
      ✓ should calculate growth rate (1 ms)
      ✓ should identify peak burn time
      ✓ should count active users correctly (1 ms)
    User Analytics
      ✓ should get analytics for a specific user (1 ms)
      ✓ should return null for non-existent user
      ✓ should track first and last burn timestamps (1 ms)
      ✓ should categorize burns by type (1 ms)
      ✓ should calculate days since first burn (1 ms)
      ✓ should determine if user is active (burned in last 7 days) (1 ms)
    Leaderboards
      ✓ should generate leaderboard with top burners by amount (1 ms)
      ✓ should generate leaderboard with top burners by volume
      ✓ should list most recent burners (1 ms)
      ✓ should respect limit parameter (1 ms)
    Dashboard Metrics
      ✓ should generate comprehensive dashboard metrics (1 ms)
      ✓ should calculate overview metrics correctly (1 ms)
      ✓ should calculate today metrics (4 ms)
      ✓ should calculate growth rates (1 ms)
      ✓ should show distribution by burn type (1 ms)
      ✓ should show distribution by time of day (3 ms)
      ✓ should track load multiplier metrics (1 ms)
    Forecasting
      ✓ should generate forecast based on historical data (1 ms)
      ✓ should return zero forecast when insufficient data (1 ms)
      ✓ should calculate confidence based on data quality
    Data Updates
      ✓ should allow updating analytics data (1 ms)
    All User Analytics
      ✓ should get analytics for all users
      ✓ should sort users by total amount burned (1 ms)

[32minfo[39m: Contradiction analysis complete {"confidence":0.9,"hasContradiction":true,"service":"mediator-node","settlementId":"settlement-123","severity":"severe","timestamp":"2026-02-10 17:22:35"}
PASS test/licensing/AuthorityTracker.test.ts
  AuthorityTracker
    Violation Recording
      ✓ should record a license violation successfully (14 ms)
      ✓ should reject violation without violator ID (9 ms)
    License Compliance Checking
      ✓ should pass compliance check for valid usage (12 ms)
      ✓ should detect purpose violation (12 ms)
      ✓ should detect limit violation (11 ms)
    Delegation Compliance Checking
      ✓ should pass compliance check for valid action (10 ms)
      ✓ should detect action outside delegated powers (12 ms)
      ✓ should detect constraint violation (10 ms)
    MP-03 Integration
      ✓ should link violation to dispute (8 ms)
    Statistics
      ✓ should return comprehensive statistics (10 ms)
    Persistence
      ✓ should persist violations to disk (9 ms)
      ✓ should load violations from disk on initialization (8 ms)

[32minfo[39m: Contradiction analysis complete {"confidence":0.3,"hasContradiction":false,"service":"mediator-node","settlementId":"settlement-123","severity":"minor","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error performing LLM analysis {"error":{},"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contradiction analysis complete {"confidence":0,"hasContradiction":false,"service":"mediator-node","settlementId":"settlement-123","severity":"minor","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Error parsing analysis response {"error":{},"responseText":"This is not JSON","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contradiction analysis complete {"confidence":0,"hasContradiction":false,"service":"mediator-node","settlementId":"settlement-123","severity":"minor","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contradiction analysis complete {"confidence":1,"hasContradiction":true,"service":"mediator-node","settlementId":"settlement-123","severity":"moderate","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contradiction analysis complete {"confidence":0.9,"hasContradiction":true,"service":"mediator-node","settlementId":"settlement-123","severity":"moderate","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contradiction analysis complete {"confidence":0.9,"hasContradiction":true,"service":"mediator-node","settlementId":"settlement-123","severity":"moderate","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/challenge/ChallengeDetector.test.ts
  ChallengeDetector
    analyzeSettlement
      ✓ should detect contradictions when settlement violates constraints (3 ms)
      ✓ should not flag reasonable compromises as contradictions (2 ms)
      ✓ should handle LLM errors gracefully (1 ms)
      ✓ should handle malformed LLM responses (2 ms)
      ✓ should sanitize confidence values to 0-1 range (1 ms)
      ✓ should validate affectedParty values (1 ms)
      ✓ should validate severity values (1 ms)
    shouldChallenge
      ✓ should return true when confidence meets threshold
      ✓ should return false when confidence below threshold (1 ms)
      ✓ should return false when no contradiction detected (1 ms)
      ✓ should return false when no constraints violated
      ✓ should respect custom confidence threshold from config (1 ms)

[31merror[39m: Failed to get environment status {"error":"Unavailable","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Monitoring publisher stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/monitoring/MonitoringPublisher.test.ts
  MonitoringPublisher
    Initialization
      ✓ should create monitoring publisher (5 ms)
      ✓ should use config intervals (5 ms)
    Publishing Health Updates
      ✓ should publish health update (13 ms)
      ✓ should not publish if no health report available (1 ms)
      ✓ should include snapshot in health update (8 ms)
    Publishing Metrics Snapshots
      ✓ should publish metrics snapshot (2 ms)
      ✓ should not publish if no snapshot available (1 ms)
      ✓ should include health in metrics snapshot (8 ms)
    Periodic Publishing
      ✓ should publish updates on start (5 ms)
      ✓ should publish periodically (261 ms)
      ✓ should stop publishing when stopped (261 ms)
    On-Demand Publishing
      ✓ should publish both health and metrics on demand (9 ms)
    Empty Data Handling
      ✓ should create empty snapshot when none available (4 ms)
      ✓ should create empty health report when none available (1 ms)
    Lifecycle Management
      ✓ should start publishing (2 ms)
      ✓ should stop publishing (1 ms)
      ✓ should handle multiple start calls (3 ms)
      ✓ should handle multiple stop calls (1 ms)
    Integration
      ✓ should publish real monitoring data (10 ms)
      ✓ should respect configured intervals (160 ms)

[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"settlement-001","itemType":"settlement","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":2}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":0}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-002","errors":1,"frozenCount":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/security/SecurityTestRunner.test.ts
  SecurityTestRunner
    initialization
      ✓ should initialize with default test cases (4 ms)
      ✓ should have tests for multiple categories (3 ms)
      ✓ should include prompt injection tests (3 ms)
      ✓ should include path traversal tests (3 ms)
      ✓ should include input validation tests (3 ms)
    runAllTests
      ✓ should run all test cases and vulnerability scan (10 ms)
      ✓ should include summary with counts (7 ms)
      ✓ should set overallPassed based on test results (5 ms)
      ✓ should include test duration for each test (6 ms)
      ✓ should include details for each test (7 ms)
    runTestsByCategory
      ✓ should run only prompt injection tests (4 ms)
      ✓ should run only path traversal tests (3 ms)
      ✓ should return empty array for unknown category (3 ms)
    runVulnerabilityScan
      ✓ should run vulnerability scan on source directory (4 ms)
    addTestCase
      ✓ should allow adding custom test cases (3 ms)
      ✓ should run added custom test cases (3 ms)
    prompt injection tests
      ✓ should detect ignore instructions pattern (3 ms)
      ✓ should detect role manipulation pattern (4 ms)
      ✓ should detect system commands pattern (3 ms)
      ✓ should detect jailbreak attempts (3 ms)
      ✓ should allow legitimate content (3 ms)
    path traversal tests
      ✓ should block parent directory traversal (3 ms)
      ✓ should block encoded traversal (3 ms)
      ✓ should allow valid paths (3 ms)
    input validation tests
      ✓ should detect and sanitize malicious input (4 ms)
      ✓ should allow clean input (3 ms)
      ✓ should truncate oversized input (5 ms)
      ✓ should remove control characters (4 ms)
      ✓ should escape XML/HTML tags (3 ms)
    error handling
      ✓ should handle test case errors gracefully (3 ms)

[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
PASS test/unit/chain/transformers.test.ts
  NatLangChain Transformers
    entryToIntent
      ✓ should transform NatLangChain entry to Intent (2 ms)
      ✓ should extract desires from content when not in metadata (1 ms)
      ✓ should extract constraints from content
      ✓ should generate hash if not provided in metadata
      ✓ should map validation_status to IntentStatus (1 ms)
    intentToEntry
      ✓ should transform Intent to NatLangChain entry (1 ms)
      ✓ should handle intent with empty desires
    settlementToEntry
      ✓ should transform ProposedSettlement to NatLangChain entry (2 ms)
    settlementToContractProposal
      ✓ should transform settlement to NatLangChain contract proposal format (1 ms)
    contractToSettlement
      ✓ should transform NatLangChain contract to ProposedSettlement
    challengeToEntry
      ✓ should transform Challenge to NatLangChain entry
    burnToEntry
      ✓ should transform burn data to NatLangChain entry (1 ms)
    parseIntentsFromResponse
      ✓ should parse array response (1 ms)
      ✓ should parse response with entries array
      ✓ should parse response with intents array
      ✓ should return empty array for invalid response

[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[33mwarn[39m: Mutation attempt on frozen item recorded {"attemptedBy":"user-002","disputeId":"dispute-001","itemId":"intent-001","operationType":"update","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Mutation attempt on frozen item recorded {"attemptedBy":"user-003","disputeId":"dispute-001","itemId":"intent-001","operationType":"delete","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"settlement-001","itemType":"settlement","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":2}
[32minfo[39m: Items unfrozen for resolved dispute {"disputeId":"dispute-001","service":"mediator-node","timestamp":"2026-02-10 17:22:35","unfrozenCount":2}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Items unfrozen for resolved dispute {"disputeId":"dispute-999","service":"mediator-node","timestamp":"2026-02-10 17:22:35","unfrozenCount":0}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[31merror[39m: Failed to get alerts from SIEM {"error":"Fetch failed","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"settlement-001","itemType":"settlement","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":2}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Evidence snapshot created {"disputeId":"dispute-001","exportPath":"test-data/evidence/snapshots/snapshot-dispute-001-1770744155799.json","itemCount":2,"service":"mediator-node","snapshotId":"snapshot-dispute-001-1770744155799","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155799}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155802}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155802}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155803}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[33mwarn[39m: No frozen items found for dispute {"disputeId":"dispute-999","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155804}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744155805}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"user-b","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:35","warning":"This method should only be used in development/testing"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/websocket/AuthenticationService.test.ts
  AuthenticationService
    Message Validation
      ✓ should reject messages with missing identity (2 ms)
      ✓ should reject messages with missing signature
      ✓ should reject messages with missing timestamp (1 ms)
    Timestamp Validation
      ✓ should accept fresh timestamps (1 ms)
      ✓ should reject old timestamps
      ✓ should reject future timestamps
    Nonce Validation
      ✓ should require nonce when configured
      ✓ should accept unique nonces (1 ms)
      ✓ should reject reused nonces (1 ms)
      ✓ should work without nonce requirement (1 ms)
    Signature Verification
      ✓ should verify valid hash-based signatures (1 ms)
      ✓ should reject invalid signatures
      ✓ should reject signatures with wrong identity (1 ms)
      ✓ should reject signatures with wrong timestamp (1 ms)
    Custom Verification
      ✓ should use custom verification function when provided
    Helper Methods
      ✓ should generate unique nonces
      ✓ should create consistent signatures
      ✓ should create different signatures for different inputs
    Resource Cleanup
      ✓ should cleanup resources on destroy (1 ms)

[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-002","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":2,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":2}
[32minfo[39m: Item frozen {"disputeId":"dispute-002","itemId":"settlement-001","itemType":"settlement","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-002","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[33mwarn[39m: Mutation attempt on frozen item recorded {"attemptedBy":"user-003","disputeId":"dispute-001","itemId":"intent-001","operationType":"update","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Frozen items loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Item frozen {"disputeId":"dispute-001","itemId":"intent-001","itemType":"intent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Contested items frozen {"disputeId":"dispute-001","errors":0,"frozenCount":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35","totalItems":1}
[32minfo[39m: Frozen items loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: EvidenceManager initialized {"dataPath":"./test-data/evidence","frozenItemsLoaded":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/dispute/EvidenceManager.test.ts
  EvidenceManager
    freezeContestedItems
      ✓ should freeze contested items successfully (12 ms)
      ✓ should handle empty contested items (2 ms)
      ✓ should detect already frozen items (4 ms)
    isItemFrozen
      ✓ should return true for frozen items (3 ms)
      ✓ should return false for unfrozen items (2 ms)
    canMutateItem
      ✓ should allow mutation of unfrozen items (2 ms)
      ✓ should prevent mutation of frozen items (5 ms)
    recordMutationAttempt
      ✓ should record mutation attempts on frozen items (5 ms)
      ✓ should not record attempts on unfrozen items (1 ms)
    unfreezeItemsForDispute
      ✓ should unfreeze all items for a dispute (8 ms)
      ✓ should return 0 for non-existent disputes (6 ms)
    createEvidenceSnapshot
      ✓ should create a snapshot of frozen items (8 ms)
      ✓ should return null for disputes with no frozen items (2 ms)
    autoFreezeIfEnabled
      ✓ should freeze items when autoFreezeEvidence is true (3 ms)
      ✓ should not freeze items when autoFreezeEvidence is false (2 ms)
    getStats
      ✓ should return accurate statistics (7 ms)
    persistence
      ✓ should persist frozen items to disk (5 ms)

[31merror[39m: Semantic search failed {"error":{},"query":"test query","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/chain/ChainClient.test.ts
  ChainClient
    constructor
      ✓ should create ChainClient with config (2 ms)
      ✓ should create ChainClient from MediatorConfig (1 ms)
    checkHealth
      ✓ should return healthy status when API responds (1 ms)
      ✓ should return unhealthy status when API fails (1002 ms)
    getPendingIntents
      ✓ should fetch and transform pending intents (2 ms)
      ✓ should handle empty response (1 ms)
      ✓ should filter by timestamp when since option provided (1 ms)
    submitIntent
      ✓ should submit intent and return success
      ✓ should return error on failed submission (1 ms)
    submitSettlement
      ✓ should submit settlement successfully (1 ms)
    getSettlementStatus
      ✓ should fetch settlement status via semantic search
    submitChallenge
      ✓ should submit challenge and return success (1 ms)
    submitBurn
      ✓ should submit burn transaction (1 ms)
    submitPayout
      ✓ should submit payout claim (1 ms)
    searchSemantic
      ✓ should perform semantic search
      ✓ should return empty array on search failure (1 ms)
    getChain
      ✓ should fetch full chain data (1 ms)
    validateChain
      ✓ should return valid chain status
      ✓ should return invalid status with issues (1 ms)

FAIL test/unit/sybil/SubmissionTracker.test.ts
  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'on')

      11 |  * - Max 20MB per file
      12 |  */
    > 13 | const errorRotateTransport = new DailyRotateFile({
         |                              ^
      14 |   filename: `${logDir}/error-%DATE%.log`,
      15 |   datePattern: 'YYYY-MM-DD',
      16 |   level: 'error',

      at BubbleEvents (node_modules/file-stream-rotator/FileStreamRotator.js:690:13)
      at Object.<anonymous>.FileStreamRotator.getStream (node_modules/file-stream-rotator/FileStreamRotator.js:545:9)
      at new DailyRotateFile (node_modules/winston-daily-rotate-file/daily-rotate-file.js:81:57)
      at Object.<anonymous> (src/utils/logger.ts:13:30)
      at Object.<anonymous> (src/sybil/SubmissionTracker.ts:12:1)
      at Object.<anonymous> (test/unit/sybil/SubmissionTracker.test.ts:1:1)

[31merror[39m: Failed to query audit logs {"error":"Query failed","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744155404-82ccfdc9f743","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744155909-20ee7266bf04","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification requires consent from both parties {"claimantConsent":false,"disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":false,"clarificationId":"cZmnB2vBDu8C6X09MAtf7","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Participation consent updated {"clarificationId":"cZmnB2vBDu8C6X09MAtf7","consent":true,"party":"claimant","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification requires consent from both parties {"claimantConsent":true,"disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"iAzPqnzDk4ZZfyqT3XH91","disputeId":"dispute-001","respondentConsent":false,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Participation consent updated {"clarificationId":"iAzPqnzDk4ZZfyqT3XH91","consent":true,"party":"respondent","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"Y_ZCcq3uyxxV0KH366HDh","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"twuncbxumMwyS9CxMomq3","disputeId":"dispute-002","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"Y_ZCcq3uyxxV0KH366HDh","service":"mediator-node","statementId":"lk2dlm8hjYTn1KaKMb6SB","statementType":"claim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"Y_ZCcq3uyxxV0KH366HDh","service":"mediator-node","statementId":"MY1gqYjKSrlGK3u8iGrzc","statementType":"counterclaim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"twuncbxumMwyS9CxMomq3","service":"mediator-node","statementId":"Q77mTxO8ppo7Edo6oz6oM","statementType":"claim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification completed {"clarificationId":"Y_ZCcq3uyxxV0KH366HDh","duration":4,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification analyzed {"ambiguities":1,"clarificationId":"twuncbxumMwyS9CxMomq3","factualDisagreements":1,"interpretiveDisagreements":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":0,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":0,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarification initiated {"claimantConsent":true,"clarificationId":"hwS5mOH17QCEHyPN1_V8P","disputeId":"dispute-001","respondentConsent":true,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Statement submitted {"clarificationId":"hwS5mOH17QCEHyPN1_V8P","service":"mediator-node","statementId":"4RI5F-D5NiGHb9zOwn-a5","statementType":"claim","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: Clarifications loaded from disk {"count":1,"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
[32minfo[39m: ClarificationManager initialized {"clarificationsLoaded":1,"dataPath":"./test-data/clarifications","service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/dispute/ClarificationManager.test.ts
  ClarificationManager
    initiateClarification
      ✓ should initiate clarification with consent from both parties (16 ms)
      ✓ should allow initiation even without full consent (9 ms)
      ✓ should prevent duplicate clarifications for same dispute (11 ms)
      ✓ should respect allowDisputeClarification config (6 ms)
    submitStatement
      ✓ should submit claim statement successfully (112 ms)
      ✓ should submit counterclaim statement successfully (15 ms)
      ✓ should handle statements with evidence references (313 ms)
      ✓ should prevent statements on completed clarifications (6 ms)
      ✓ should handle non-existent clarification (5 ms)
    analyzeClarification
      ✓ should analyze clarification and identify disagreements (16 ms)
      ✓ should return null for non-existent clarification (4 ms)
      ✓ should return null when no statements exist (5 ms)
      ✓ should store multiple analyses (15 ms)
    completeClarification
      ✓ should complete clarification successfully (5 ms)
      ✓ should prevent duplicate completion (6 ms)
      ✓ should handle non-existent clarification (3 ms)
    getters
      ✓ should get clarifications for dispute (4 ms)
      ✓ should get participation status (6 ms)
      ✓ should return null for non-existent clarification participation (604 ms)
    updateParticipationConsent
      ✓ should update claimant consent (6 ms)
      ✓ should update respondent consent (9 ms)
      ✓ should handle non-existent clarification (3 ms)
    getStats
      ✓ should return accurate statistics (11 ms)
    persistence
      ✓ should persist clarifications to disk and load them (7 ms)

[32minfo[39m: Health monitoring stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:35"}
PASS test/unit/monitoring/HealthMonitor.test.ts
  HealthMonitor
    Component Registration
      ✓ should register a component health checker (3 ms)
      ✓ should unregister a component health checker (2 ms)
    Health Check
      ✓ should perform a health check (12 ms)
      ✓ should check all registered components (10 ms)
      ✓ should handle component check failures (8 ms)
    Resource Metrics
      ✓ should collect CPU metrics (8 ms)
      ✓ should collect memory metrics (3 ms)
      ✓ should include uptime (8 ms)
    Overall Status Calculation
      ✓ should return healthy when all components are healthy (3 ms)
      ✓ should return critical when any component is critical (9 ms)
      ✓ should return unhealthy when any component is unhealthy (4 ms)
      ✓ should return degraded when any component is degraded (8 ms)
    Error Tracking
      ✓ should record errors (1 ms)
      ✓ should calculate error rate (14 ms)
      ✓ should clean up old error timestamps (3 ms)
    Metrics Update
      ✓ should update operational metrics (7 ms)
      ✓ should partially update metrics (4 ms)
    Monitoring Lifecycle
      ✓ should start monitoring (8 ms)
      ✓ should stop monitoring (3 ms)
      ✓ should perform periodic health checks (1209 ms)
    Simple Checker Helper
      ✓ should create a simple checker that returns healthy (1 ms)
      ✓ should create a simple checker that returns unhealthy (1 ms)
      ✓ should handle async check functions (10 ms)
      ✓ should handle checker errors (1 ms)
    Last Health Report
      ✓ should return undefined before first check
      ✓ should return last report after check (7 ms)
      ✓ should update last report on subsequent checks (19 ms)

[32minfo[39m: Disconnected from Boundary Daemon {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
PASS test/unit/security/BoundaryDaemonClient.test.ts
  BoundaryDaemonClient
    constructor
      ✓ should create client with default configuration (4 ms)
      ✓ should create client with custom configuration (1 ms)
      ✓ should configure Unix socket path when provided (1 ms)
    connect
      ✓ should successfully connect when health endpoint returns 200 (2 ms)
      ✓ should fail to connect when health endpoint returns error (2 ms)
    getEnvironmentStatus
      ✓ should fetch environment status successfully (2 ms)
      ✓ should handle status fetch errors (202 ms)
    requestPolicyDecision
      ✓ should request policy decision and return result (1 ms)
      ✓ should return deny decision when policy rejects (1 ms)
      ✓ should return fallback decision when daemon is unavailable (fail-closed) (203 ms)
      ✓ should return fallback decision when daemon is unavailable (fail-open) (203 ms)
    isActionAllowed
      ✓ should return true when action is allowed (1 ms)
      ✓ should return false when action is denied (1 ms)
    logAuditEvent
      ✓ should log audit event successfully (1 ms)
      ✓ should handle audit logging errors (201 ms)
    logSecurityAction
      ✓ should log security action with proper structure (1 ms)
    logAccessDecision
      ✓ should log allowed access decision (1 ms)
      ✓ should log blocked access decision (1 ms)
    getCurrentMode
      ✓ should return current boundary mode
      ✓ should return cached mode when daemon is unavailable (203 ms)
    isNetworkAllowed
      ✓ should return true for OPEN mode (1 ms)
      ✓ should return true for RESTRICTED mode
      ✓ should return true for TRUSTED mode (1 ms)
      ✓ should return false for AIRGAP mode
      ✓ should return false for COLDROOM mode
      ✓ should return false for LOCKDOWN mode (1 ms)
    isInLockdown
      ✓ should return true when in LOCKDOWN mode (1 ms)
      ✓ should return false when not in LOCKDOWN mode (1 ms)
    queryAuditLogs
      ✓ should query audit logs with filters (1 ms)
      ✓ should handle query errors (202 ms)
    healthCheck
      ✓ should return healthy status when daemon is reachable (1 ms)
      ✓ should return unhealthy status when daemon is unreachable
      ✓ should include failOpen status in health check (1 ms)
    disconnect
      ✓ should mark client as disconnected (1 ms)
    retry logic
      ✓ should retry failed requests (202 ms)

[31merror[39m: Failed to acknowledge alert {"alertId":"nonexistent","error":"Not found","service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744155909-20ee7266bf04","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744156415-9dd18043e19e","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[33mwarn[39m: High error rate detected (15.0 errors/min) {"service":"mediator-node","severity":"error","timestamp":"2026-02-10 17:22:36","type":"high_error_rate"}
[33mwarn[39m: High error rate detected (15.0 errors/min) {"service":"mediator-node","severity":"error","timestamp":"2026-02-10 17:22:36","type":"high_error_rate"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[33mwarn[39m: High event publish latency detected (P95: 2000.00ms) {"service":"mediator-node","severity":"warning","timestamp":"2026-02-10 17:22:36","type":"high_latency"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics started {"interval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics started {"interval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics started {"interval":100,"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
[32minfo[39m: Performance analytics stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:36"}
PASS test/unit/monitoring/PerformanceAnalytics.test.ts
  PerformanceAnalytics
    Event Recording
      ✓ should record events (6 ms)
      ✓ should track events by type (1 ms)
    Latency Tracking
      ✓ should record event publish latency (2 ms)
      ✓ should record LLM request latency (2 ms)
      ✓ should calculate latency percentiles (2 ms)
      ✓ should trim old latency measurements (10 ms)
      ✓ should handle empty latency measurements (1 ms)
    WebSocket Metrics
      ✓ should record incoming messages (1 ms)
      ✓ should record outgoing messages (1 ms)
      ✓ should calculate message rate (101 ms)
      ✓ should calculate bandwidth (102 ms)
    Operation Recording
      ✓ should record operations
      ✓ should increment operation counters (1 ms)
    Error Tracking
      ✓ should record errors
      ✓ should calculate error rate
      ✓ should clean up old error timestamps (1 ms)
    Snapshot Management
      ✓ should capture a snapshot (1 ms)
      ✓ should store snapshots (1 ms)
      ✓ should respect snapshot retention limit (1 ms)
      ✓ should get current snapshot
      ✓ should calculate event rate (102 ms)
    Analytics Summary
      ✓ should generate analytics summary (2 ms)
      ✓ should calculate aggregate statistics (1 ms)
      ✓ should calculate peak rates (151 ms)
    Trend Analysis
      ✓ should detect increasing trend (503 ms)
      ✓ should detect stable trend (1007 ms)
    Alert Generation
      ✓ should create alert for high latency (2 ms)
      ✓ should create alert for high error rate (1 ms)
      ✓ should clear alerts (1 ms)
      ✓ should respect alert retention limit (15 ms)
    Monitoring Lifecycle
      ✓ should start monitoring (1 ms)
      ✓ should stop monitoring (1 ms)
      ✓ should capture periodic snapshots (202 ms)
    Statistics
      ✓ should reset WebSocket metrics between snapshots
      ✓ should track cumulative operation counts (1 ms)

[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[31merror[39m: Failed to submit event to SIEM {"error":"Persistent failure","name":"fail_test","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: Alert stream stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: Disconnected from Boundary SIEM {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
PASS test/unit/security/BoundarySIEMClient.test.ts
  BoundarySIEMClient
    constructor
      ✓ should create client with default configuration (7 ms)
      ✓ should create client with custom configuration (1 ms)
    connect
      ✓ should successfully connect when health endpoint returns 200 (3 ms)
      ✓ should fail to connect when health endpoint returns non-200 (2 ms)
      ✓ should handle connection errors gracefully (3 ms)
    submitEvent
      ✓ should submit a single event successfully (1 ms)
      ✓ should enrich event with timestamp and source (8 ms)
      ✓ should handle submission errors (603 ms)
    batch event submission
      ✓ should queue events when batching is enabled (3 ms)
      ✓ should auto-flush when batch size is reached (2 ms)
      ✓ should flush events on demand (1 ms)
    logBlockchainEvent
      ✓ should log blockchain events with correct category (1 ms)
    logAuthEvent
      ✓ should log successful authentication events (1 ms)
      ✓ should log failed authentication with higher severity (2 ms)
    logPolicyViolation
      ✓ should log policy violations with high severity (1 ms)
    logThreatDetection
      ✓ should log threat detection with MITRE ATT&CK context (1 ms)
    logSettlementEvent
      ✓ should log settlement lifecycle events (1 ms)
    getAlerts
      ✓ should fetch alerts from SIEM (2 ms)
      ✓ should handle alert fetch errors (602 ms)
    acknowledgeAlert
      ✓ should acknowledge an alert successfully (1 ms)
      ✓ should handle acknowledge errors (602 ms)
    queryEvents
      ✓ should query events with filters (1 ms)
    healthCheck
      ✓ should return healthy status when SIEM is reachable (1 ms)
      ✓ should return unhealthy status when SIEM is unreachable (1 ms)
    disconnect
      ✓ should flush pending events on disconnect (1 ms)
    retry logic
      ✓ should retry failed requests with exponential backoff (603 ms)
      ✓ should fail after max retry attempts (202 ms)

[33mwarn[39m: Connection authentication timeout {"connectionId":"conn-1770744155317-849ff698e351","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1008,"connectionId":"conn-1770744155317-849ff698e351","identity":"unauthenticated","reason":"Authentication timeout","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":true,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157324-57217e777fe8","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: Using development-only hash-based authentication {"environment":"test","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:37","warning":"This method should only be used in development/testing"}
[32minfo[39m: Authentication successful {"identity":"test-user","service":"mediator-node","timestamp":1770744157325}
[32minfo[39m: Client authenticated {"connectionId":"conn-1770744157324-57217e777fe8","identity":"test-user","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157324-57217e777fe8","identity":"test-user","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157487-a4d4280b81ba","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157487-a4d4280b81ba","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157494-452dca7d98ad","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157494-452dca7d98ad","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157503-9c9be8235603","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157503-9c9be8235603","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157512-fb21d9be9062","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157513-5f3308ef3c82","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157513-5f3308ef3c82","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157512-fb21d9be9062","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157520-3929363919a1","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157520-3929363919a1","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157679-5c5c63dfe7a4","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157680-cdc7cbc02d93","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157680-cdc7cbc02d93","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744157679-5c5c63dfe7a4","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9001,"service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744157983-12910828d0a3","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:37"}
[32minfo[39m: WebSocket connection closed {"code":1000,"connectionId":"conn-1770744157983-12910828d0a3","identity":"unauthenticated","reason":"Test disconnect","service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
PASS test/websocket/WebSocketServer.test.ts
  WebSocketServer
    Connection Management
      ✓ should accept client connections (36 ms)
      ✓ should track active connections (161 ms)
      ✓ should send connection acknowledgment (10 ms)
      ✓ should handle client disconnect (309 ms)
      ✓ should enforce max connections limit (309 ms)
    Authentication
      ✓ should require authentication when enabled (158 ms)
      ✓ should close connection on auth timeout (2010 ms)
      ✓ should authenticate valid clients (164 ms)
    Subscription Management
      ✓ should handle subscription requests (7 ms)
      ✓ should handle unsubscribe requests (9 ms)
      ✓ should update existing subscriptions (8 ms)
    Broadcasting
      ✓ should broadcast messages to all connections (9 ms)
      ✓ should send to specific connections (157 ms)
    Statistics
      ✓ should provide server statistics (306 ms)
    Disconnection
      ✓ should allow manual disconnection of clients (157 ms)

[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744156415-9dd18043e19e","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744158421-b7d584a6bf90","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744158421-b7d584a6bf90","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744158830-578c915024f6","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:38"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744158830-578c915024f6","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[33mwarn[39m: WebSocket server configured with wildcard CORS origin (*). This is not recommended for production. {"service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[32minfo[39m: WebSocket server started {"authRequired":false,"host":"0.0.0.0","port":9002,"service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744159241-748cdfc2bc47","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[32minfo[39m: WebSocket connection established {"connectionId":"conn-1770744159243-989c7a0d2f0f","ip":"127.0.0.1","origin":"","service":"mediator-node","timestamp":"2026-02-10 17:22:39"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744159243-989c7a0d2f0f","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:40"}
[32minfo[39m: WebSocket connection closed {"code":1005,"connectionId":"conn-1770744159241-748cdfc2bc47","identity":"unauthenticated","reason":"","service":"mediator-node","timestamp":"2026-02-10 17:22:40"}
[32minfo[39m: WebSocket server stopped {"service":"mediator-node","timestamp":"2026-02-10 17:22:40"}
PASS test/websocket/EventPublisher.test.ts (6.48 s)
  EventPublisher
    Event Publishing
      ✓ should publish events to subscribed clients (253 ms)
      ✓ should not publish to unsubscribed clients (409 ms)
      ✓ should filter events by party (505 ms)
      ✓ should filter events by settlement ID (506 ms)
      ✓ should filter events by receipt ID (506 ms)
    Batch Processing
      ✓ should handle high-volume event publishing (2006 ms)
    Statistics
      ✓ should track publishing statistics (408 ms)
      ✓ should track filtered events (409 ms)
    Multiple Clients
      ✓ should publish to multiple clients with different subscriptions (1007 ms)

A worker process has failed to exit gracefully and has been force exited. This is likely caused by tests leaking due to improper teardown. Try running with --detectOpenHandles to find leaks. Active timers can also cause this, ensure that .unref() was called on them.
Summary of all failing tests
FAIL test/unit/mapping/VectorDatabase.test.ts (7.394 s)
  ● VectorDatabase › Initialization - Error Handling › should handle corrupted intent map file

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

      247 |       mockedFs.readFileSync.mockReturnValue('invalid json {]');
      248 |
    > 249 |       await expect(vectorDb.initialize()).rejects.toThrow();
          |             ^
      250 |     });
      251 |   });
      252 |

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/mapping/VectorDatabase.test.ts:249:13)

FAIL test/unit/consensus/AuthorityManager.test.ts (7.594 s)
  ● AuthorityManager › loadAuthoritySet › should load authority set from chain successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/consensus/authorities"
    Received: "https://chain.example.com/api/v1/consensus/authorities", {"timeout": 10000}

    Number of calls: 1

      78 |       await authorityManager.loadAuthoritySet();
      79 |
    > 80 |       expect(mockAxios.get).toHaveBeenCalledWith(
         |                             ^
      81 |         `${config.chainEndpoint}/api/v1/consensus/authorities`
      82 |       );
      83 |

      at Object.<anonymous> (test/unit/consensus/AuthorityManager.test.ts:80:29)

  ● AuthorityManager › requestAuthorization › should submit authorization request successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/governance/proposals", ObjectContaining {"description": Any<String>, "parameters": {"publicKey": "mediator_pub_key_123"}, "proposerId": "mediator_pub_key_123", "timestamp": Any<Number>, "title": StringContaining "mediator_pub_key_123", "type": "authority_add"}
    Received: "https://chain.example.com/api/v1/governance/proposals", {"description": "Request to join the mediator authority set", "parameters": {"publicKey": "mediator_pub_key_123"}, "proposerId": "mediator_pub_key_123", "timestamp": 1770744152470, "title": "Add mediator_pub_key_123 to Authority Set", "type": "authority_add"}, {"timeout": 15000}

    Number of calls: 1

      347 |
      348 |       expect(result).toBe(true);
    > 349 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      350 |         `${config.chainEndpoint}/api/v1/governance/proposals`,
      351 |         expect.objectContaining({
      352 |           type: 'authority_add',

      at Object.<anonymous> (test/unit/consensus/AuthorityManager.test.ts:349:30)

FAIL test/unit/consensus/StakeManager.test.ts (7.621 s)
  ● StakeManager › bondStake › should bond stake successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "https://chain.example.com/api/v1/stake/bond",
      {"amount": 5000, "mediatorId": "mediator_pub_key_123", "timestamp": 1770744152397},
    + {"timeout": 15000},

    Number of calls: 1

      88 |
      89 |       expect(result).toBe(true);
    > 90 |       expect(mockAxios.post).toHaveBeenCalledWith(
         |                              ^
      91 |         `${config.chainEndpoint}/api/v1/stake/bond`,
      92 |         {
      93 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:90:30)

  ● StakeManager › unbondStake › should initiate unbonding successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    - Expected
    + Received

      "https://chain.example.com/api/v1/stake/unbond",
      {"mediatorId": "mediator_pub_key_123", "timestamp": 1770744152469},
    + {"timeout": 15000},

    Number of calls: 1

      177 |
      178 |       expect(result).toBe(true);
    > 179 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      180 |         `${config.chainEndpoint}/api/v1/stake/unbond`,
      181 |         {
      182 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:179:30)

  ● StakeManager › loadDelegations › should load delegations from chain successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/delegations/mediator_pub_key_123"
    Received: "https://chain.example.com/api/v1/delegations/mediator_pub_key_123", {"timeout": 10000}

    Number of calls: 1

      237 |       await stakeManager.loadDelegations();
      238 |
    > 239 |       expect(mockAxios.get).toHaveBeenCalledWith(
          |                             ^
      240 |         `${config.chainEndpoint}/api/v1/delegations/${config.mediatorPublicKey}`
      241 |       );
      242 |

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:239:29)

  ● StakeManager › handleSlashing › should notify chain of slashing event

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://chain.example.com/api/v1/stake/slash", {"amount": 1000, "mediatorId": "mediator_pub_key_123", "reason": "Upheld challenge", "timestamp": Any<Number>}
    Received
           1
              "https://chain.example.com/api/v1/stake/bond",
              Object {
            -   "amount": 1000,
            +   "amount": 5000,
                "mediatorId": "mediator_pub_key_123",
            -   "reason": "Upheld challenge",
            -   "timestamp": Any<Number>,
            +   "timestamp": 1770744152483,
              },
            + {"timeout": 15000},
           2
              "https://chain.example.com/api/v1/stake/slash",
              {"amount": 1000, "mediatorId": "mediator_pub_key_123", "reason": "Upheld challenge", "timestamp": 1770744152483},
            + {"timeout": 10000},

    Number of calls: 2

      496 |
      497 |       // First call is bondStake, second is slashing notification
    > 498 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      499 |         `${config.chainEndpoint}/api/v1/stake/slash`,
      500 |         {
      501 |           mediatorId: config.mediatorPublicKey,

      at Object.<anonymous> (test/unit/consensus/StakeManager.test.ts:498:30)

FAIL test/unit/burn/BurnManager.test.ts (7.663 s)
  ● BurnManager › executeFilingBurn › should execute burn transaction for paid submission

    expect(received).toBe(expected) // Object.is equality

    Expected: "tx_abc123"
    Received: undefined

      226 |       expect(result?.intentHash).toBe('intent2');
      227 |       expect(result?.amount).toBe(20); // 10 × 2
    > 228 |       expect(result?.transactionHash).toBe('tx_abc123');
          |                                       ^
      229 |
      230 |       expect(mockAxios.post).toHaveBeenCalledWith(
      231 |         'http://test-chain:8080/api/v1/burns',

      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:228:39)

  ● BurnManager › executeFilingBurn › should handle burn transaction failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"amount": 20, "author": "user1", "id": "burn_1770744152511_fbe625ce23553a2e", "intentHash": "intent2", "multiplier": 2, "timestamp": 1770744152511, "transactionHash": undefined, "type": "base_filing"}

      258 |
      259 |       // Second submission should throw
    > 260 |       await expect(burnManager.executeFilingBurn('user1', 'intent2')).rejects.toThrow(
          |             ^
      261 |         'Network error'
      262 |       );
      263 |     });

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:260:13)

  ● BurnManager › executeSuccessBurn › should execute success burn on settlement closure

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://test-chain:8080/api/v1/burns", ObjectContaining {"settlementId": "settlement_123", "type": "success"}

    Number of calls: 0

      303 |       expect(result?.author).toBe('mediator_1');
      304 |
    > 305 |       expect(mockAxios.post).toHaveBeenCalledWith(
          |                              ^
      306 |         'http://test-chain:8080/api/v1/burns',
      307 |         expect.objectContaining({
      308 |           type: 'success',

      at Object.<anonymous> (test/unit/burn/BurnManager.test.ts:305:30)

FAIL test/unit/ingestion/IntentIngester.test.ts (7.745 s)
  ● IntentIngester › Intent Validation - isValidIntent › should accept valid intent with all required fields

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      129 |
      130 |       const cached = ingester.getCachedIntents();
    > 131 |       expect(cached).toHaveLength(1);
          |                      ^
      132 |       expect(cached[0].hash).toBe(VALID_INTENT_1.hash);
      133 |     });
      134 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:131:22)

  ● IntentIngester › Cache Management › should cache valid intent

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      367 |
      368 |       const cached = ingester.getCachedIntents();
    > 369 |       expect(cached).toHaveLength(1);
          |                      ^
      370 |       expect(cached[0].hash).toBe(VALID_INTENT_1.hash);
      371 |     });
      372 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:369:22)

  ● IntentIngester › Cache Management › should not cache duplicate intent

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      379 |
      380 |       const cached = ingester.getCachedIntents();
    > 381 |       expect(cached).toHaveLength(1);
          |                      ^
      382 |     });
      383 |
      384 |     it('should cache multiple different intents', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:381:22)

  ● IntentIngester › Cache Management › should cache multiple different intents

    expect(received).toHaveLength(expected)

    Expected length: 4
    Received length: 0
    Received array:  []

      390 |
      391 |       const cached = ingester.getCachedIntents();
    > 392 |       expect(cached).toHaveLength(ALL_VALID_INTENTS.length);
          |                      ^
      393 |     });
      394 |
      395 |     it('should enforce max cache size', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:392:22)

  ● IntentIngester › Cache Management › should remove oldest intents when cache is full

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      422 |
      423 |       const cached = smallIngester.getCachedIntents();
    > 424 |       expect(cached).toHaveLength(2);
          |                      ^
      425 |       expect(cached.find(i => i.hash === oldIntent.hash)).toBeUndefined();
      426 |     });
      427 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:424:22)

  ● IntentIngester › Cache Management › should get intent by hash

    expect(received).toBeDefined()

    Received: undefined

      434 |
      435 |       const intent = ingester.getIntent(VALID_INTENT_1.hash);
    > 436 |       expect(intent).toBeDefined();
          |                      ^
      437 |       expect(intent?.hash).toBe(VALID_INTENT_1.hash);
      438 |     });
      439 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:436:22)

  ● IntentIngester › Cache Management › should remove intent from cache

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      449 |
      450 |       await (ingester as any).pollForIntents();
    > 451 |       expect(ingester.getCachedIntents()).toHaveLength(1);
          |                                           ^
      452 |
      453 |       ingester.removeIntent(VALID_INTENT_1.hash);
      454 |       expect(ingester.getCachedIntents()).toHaveLength(0);

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:451:43)

  ● IntentIngester › Cache Management › should parse desires if not provided

    TypeError: Cannot read properties of undefined (reading 'desires')

      464 |
      465 |       const cached = ingester.getCachedIntents();
    > 466 |       expect(cached[0].desires.length).toBeGreaterThan(0);
          |                        ^
      467 |     });
      468 |
      469 |     it('should parse constraints if not provided', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:466:24)

  ● IntentIngester › Cache Management › should parse constraints if not provided

    TypeError: Cannot read properties of undefined (reading 'constraints')

      477 |       const cached = ingester.getCachedIntents();
      478 |       // Constraints may be empty if prose doesn't match patterns, so just check it exists
    > 479 |       expect(cached[0].constraints).toBeDefined();
          |                        ^
      480 |     });
      481 |   });
      482 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:479:24)

  ● IntentIngester › Prioritization › should prioritize intents by fee (descending)

    TypeError: Cannot read properties of undefined (reading 'hash')

      491 |
      492 |       const prioritized = ingester.getPrioritizedIntents();
    > 493 |       expect(prioritized[0].hash).toBe(HIGH_FEE_INTENT.hash);
          |                             ^
      494 |       expect(prioritized[prioritized.length - 1].hash).toBe(LOW_FEE_INTENT.hash);
      495 |     });
      496 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:493:29)

  ● IntentIngester › Prioritization › should handle intents without offeredFee

    TypeError: Cannot read properties of undefined (reading 'hash')

      506 |
      507 |       const prioritized = ingester.getPrioritizedIntents();
    > 508 |       expect(prioritized[0].hash).toBe(HIGH_FEE_INTENT.hash);
          |                             ^
      509 |     });
      510 |
      511 |     it('should return empty array if no intents cached', () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:508:29)

  ● IntentIngester › Polling Behavior › should call API with correct parameters

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/intents", ObjectContaining {"params": ObjectContaining {"limit": 100, "status": "pending"}}

    Number of calls: 0

      536 |       await (ingester as any).pollForIntents();
      537 |
    > 538 |       expect(mockedAxios.get).toHaveBeenCalledWith(
          |                               ^
      539 |         `${config.chainEndpoint}/api/v1/intents`,
      540 |         expect.objectContaining({
      541 |           params: expect.objectContaining({

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:538:31)

  ● IntentIngester › Edge Cases › should handle intent with very long prose

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      597 |
      598 |       const cached = ingester.getCachedIntents();
    > 599 |       expect(cached).toHaveLength(1);
          |                      ^
      600 |     });
      601 |
      602 |     it('should handle intent with special characters in prose', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:599:22)

  ● IntentIngester › Edge Cases › should handle intent with special characters in prose

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      612 |
      613 |       const cached = ingester.getCachedIntents();
    > 614 |       expect(cached).toHaveLength(1);
          |                      ^
      615 |     });
      616 |
      617 |     it('should handle intent with unicode characters', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:614:22)

  ● IntentIngester › Edge Cases › should handle intent with unicode characters

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      627 |
      628 |       const cached = ingester.getCachedIntents();
    > 629 |       expect(cached).toHaveLength(1);
          |                      ^
      630 |     });
      631 |
      632 |     it('should handle concurrent polling calls', async () => {

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:629:22)

  ● IntentIngester › Edge Cases › should handle concurrent polling calls

    expect(received).toHaveLength(expected)

    Expected length: 1
    Received length: 0
    Received array:  []

      642 |       // Should still only have one cached instance
      643 |       const cached = ingester.getCachedIntents();
    > 644 |       expect(cached).toHaveLength(1);
          |                      ^
      645 |     });
      646 |   });
      647 |

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:644:22)

  ● IntentIngester › Burn Integration › submitIntent › should submit free intent successfully

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/intents", ObjectContaining {"burnTransaction": null, "intent": ObjectContaining {"author": "user1"}}

    Number of calls: 0

      719 |
      720 |         // Verify intent was submitted to chain (not burn since it's free)
    > 721 |         expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                  ^
      722 |           'http://localhost:3000/api/v1/intents',
      723 |           expect.objectContaining({
      724 |             intent: expect.objectContaining({

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:721:34)

  ● IntentIngester › Burn Integration › submitIntent › should execute burn and submit paid intent

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/burns", ObjectContaining {"amount": 20, "type": "base_filing"}

    Number of calls: 0

      759 |
      760 |         // Verify burn was submitted to chain first
    > 761 |         expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                  ^
      762 |           'http://localhost:3000/api/v1/burns',
      763 |           expect.objectContaining({
      764 |             type: 'base_filing',

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:761:34)

  ● IntentIngester › Burn Integration › submitIntent › should handle burn execution failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"author": "user1", "branch": undefined, "constraints": [], "desires": ["general collaboration"], "flagCount": 0, "hash": "f756f3587e52a5c595227aa8e92d98d1a69db1458bceb8096a119a0d78b9e77c", "offeredFee": undefined, "prose": "Second submission that should fail due to burn execution failure", "status": "pending", "timestamp": 1770744152594}

      832 |         mockedAxios.post.mockRejectedValueOnce(new Error('Burn failed'));
      833 |
    > 834 |         await expect(ingesterWithBurn.submitIntent({
          |               ^
      835 |           author: 'user1',
      836 |           prose: 'Second submission that should fail due to burn execution failure',
      837 |         })).rejects.toThrow('Burn failed');

      at expect (node_modules/jest-circus/node_modules/expect/build/index.js:113:15)
      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:834:15)

  ● IntentIngester › Burn Integration › submitIntent › should handle chain submission failure

    expect(received).toBeNull()

    Received: {"author": "user1", "branch": undefined, "constraints": [], "desires": ["general collaboration"], "flagCount": 0, "hash": "100a86a77e0bb031876323e404e9223a2274f064b37ace251ed2d1f54a6d34a3", "offeredFee": undefined, "prose": "Intent submission that will fail due to chain error for testing", "status": "pending", "timestamp": 1770744152596}

      849 |         });
      850 |
    > 851 |         expect(intent).toBeNull();
          |                        ^
      852 |       });
      853 |     });
      854 |   });

      at Object.<anonymous> (test/unit/ingestion/IntentIngester.test.ts:851:24)

FAIL test/unit/settlement/SettlementManager.test.ts (7.741 s)
  ● SettlementManager › Settlement Submission › should submit settlement successfully with 200 status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/entries", ObjectContaining {"author": "test-public-key", "content": StringContaining "[PROPOSED SETTLEMENT]", "metadata": {"acceptanceDeadline": 1771003352515, "challenges": [], "facilitationFee": 0.025, "facilitationFeePercent": 1, "id": "test_settlement_id_0", "intentHashA": "intent_valid_001", "intentHashB": "intent_valid_002", "mediatorId": "test-public-key", "modelIntegrityHash": "hash_model_prompt_12345", "partyAAccepted": false, "partyBAccepted": false, "proposedTerms": {"deliverables": ["Modern logo design", "Vector files"], "price": 500, "timelines": "1 week"}, "reasoningTrace": "These intents align well for logo design services.", "status": "proposed", "timestamp": 1770744152515}, "signature": StringContaining "sig_", "type": "settlement"}

    Number of calls: 0

      366 |
      367 |       expect(result).toBe(true);
    > 368 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      369 |         `${config.chainEndpoint}/api/v1/entries`,
      370 |         expect.objectContaining({
      371 |           type: 'settlement',

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:368:32)

  ● SettlementManager › Settlement Submission › should return false on non-success status

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      419 |       const result = await manager.submitSettlement(settlement);
      420 |
    > 421 |       expect(result).toBe(false);
          |                      ^
      422 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      423 |     });
      424 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:421:22)

  ● SettlementManager › Settlement Submission › should handle API errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      434 |       const result = await manager.submitSettlement(settlement);
      435 |
    > 436 |       expect(result).toBe(false);
          |                      ^
      437 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      438 |     });
      439 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:436:22)

  ● SettlementManager › Settlement Submission › should include signature in submission

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: Any<String>, ObjectContaining {"signature": StringContaining "sig_"}

    Number of calls: 0

      449 |       await manager.submitSettlement(settlement);
      450 |
    > 451 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      452 |         expect.any(String),
      453 |         expect.objectContaining({
      454 |           signature: expect.stringContaining('sig_'),

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:451:32)

  ● SettlementManager › Prose Formatting › should format settlement as prose entry

    TypeError: Cannot read properties of undefined (reading '1')

      475 |       await manager.submitSettlement(settlement);
      476 |
    > 477 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      478 |       const prose = callArgs.content;
      479 |
      480 |       expect(prose).toContain('[PROPOSED SETTLEMENT]');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:477:54)

  ● SettlementManager › Prose Formatting › should include proposed terms in prose

    TypeError: Cannot read properties of undefined (reading '1')

      498 |       await manager.submitSettlement(settlement);
      499 |
    > 500 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      501 |       const prose = callArgs.content;
      502 |
      503 |       expect(prose).toContain('Proposed Terms:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:500:54)

  ● SettlementManager › Prose Formatting › should include stake reference in prose when present

    TypeError: Cannot read properties of undefined (reading '1')

      520 |       await manager.submitSettlement(settlement);
      521 |
    > 522 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      523 |       const prose = callArgs.content;
      524 |
      525 |       expect(prose).toContain('Stake Reference:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:522:54)

  ● SettlementManager › Prose Formatting › should include authority signature in prose when present

    TypeError: Cannot read properties of undefined (reading '1')

      541 |       await manager.submitSettlement(settlement);
      542 |
    > 543 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      544 |       const prose = callArgs.content;
      545 |
      546 |       expect(prose).toContain('Authority Signature:');

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:543:54)

  ● SettlementManager › Settlement Monitoring › should check settlement status on chain

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "http://localhost:3000/api/v1/settlements/test_settlement_id_0/status"

    Number of calls: 0

      575 |       await manager.monitorSettlements();
      576 |
    > 577 |       expect(mockedAxios.get).toHaveBeenCalledWith(
          |                               ^
      578 |         `${config.chainEndpoint}/api/v1/settlements/${settlement.id}/status`
      579 |       );
      580 |     });

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:577:31)

  ● SettlementManager › Settlement Monitoring › should update settlement when Party A accepts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      601 |
      602 |       const active = manager.getActiveSettlements();
    > 603 |       expect(active[0].partyAAccepted).toBe(true);
          |                                        ^
      604 |       expect(active[0].partyBAccepted).toBe(false);
      605 |     });
      606 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:603:40)

  ● SettlementManager › Settlement Monitoring › should update settlement when Party B accepts

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      627 |       const active = manager.getActiveSettlements();
      628 |       expect(active[0].partyAAccepted).toBe(false);
    > 629 |       expect(active[0].partyBAccepted).toBe(true);
          |                                        ^
      630 |     });
      631 |
      632 |     it('should update challenges array', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:629:40)

  ● SettlementManager › Settlement Monitoring › should update challenges array

    expect(received).toEqual(expected) // deep equality

    - Expected  - 11
    + Received  +  1

    - Array [
    -   Object {
    -     "challengerId": "challenger_456",
    -     "contradictionProof": "proof_pending",
    -     "id": "challenge_1",
    -     "paraphraseEvidence": "evidence_pending",
    -     "settlementId": "test_settlement_id_0",
    -     "status": "pending",
    -     "timestamp": 1770744152574,
    -   },
    - ]
    + Array []

      663 |
      664 |       const active = manager.getActiveSettlements();
    > 665 |       expect(active[0].challenges).toEqual(mockChallenges);
          |                                    ^
      666 |     });
      667 |
      668 |     it('should close settlement when both parties accept', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:665:36)

  ● SettlementManager › Settlement Monitoring › should close settlement when both parties accept

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      686 |       await manager.monitorSettlements();
      687 |
    > 688 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      689 |       expect(manager.getActiveSettlements()).toHaveLength(0);
      690 |     });
      691 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:688:32)

  ● SettlementManager › Settlement Monitoring › should close settlement even if deadline passed when both accepted

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      723 |       await manager.monitorSettlements();
      724 |
    > 725 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      726 |     });
      727 |
      728 |     it('should handle monitoring errors gracefully', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:725:32)

  ● SettlementManager › Settlement Closure › should create payout entry when closing

    TypeError: Cannot read properties of undefined (reading '1')

      770 |
      771 |       const payoutCall = mockedAxios.post.mock.calls[1];
    > 772 |       const payoutData = payoutCall[1] as any;
          |                                    ^
      773 |       expect(payoutData.type).toBe('payout');
      774 |       expect(payoutData.metadata.settlementId).toBe(settlement.id);
      775 |       expect(payoutData.metadata.amount).toBe(settlement.facilitationFee);

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:772:36)

  ● SettlementManager › Settlement Closure › should forfeit fee if settlement has upheld challenges

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      808 |
      809 |       // Should not create payout entry
    > 810 |       expect(mockedAxios.post).toHaveBeenCalledTimes(1); // Only submit, no payout
          |                                ^
      811 |     });
      812 |
      813 |     it('should proceed with closure if challenges are rejected', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:810:32)

  ● SettlementManager › Settlement Closure › should proceed with closure if challenges are rejected

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      839 |       await manager.monitorSettlements();
      840 |
    > 841 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2); // Submit + payout
          |                                ^
      842 |     });
      843 |
      844 |     it('should handle closure errors gracefully', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:841:32)

  ● SettlementManager › Active Settlement Management › should remove settlement from active when closed

    expect(received).toHaveLength(expected)

    Expected length: 0
    Received length: 1
    Received array:  [{"acceptanceDeadline": 1771003352587, "challenges": [], "facilitationFee": 0.025, "facilitationFeePercent": 1, "id": "test_settlement_id_0", "intentHashA": "intent_valid_001", "intentHashB": "intent_valid_002", "mediatorId": "test-public-key", "modelIntegrityHash": "hash_model_prompt_12345", "partyAAccepted": false, "partyBAccepted": false, "proposedTerms": {"deliverables": ["Modern logo design", "Vector files"], "price": 500, "timelines": "1 week"}, "reasoningTrace": "These intents align well for logo design services.", "status": "proposed", "timestamp": 1770744152587}]

      917 |       await manager.monitorSettlements();
      918 |
    > 919 |       expect(manager.getActiveSettlements()).toHaveLength(0);
          |                                              ^
      920 |     });
      921 |
      922 |     it('should return empty array when no active settlements', () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:919:46)

  ● SettlementManager › Burn Integration › should execute success burn when settlement closes

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      976 |
      977 |       // Should have submit + burn + payout calls
    > 978 |       expect(mockedAxios.post).toHaveBeenCalledTimes(3);
          |                                ^
      979 |
      980 |       // Verify burn was executed
      981 |       const burnCall = mockedAxios.post.mock.calls[1];

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:978:32)

  ● SettlementManager › Burn Integration › should not execute burn when BurnManager is not provided

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1009 |
      1010 |       // Should only have submit + payout (no burn)
    > 1011 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2);
           |                                ^
      1012 |       const calls = mockedAxios.post.mock.calls;
      1013 |       expect(calls[0][0]).toContain('/entries'); // Submit
      1014 |       expect(calls[1][0]).toContain('/entries'); // Payout

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1011:32)

  ● SettlementManager › Burn Integration › should not fail settlement closure if burn execution fails

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 3
    Received number of calls: 0

      1042 |
      1043 |       // Settlement should still close (payout should be attempted)
    > 1044 |       expect(mockedAxios.post).toHaveBeenCalledTimes(3);
           |                                ^
      1045 |     });
      1046 |
      1047 |     it('should not execute burn when settlement value is zero', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1044:32)

  ● SettlementManager › Burn Integration › should not execute burn when settlement value is zero

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 0

      1069 |
      1070 |       // Should only have submit + payout (no burn for zero value)
    > 1071 |       expect(mockedAxios.post).toHaveBeenCalledTimes(2);
           |                                ^
      1072 |     });
      1073 |
      1074 |     it('should not execute burn when settlement has upheld challenges', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1071:32)

  ● SettlementManager › Burn Integration › should not execute burn when settlement has upheld challenges

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 0

      1104 |
      1105 |       // Should only have submit (no burn, no payout)
    > 1106 |       expect(mockedAxios.post).toHaveBeenCalledTimes(1);
           |                                ^
      1107 |     });
      1108 |
      1109 |     it('should calculate settlement value correctly from facilitation fee', async () => {

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1106:32)

  ● SettlementManager › Burn Integration › should calculate settlement value correctly from facilitation fee

    TypeError: Cannot read properties of undefined (reading '1')

      1138 |       // Verify burn calculation
      1139 |       const burnCall = mockedAxios.post.mock.calls[1];
    > 1140 |       const burnData = burnCall[1] as any;
           |                                ^
      1141 |       const totalFees = (VALID_INTENT_1.offeredFee || 0) + (VALID_INTENT_2.offeredFee || 0);
      1142 |       const expectedBurnAmount = totalFees * (config.successBurnPercentage || 0.0005);
      1143 |

      at Object.<anonymous> (test/unit/settlement/SettlementManager.test.ts:1140:32)

FAIL test/integration/AlignmentCycle.test.ts (8.464 s)
  ● Integration: Alignment Cycle › Full Cycle Execution › should execute complete alignment cycle from start to finish

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should handle intent discovery and caching

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should generate embeddings for all intents

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should find alignment candidates with high similarity

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Full Cycle Execution › should submit settlement after successful negotiation

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should process top 3 candidates per cycle

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should handle no alignment candidates gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Multi-Candidate Processing › should prioritize candidates by fee and similarity

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should continue after LLM API failure

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should handle intent fetching errors gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should handle settlement submission failures

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Error Recovery › should recover from vector database errors

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should cleanup embedding cache for removed intents

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should clear intervals on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should save vector database on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should handle stop before start gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Resource Cleanup › should handle multiple stop calls gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should run alignment cycle every 30 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should poll for intents every 10 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Cycle Timing and Intervals › should monitor settlements every 60 seconds

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Settlement Submission Flow › should create settlement with correct structure

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Settlement Submission Flow › should not submit if negotiation fails

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Status and Monitoring › should provide accurate status information

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

  ● Integration: Alignment Cycle › Status and Monitoring › should update status after intents are cached

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/AlignmentCycle.test.ts:119:20)

FAIL test/unit/challenge/ChallengeManager.test.ts
  ● ChallengeManager › submitChallenge › should submit challenge successfully with 200 status

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "https://test-chain.example.com/api/v1/challenges", ObjectContaining {"challenge": ObjectContaining {"challengerId": "test-public-key", "contradictionProof": "The settlement violates the budget constraint", "paraphraseEvidence": "Evidence of violation", "settlementId": "settlement-123"}, "prose": StringContaining "[CHALLENGE SUBMISSION]", "signature": Any<String>}, Any<Object>

    Number of calls: 0

      110 |
      111 |       // Verify the API call
    > 112 |       expect(mockedAxios.post).toHaveBeenCalledWith(
          |                                ^
      113 |         `${mockConfig.chainEndpoint}/api/v1/challenges`,
      114 |         expect.objectContaining({
      115 |           challenge: expect.objectContaining({

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:112:32)

  ● ChallengeManager › submitChallenge › should handle non-success status codes

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      152 |       const result = await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      153 |
    > 154 |       expect(result.success).toBe(false);
          |                              ^
      155 |       expect(result.error).toContain('HTTP 400');
      156 |       expect(result.challengeId).toBeUndefined();
      157 |     });

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:154:30)

  ● ChallengeManager › submitChallenge › should handle API errors gracefully

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      162 |       const result = await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      163 |
    > 164 |       expect(result.success).toBe(false);
          |                              ^
      165 |       expect(result.error).toBe('Network error');
      166 |       expect(result.challengeId).toBeUndefined();
      167 |     });

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:164:30)

  ● ChallengeManager › submitChallenge › should format challenge prose correctly

    TypeError: Cannot read properties of undefined (reading '1')

      196 |       await challengeManager.submitChallenge(mockSettlement, mockAnalysis);
      197 |
    > 198 |       const callArgs = mockedAxios.post.mock.calls[0][1] as any;
          |                                                      ^
      199 |       const prose = callArgs.prose;
      200 |
      201 |       expect(prose).toContain('[CHALLENGE SUBMISSION]');

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:198:54)

  ● ChallengeManager › monitorChallenges › should update challenge status when upheld

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 1

      246 |       // Challenge should be removed from active tracking after resolution
      247 |       const updatedChallenges = challengeManager.getSubmittedChallenges();
    > 248 |       expect(updatedChallenges.length).toBe(0);
          |                                        ^
      249 |     });
      250 |
      251 |     it('should update reputation when challenge rejected', async () => {

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:248:40)

  ● ChallengeManager › monitorChallenges › should update reputation when challenge rejected

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

      268 |       await challengeManager.monitorChallenges();
      269 |
    > 270 |       expect(mockReputationTracker.recordFailedChallenge).toHaveBeenCalled();
          |                                                           ^
      271 |
      272 |       // Challenge should be removed after resolution
      273 |       const updatedChallenges = challengeManager.getSubmittedChallenges();

      at Object.<anonymous> (test/unit/challenge/ChallengeManager.test.ts:270:59)

FAIL test/integration/IntentSubmission.test.ts (8.963 s)
  ● Intent Submission Integration › Intent Submission via IntentIngester › should submit first intent with free burn allowance

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should execute burn for second intent submission

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should handle escalating burns for multiple submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should preview burn before submission

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should track different users independently

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should include burn stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should handle load multiplier in burn calculations

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

  ● Intent Submission Integration › Intent Submission via IntentIngester › should reject invalid intent submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/IntentSubmission.test.ts:118:20)

FAIL test/integration/SettlementBurns.test.ts (8.972 s)
  ● Settlement Burns Integration › Success Burn Execution › should execute success burn when settlement closes

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Success Burn Execution › should track success burns separately in burn stats

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Success Burn Execution › should calculate burn from settlement value correctly

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Burn Skipping Scenarios › should not execute burn when settlement has upheld challenges

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Burn Skipping Scenarios › should not execute burn when settlement value is zero

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Error Handling › should not fail settlement closure if burn execution fails

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › Error Handling › should log burn errors without affecting settlement status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

  ● Settlement Burns Integration › End-to-End Settlement Lifecycle › should demonstrate complete settlement with success burn

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SettlementBurns.test.ts:124:20)

FAIL test/integration/LoadBasedScaling.test.ts (8.983 s)
  ● Load-Based Burn Scaling Integration › LoadMonitor Initialization › should initialize LoadMonitor with MediatorNode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › LoadMonitor Initialization › should start load monitoring when node starts (if enabled)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should increase burn multiplier under high load

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should maintain base multiplier under low load

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Dynamic Load Adjustment › should apply load multiplier to burn calculations

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should track intent submission rate

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should track active intent count

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Metrics Tracking › should calculate average burn amount

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Node Status Integration › should include load stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Smooth Transitions › should gradually adjust multiplier (not instant)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Periodic Monitoring › should update load multiplier periodically

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › Load-Disabled Mode › should not include load stats when disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

  ● Load-Based Burn Scaling Integration › End-to-End Load Scaling › should demonstrate full congestion pricing workflow

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/LoadBasedScaling.test.ts:124:20)

FAIL test/integration/BurnAnalytics.test.ts (8.991 s)
  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should provide analytics via mediatorNode.getBurnAnalytics()

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should track burns and provide time series data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Integration with MediatorNode › should provide trend analysis after multiple burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should track individual user burn patterns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should calculate average burn per user

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › User Analytics › should get analytics for all users

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Leaderboards › should generate leaderboards from burn data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Leaderboards › should rank users correctly by total amount

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should generate comprehensive dashboard metrics

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should show correct burn type distribution

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Dashboard Metrics › should track load multiplier over time

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Forecasting › should generate burn forecasts

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Real-time Analytics Updates › should reflect new burns immediately in analytics

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle analytics with no burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle analytics with only free burns

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Edge Cases › should handle time series with sparse data

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

  ● Burn Analytics Integration › Analytics Performance › should handle large number of burns efficiently

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/BurnAnalytics.test.ts:113:20)

FAIL test/integration/ConsensusMode.test.ts (9.034 s)
  ● Consensus Mode Integration Tests › Permissionless Mode › should start successfully without any restrictions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:156:22)

  ● Consensus Mode Integration Tests › Permissionless Mode › should process intents without stake or authority checks

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:184:22)

  ● Consensus Mode Integration Tests › Permissionless Mode › should allow settlement submission without stake reference

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:228:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should fail to start if minimum stake requirement is not met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:282:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should start successfully when minimum stake is met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:318:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should load delegations and calculate effective stake correctly

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:360:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should include stake reference in settlement submissions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:414:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should handle stake bonding failure gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:465:22)

  ● Consensus Mode Integration Tests › DPoS Mode › should filter out inactive delegations when calculating effective stake

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:510:22)

  ● Consensus Mode Integration Tests › PoA Mode › should fail to start if not in authority set

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:575:22)

  ● Consensus Mode Integration Tests › PoA Mode › should start successfully when in authority set

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:612:22)

  ● Consensus Mode Integration Tests › PoA Mode › should process intents when authorized

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:652:22)

  ● Consensus Mode Integration Tests › PoA Mode › should handle authority set loading failure gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:704:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should fail to start if not in authority set (even with sufficient stake)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:744:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should fail to start if in authority set but insufficient stake

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:788:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should start successfully when both authorized and stake requirements are met

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:831:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should include both stake and authority signature in settlements

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:875:22)

  ● Consensus Mode Integration Tests › Hybrid Mode › should leverage delegations to meet stake requirement in hybrid mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:935:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should validate consensus mode configuration

    expect(received).not.toThrow()

    Error name:    "TypeError"
    Error message: "Cannot read properties of undefined (reading 'interceptors')"

          90 |
          91 |     // Add response interceptor for logging
        > 92 |     this.client.interceptors.response.use(
             |                 ^
          93 |       response => response,
          94 |       (error: AxiosError) => {
          95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at test/integration/ConsensusMode.test.ts:1001:22
      at test/integration/ConsensusMode.test.ts:1001:52
                at Array.forEach (<anonymous>)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:999:18)
      at test/integration/ConsensusMode.test.ts:1001:52
          at Array.forEach (<anonymous>)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:999:18)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should handle missing DPoS configuration in DPoS mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1010:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should handle missing PoA configuration in PoA mode

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1044:22)

  ● Consensus Mode Integration Tests › Mode-Specific Validations › should properly clean up consensus components on stop

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ConsensusMode.test.ts:1083:22)

FAIL test/e2e/ComprehensiveSimulation.test.ts (9.081 s)
  ● Comprehensive E2E Simulation (100 iterations) › Iteration 1 › should handle high_load scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 2 › should handle network_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 3 › should handle llm_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 4 › should handle invalid_intents scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 5 › should handle stake_insufficient scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 6 › should handle unauthorized_poa scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 7 › should handle challenge_submission scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 8 › should handle spam_detection scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 9 › should handle validator_rotation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 10 › should handle concurrent_operations scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 11 › should handle resource_exhaustion scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 12 › should handle timeout_recovery scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 13 › should handle chain_api_errors scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 14 › should handle semantic_consensus scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 15 › should handle normal_operation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 16 › should handle high_load scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 17 › should handle network_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 18 › should handle llm_failures scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 19 › should handle invalid_intents scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 20 › should handle stake_insufficient scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 21 › should handle unauthorized_poa scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 22 › should handle challenge_submission scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 23 › should handle spam_detection scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 24 › should handle validator_rotation scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 25 › should handle concurrent_operations scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 26 › should handle resource_exhaustion scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 27 › should handle timeout_recovery scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 28 › should handle chain_api_errors scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 29 › should handle semantic_consensus scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 30 › should handle normal_operation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 31 › should handle high_load scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 32 › should handle network_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 33 › should handle llm_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 34 › should handle invalid_intents scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 35 › should handle stake_insufficient scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 36 › should handle unauthorized_poa scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 37 › should handle challenge_submission scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 38 › should handle spam_detection scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 39 › should handle validator_rotation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 40 › should handle concurrent_operations scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 41 › should handle resource_exhaustion scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 42 › should handle timeout_recovery scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 43 › should handle chain_api_errors scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 44 › should handle semantic_consensus scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 45 › should handle normal_operation scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 46 › should handle high_load scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 47 › should handle network_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 48 › should handle llm_failures scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 49 › should handle invalid_intents scenario with dpos consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 50 › should handle stake_insufficient scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 51 › should handle unauthorized_poa scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 52 › should handle challenge_submission scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 53 › should handle spam_detection scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 54 › should handle validator_rotation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 55 › should handle concurrent_operations scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 56 › should handle resource_exhaustion scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 57 › should handle timeout_recovery scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 58 › should handle chain_api_errors scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 59 › should handle semantic_consensus scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 60 › should handle normal_operation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 61 › should handle high_load scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 62 › should handle network_failures scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 63 › should handle llm_failures scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 64 › should handle invalid_intents scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 65 › should handle stake_insufficient scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 66 › should handle unauthorized_poa scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 67 › should handle challenge_submission scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 68 › should handle spam_detection scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 69 › should handle validator_rotation scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 70 › should handle concurrent_operations scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 71 › should handle resource_exhaustion scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 72 › should handle timeout_recovery scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 73 › should handle chain_api_errors scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 74 › should handle semantic_consensus scenario with poa consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 75 › should handle normal_operation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 76 › should handle high_load scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 77 › should handle network_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 78 › should handle llm_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 79 › should handle invalid_intents scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 80 › should handle stake_insufficient scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 81 › should handle unauthorized_poa scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 82 › should handle challenge_submission scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 83 › should handle spam_detection scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 84 › should handle validator_rotation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 85 › should handle concurrent_operations scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 86 › should handle resource_exhaustion scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 87 › should handle timeout_recovery scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 88 › should handle chain_api_errors scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 89 › should handle semantic_consensus scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 90 › should handle normal_operation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 91 › should handle high_load scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 92 › should handle network_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 93 › should handle llm_failures scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 94 › should handle invalid_intents scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 95 › should handle stake_insufficient scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 96 › should handle unauthorized_poa scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 97 › should handle challenge_submission scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 98 › should handle spam_detection scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 99 › should handle validator_rotation scenario with hybrid consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Iteration 100 › should handle concurrent_operations scenario with permissionless consensus

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      692 |
      693 |       // The test passes if the simulation completed (success or expected failure)
    > 694 |       expect(result.success).toBe(true);
          |                              ^
      695 |       expect(result.duration).toBeLessThan(10000); // Should complete within 10s
      696 |     });
      697 |   });

      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:694:30)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle rapid start/stop cycles

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:708:22)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle maximum cache size

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:725:20)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should handle all features enabled simultaneously

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:762:20)

  ● Comprehensive E2E Simulation (100 iterations) › Stress Tests › should recover from intermittent failures

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:785:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle empty intent pool

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:805:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle single intent (no pairs possible)

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:822:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle negotiation failures gracefully

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:841:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle malformed API responses

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:860:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle very long intent prose

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:882:20)

  ● Comprehensive E2E Simulation (100 iterations) › Edge Cases › should handle special characters in intent prose

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:901:20)

  ● Comprehensive E2E Simulation (100 iterations) › Concurrency › should handle multiple nodes in parallel

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/e2e/ComprehensiveSimulation.test.ts:923:20)

FAIL test/integration/ChallengeLifecycle.test.ts (9.642 s)
  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should provide access to challenge detector and manager

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should provide access to challenge detector and manager

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should analyze settlement for contradictions

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should analyze settlement for contradictions

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should submit challenge and track it

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should submit challenge and track it

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should update challenge status via monitoring

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should update challenge status via monitoring

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should include challenge stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Detection and Submission › should include challenge stats in node status

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Configuration › should respect minConfidenceToChallenge setting

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Configuration › should respect minConfidenceToChallenge setting

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

  ● Challenge Lifecycle Integration › Challenge Configuration › should not include challenge stats when disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:47:20)

  ● Challenge Lifecycle Integration › Challenge Configuration › should not include challenge stats when disabled

    TypeError: Cannot read properties of undefined (reading 'stop')

      49 |
      50 |   afterEach(async () => {
    > 51 |     await mediatorNode.stop();
         |                        ^
      52 |
      53 |     // Cleanup test database
      54 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/ChallengeLifecycle.test.ts:51:24)

FAIL test/integration/SemanticConsensusLifecycle.test.ts (9.669 s)
  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should detect high-value settlements requiring verification

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should detect high-value settlements requiring verification

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should not require verification for low-value settlements

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › High-Value Settlement Detection › should not require verification for low-value settlements

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should initiate verification for high-value settlement

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should initiate verification for high-value settlement

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should exclude requester and self from verifier selection

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Request Initiation › should exclude requester and self from verifier selection

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Response Submission › should generate and submit verification response

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Verification Response Submission › should generate and submit verification response

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should include verification stats in node status

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should include verification stats in node status

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should update stats after initiating verification

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should update stats after initiating verification

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should not include stats when semantic consensus disabled

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Node Status Integration › should not include stats when semantic consensus disabled

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify non-equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Semantic Equivalence › should correctly identify non-equivalent semantic summaries

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

  ● Semantic Consensus Verification Lifecycle Integration › Configuration › should respect HIGH_VALUE_THRESHOLD setting

    TypeError: Cannot read properties of undefined (reading 'interceptors')

      90 |
      91 |     // Add response interceptor for logging
    > 92 |     this.client.interceptors.response.use(
         |                 ^
      93 |       response => response,
      94 |       (error: AxiosError) => {
      95 |         logger.error('Chain API error', {

      at new ChainClient (src/chain/ChainClient.ts:92:17)
      at Function.fromConfig (src/chain/ChainClient.ts:110:12)
      at new BurnManager (src/burn/BurnManager.ts:28:51)
      at new MediatorNode (src/MediatorNode.ts:78:24)
      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:50:20)

  ● Semantic Consensus Verification Lifecycle Integration › Configuration › should respect HIGH_VALUE_THRESHOLD setting

    TypeError: Cannot read properties of undefined (reading 'stop')

      52 |
      53 |   afterEach(async () => {
    > 54 |     await mediatorNode.stop();
         |                        ^
      55 |
      56 |     // Cleanup test database
      57 |     if (fs.existsSync(testDbPath)) {

      at Object.<anonymous> (test/integration/SemanticConsensusLifecycle.test.ts:54:24)

FAIL test/dispute/OutcomeRecorder.test.ts
  ● OutcomeRecorder › Persistence and Loading › should persist outcomes to disk

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

      512 |
      513 |       const filePath = path.join(testDataPath, `${result.resolutionId}.json`);
    > 514 |       expect(fs.existsSync(filePath)).toBe(true);
          |                                       ^
      515 |
      516 |       const content = fs.readFileSync(filePath, 'utf-8');
      517 |       const savedOutcome = JSON.parse(content);

      at Object.<anonymous> (test/dispute/OutcomeRecorder.test.ts:514:39)

  ● OutcomeRecorder › Persistence and Loading › should load existing outcomes on initialization

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

      530 |
      531 |       const outcomes = newRecorder.getAllOutcomes();
    > 532 |       expect(outcomes.length).toBeGreaterThan(0);
          |                               ^
      533 |       expect(outcomes.some((o) => o.disputeId === 'dispute-27')).toBe(true);
      534 |     });
      535 |   });

      at Object.<anonymous> (test/dispute/OutcomeRecorder.test.ts:532:31)

FAIL test/unit/sybil/SubmissionTracker.test.ts
  ● Test suite failed to run

    TypeError: Cannot read properties of undefined (reading 'on')

      11 |  * - Max 20MB per file
      12 |  */
    > 13 | const errorRotateTransport = new DailyRotateFile({
         |                              ^
      14 |   filename: `${logDir}/error-%DATE%.log`,
      15 |   datePattern: 'YYYY-MM-DD',
      16 |   level: 'error',

      at BubbleEvents (node_modules/file-stream-rotator/FileStreamRotator.js:690:13)
      at Object.<anonymous>.FileStreamRotator.getStream (node_modules/file-stream-rotator/FileStreamRotator.js:545:9)
      at new DailyRotateFile (node_modules/winston-daily-rotate-file/daily-rotate-file.js:81:57)
      at Object.<anonymous> (src/utils/logger.ts:13:30)
      at Object.<anonymous> (src/sybil/SubmissionTracker.ts:12:1)
      at Object.<anonymous> (test/unit/sybil/SubmissionTracker.test.ts:1:1)


Test Suites: 18 failed, 38 passed, 56 total
Tests:       283 failed, 1270 passed, 1553 total
Snapshots:   0 total
Time:        20.048 s
Ran all test suites.
